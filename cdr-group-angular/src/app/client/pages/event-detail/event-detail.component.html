<section class="event-detail-section">
  <div class="container">
    @if (loading) {
      <div class="loading-container">
        <mat-spinner diameter="50"></mat-spinner>
      </div>
    } @else if (error || !event) {
      <div class="error-container">
        <mat-icon>event_busy</mat-icon>
        <h2>{{ 'events.eventNotFound' | translate }}</h2>
        <p>{{ 'events.eventNotFoundDesc' | translate }}</p>
        <a routerLink="/" class="back-btn">
          <mat-icon>arrow_back</mat-icon>
          {{ 'common.backToHome' | translate }}
        </a>
      </div>
    } @else {
      <div class="event-detail-card">
        @if (event.primaryFileUrl) {
          <div class="event-featured-image" (click)="openImagePreview(event.primaryFileUrl)">
            <img [src]="event.primaryFileUrl" [alt]="event.title">
          </div>
        }
        <div class="event-header">
          @if (event.eventDate) {
            <div class="event-date-badge">
              <mat-icon>calendar_today</mat-icon>
              <span>{{ getFormattedDate(event.eventDate) }}</span>
            </div>
          }
          @if (event.department) {
            <div class="department-badge">
              <mat-icon>business</mat-icon>
              <span>{{ event.department }}</span>
            </div>
          }
        </div>

        <h1 class="event-title">{{ event.title }}</h1>

        @if (event.description) {
          <div class="event-description">
            <p>{{ event.description }}</p>
          </div>
        }

        <!-- Event Images Gallery -->
        @if (loadingImages) {
          <div class="images-loading">
            <mat-spinner diameter="30"></mat-spinner>
          </div>
        } @else if (images.length > 0) {
          <div class="event-images">
            <h3>{{ 'events.eventImages' | translate }}</h3>
            <div class="images-gallery">
              @for (image of images; track image.id) {
                <div class="image-item" (click)="openImagePreview(image.fileUrl)">
                  <img [src]="image.fileUrl" [alt]="image.fileName" loading="lazy">
                </div>
              }
            </div>
          </div>
        }

        <div class="event-actions">
          @if (event.eventUrl) {
            <button mat-raised-button color="primary" class="action-btn" (click)="openEventUrl()">
              <mat-icon>open_in_new</mat-icon>
              {{ 'events.viewExternalLink' | translate }}
            </button>
          }
          <a routerLink="/" mat-stroked-button class="back-link">
            <mat-icon>arrow_back</mat-icon>
            {{ 'common.backToHome' | translate }}
          </a>
        </div>
      </div>
    }
  </div>
</section>
