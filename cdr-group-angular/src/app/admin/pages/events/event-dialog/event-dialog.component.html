<app-base-dialog
  [title]="dialogTitle"
  [saveLabel]="saveLabel"
  [saveDisabled]="form.invalid"
  [loading]="loading"
  (save)="onSubmit()"
  (cancel)="onCancel()">

  <form [formGroup]="form" class="dialog-form">
    <!-- Basic Info Section -->
    <div class="form-section section-primary">
      <div class="section-header">
        <div class="section-icon">
          <mat-icon>event</mat-icon>
        </div>
        <div class="section-title">{{ 'admin.eventsAdmin.basicInfo' | translate }}</div>
      </div>

      <div class="section-content">
        <div class="form-row">
          <mat-form-field appearance="outline">
            <mat-label>{{ 'admin.eventsAdmin.titleEn' | translate }}</mat-label>
            <mat-icon matPrefix>title</mat-icon>
            <input matInput formControlName="titleEn" [placeholder]="'admin.eventsAdmin.placeholders.titleEn' | translate">
            @if (form.get('titleEn')?.hasError('required') && form.get('titleEn')?.touched) {
              <mat-error>{{ 'admin.eventsAdmin.errors.titleEnRequired' | translate }}</mat-error>
            }
          </mat-form-field>

          <mat-form-field appearance="outline">
            <mat-label>{{ 'admin.eventsAdmin.titleAr' | translate }}</mat-label>
            <mat-icon matPrefix>title</mat-icon>
            <input matInput formControlName="titleAr" [placeholder]="'admin.eventsAdmin.placeholders.titleAr' | translate" dir="rtl">
            @if (form.get('titleAr')?.hasError('required') && form.get('titleAr')?.touched) {
              <mat-error>{{ 'admin.eventsAdmin.errors.titleArRequired' | translate }}</mat-error>
            }
          </mat-form-field>
        </div>
      </div>
    </div>

    <!-- Description Section -->
    <div class="form-section section-blue">
      <div class="section-header">
        <div class="section-icon">
          <mat-icon>description</mat-icon>
        </div>
        <div class="section-title">{{ 'admin.eventsAdmin.descriptionSection' | translate }}</div>
      </div>

      <div class="section-content">
        <mat-form-field appearance="outline">
          <mat-label>{{ 'admin.eventsAdmin.descriptionEn' | translate }}</mat-label>
          <textarea matInput formControlName="descriptionEn" rows="3" [placeholder]="'admin.eventsAdmin.placeholders.descriptionEn' | translate"></textarea>
        </mat-form-field>

        <mat-form-field appearance="outline">
          <mat-label>{{ 'admin.eventsAdmin.descriptionAr' | translate }}</mat-label>
          <textarea matInput formControlName="descriptionAr" rows="3" [placeholder]="'admin.eventsAdmin.placeholders.descriptionAr' | translate" dir="rtl"></textarea>
        </mat-form-field>
      </div>
    </div>

    <!-- Event Details Section -->
    <div class="form-section section-orange">
      <div class="section-header">
        <div class="section-icon">
          <mat-icon>link</mat-icon>
        </div>
        <div class="section-title">{{ 'admin.eventsAdmin.detailsSection' | translate }}</div>
      </div>

      <div class="section-content">
        <div class="form-row">
          <app-date-picker
            formControlName="eventDate"
            [label]="'admin.eventsAdmin.eventDate' | translate"
            icon="calendar_today">
          </app-date-picker>

          <mat-form-field appearance="outline">
            <mat-label>{{ 'admin.eventsAdmin.eventUrl' | translate }}</mat-label>
            <mat-icon matPrefix>link</mat-icon>
            <input matInput formControlName="eventUrl" [placeholder]="'admin.eventsAdmin.placeholders.eventUrl' | translate">
          </mat-form-field>
        </div>

        <app-async-select
          formControlName="departmentId"
          [label]="'admin.eventsAdmin.department' | translate"
          [nullOptionLabel]="'admin.eventsAdmin.noDepartment' | translate"
          icon="business"
          [dataSource$]="departmentsDataSource$"
          [optionMapper]="departmentMapper">
        </app-async-select>
      </div>
    </div>
  </form>

</app-base-dialog>
