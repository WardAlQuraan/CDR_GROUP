import{$ as ea,A as Bo,B as No,C as Ro,D as Fo,E as Vo,F as zo,G as Lo,H as Uo,I as rt,J as Go,K as $o,L as jo,M as qo,N as Ho,O as Yo,P as Xo,Q as Wo,R as Qo,S as yi,T as G,U as $,V as Pe,W as Ko,X as Zo,Y as Jo,Z as Ae,_ as Te,a as xi,aa as Oe,b as Me,ba as Mi,c as M,ca as Pi,d as ne,da as Oi,e as re,ea as ta,fa as ia,g as So,ga as na,h as le,ha as oa,i as bi,ia as aa,j as se,ja as Di,k as ce,ka as ra,la as wi,m as pe,ma as la,n as Q,na as A,o as ke,oa as Ke,p as nt,pa as De,q as oe,qa as Si,r as ot,ra as Ei,s as K,t as _e,u as Ue,v as B,w as Io,x as ko,y as Ao,z as To}from"./chunk-WHDOMUEP.js";import{S as Eo,Xa as N,Ya as L,b as xo,c as bo,e as kt,f as yo,ga as ve,ia as Tn,l as Qe,p as Mo,q as Po,qa as at,s as Oo,sa as fe,t as Do,v as wo,y as F,z as Ci}from"./chunk-3NGBVLFS.js";import{$ as We,$b as ut,Ab as b,Bb as y,D as hi,Db as ho,Eb as Y,Fb as X,Gb as v,Hb as r,Ib as a,Ic as W,Jb as D,Nb as In,Ob as kn,Qb as z,R as co,Ua as fo,Ub as P,W as vi,Wb as C,X as Xe,Xa as l,Xb as vo,Y as po,Yb as _o,_b as Dt,a as Sn,ac as ht,b as En,eb as h,ec as it,fa as I,fc as jt,ga as k,gc as Ve,h as ui,ic as s,jc as f,kb as E,kc as T,lb as go,lc as de,na as Ee,nc as wt,oc as St,pc as Et,qb as gt,rc as _i,sc as An,tc as Co,va as mo,vc as d,wc as m,xa as Ot,xc as It,zb as uo}from"./chunk-USQTHPA4.js";var vl=t=>({exact:t}),_l=(t,e)=>e.route;function Cl(t,e){if(t&1&&(r(0,"a",10)(1,"mat-icon"),s(2),a(),r(3,"span",13),s(4),d(5,"translate"),a(),r(6,"span",14),s(7),d(8,"translate"),a()()),t&2){let i=e.$implicit;v("routerLink",i.route)("routerLinkActiveOptions",Co(9,vl,i.exact??!1)),l(2),f(i.icon),l(2),f(m(5,5,i.label)),l(3),f(m(8,7,i.label))}}function xl(t,e){if(t&1){let i=z();r(0,"div",37),P("click",function(){I(i);let o=C();return k(o.toggleSidenav())}),a()}}function bl(t,e){if(t&1){let i=z();r(0,"button",38),P("click",function(){I(i);let o=C();return k(o.toggleSidenav())}),r(1,"mat-icon"),s(2,"menu"),a()()}}var Ii=class t{constructor(e,i,n){this.authService=e;this.translationService=i;this.breakpointObserver=n;this.breakpointObserver.observe([Tn.Handset,Tn.TabletPortrait]).subscribe(o=>{this.isMobile=o.matches,this.isMobile&&(this.isCollapsed=!0)})}hasUserPermission=!0;isMobile=!1;isCollapsed=!1;navItems=[{label:"admin.dashboard",icon:"dashboard",route:"/admin",exact:!0},{label:"admin.users.title",icon:"people",route:"/admin/users"},{label:"admin.roles.title",icon:"admin_panel_settings",route:"/admin/roles"},{label:"admin.employees.title",icon:"badge",route:"/admin/employees"},{label:"admin.positions.title",icon:"work_outline",route:"/admin/positions"},{label:"admin.departments.title",icon:"business",route:"/admin/departments"},{label:"admin.eventsAdmin.title",icon:"event",route:"/admin/events"}];ngOnInit(){this.hasUserPermission=this.authService.hasPermission(F.USERS_READ),this.hasUserPermission||(this.navItems=this.navItems.filter(o=>o.route!=="/admin/users")),this.authService.hasPermission(F.ROLES_READ)||(this.navItems=this.navItems.filter(o=>o.route!=="/admin/roles")),this.authService.hasPermission(F.POSITIONS_READ)||(this.navItems=this.navItems.filter(o=>o.route!=="/admin/positions")),this.authService.hasPermission(F.DEPARTMENTS_READ)||(this.navItems=this.navItems.filter(o=>o.route!=="/admin/departments"))}toggleSidenav(){this.isCollapsed=!this.isCollapsed}logout(){this.authService.logout()}static \u0275fac=function(i){return new(i||t)(h(Ci),h(N),h(Eo))};static \u0275cmp=E({type:t,selectors:[["app-admin-layout"]],standalone:!1,decls:71,vars:29,consts:[["userMenu","matMenu"],[1,"admin-wrapper"],[1,"admin-sidebar"],[1,"toggle-btn",3,"click"],[1,"hamburger"],[1,"sidenav-header"],["routerLink","/admin",1,"brand"],["src","assets/images/logo.png","alt","Logo",1,"brand-logo"],[1,"brand-text"],[1,"sidenav-nav"],["routerLinkActive","active",1,"nav-item",3,"routerLink","routerLinkActiveOptions"],[1,"sidenav-footer"],[1,"logout-btn",3,"click"],[1,"nav-text"],[1,"nav-tooltip"],[1,"mobile-overlay"],[1,"admin-main"],[1,"admin-toolbar"],["mat-icon-button","",1,"mobile-menu-btn"],[1,"toolbar-spacer"],[1,"user-menu-trigger",3,"matMenuTriggerFor"],[1,"user-avatar"],[1,"user-name"],[1,"dropdown-icon"],["xPosition","after",1,"user-dropdown-menu"],[1,"menu-header",3,"click"],[1,"menu-avatar"],[1,"menu-user-info"],[1,"menu-user-name"],[1,"menu-user-role"],["mat-menu-item","",3,"click"],[1,"menu-icon","language"],["mat-menu-item","","routerLink","/"],[1,"menu-icon","home"],["mat-menu-item","",1,"logout-item",3,"click"],[1,"menu-icon","logout"],[1,"page-content"],[1,"mobile-overlay",3,"click"],["mat-icon-button","",1,"mobile-menu-btn",3,"click"]],template:function(i,n){if(i&1){let o=z();r(0,"div",1)(1,"aside",2)(2,"button",3),P("click",function(){return I(o),k(n.toggleSidenav())}),r(3,"div",4),D(4,"span")(5,"span")(6,"span"),a()(),r(7,"div",5)(8,"a",6),D(9,"img",7),r(10,"span",8),s(11),d(12,"translate"),a()()(),r(13,"nav",9),Y(14,Cl,9,11,"a",10,_l),a(),r(16,"div",11)(17,"button",12),P("click",function(){return I(o),k(n.logout())}),r(18,"mat-icon"),s(19,"logout"),a(),r(20,"span",13),s(21),d(22,"translate"),a(),r(23,"span",14),s(24),d(25,"translate"),a()()()(),b(26,xl,1,0,"div",15),r(27,"main",16)(28,"mat-toolbar",17),b(29,bl,3,0,"button",18),D(30,"span",19),r(31,"button",20)(32,"div",21)(33,"mat-icon"),s(34,"person"),a()(),r(35,"span",22),s(36),a(),r(37,"mat-icon",23),s(38,"expand_more"),a()(),r(39,"mat-menu",24,0)(41,"div",25),P("click",function(p){return I(o),k(p.stopPropagation())}),r(42,"div",26)(43,"mat-icon"),s(44,"person"),a()(),r(45,"div",27)(46,"span",28),s(47),a(),r(48,"span",29),s(49,"Administrator"),a()()(),D(50,"mat-divider"),r(51,"button",30),P("click",function(){return I(o),k(n.translationService.toggleLanguage())}),r(52,"mat-icon",31),s(53,"language"),a(),r(54,"span"),s(55),a()(),r(56,"button",32)(57,"mat-icon",33),s(58,"home"),a(),r(59,"span"),s(60),d(61,"translate"),a()(),D(62,"mat-divider"),r(63,"button",34),P("click",function(){return I(o),k(n.logout())}),r(64,"mat-icon",35),s(65,"logout"),a(),r(66,"span"),s(67),d(68,"translate"),a()()()(),r(69,"div",36),D(70,"router-outlet"),a()()()}if(i&2){let o,c,p=it(40);Ve("collapsed",n.isCollapsed)("mobile",n.isMobile),l(),Ve("collapsed",n.isCollapsed&&!n.isMobile),l(),Ve("collapsed",n.isCollapsed),l(9),f(m(12,19,"header.logo")),l(3),X(n.navItems),l(7),f(m(22,21,"admin.logout")),l(3),f(m(25,23,"admin.logout")),l(2),y(n.isMobile&&!n.isCollapsed?26:-1),l(3),y(n.isMobile?29:-1),l(2),v("matMenuTriggerFor",p),l(5),f((o=n.authService.user())==null?null:o.name),l(11),f((c=n.authService.user())==null?null:c.name),l(8),f(n.translationService.getOtherLanguageName()),l(5),f(m(61,25,"admin.backToSite")),l(7),f(m(68,27,"admin.logout"))}},dependencies:[Po,Oo,Do,at,B,Go,Yo,Wo,Xo,Qo,A],styles:['.admin-wrapper[_ngcontent-%COMP%]{display:flex;min-height:100vh;background-color:#f4f6f9}.admin-sidebar[_ngcontent-%COMP%]{width:260px;background:linear-gradient(180deg,#3d405b,#2d2f42);display:flex;flex-direction:column;position:fixed;height:100vh;z-index:1000;transition:width .3s ease}.admin-sidebar.collapsed[_ngcontent-%COMP%]{width:72px}.admin-sidebar.collapsed[_ngcontent-%COMP%]   .brand-text[_ngcontent-%COMP%], .admin-sidebar.collapsed[_ngcontent-%COMP%]   .nav-text[_ngcontent-%COMP%]{opacity:0;width:0;overflow:hidden}.admin-sidebar.collapsed[_ngcontent-%COMP%]   .sidenav-header[_ngcontent-%COMP%]   .brand[_ngcontent-%COMP%]{justify-content:center}.admin-sidebar.collapsed[_ngcontent-%COMP%]   .nav-item[_ngcontent-%COMP%]{justify-content:center;padding:.875rem;border-radius:12px;margin:.25rem .75rem}.admin-sidebar.collapsed[_ngcontent-%COMP%]   .nav-item[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{margin:0}.admin-sidebar.collapsed[_ngcontent-%COMP%]   .nav-item[_ngcontent-%COMP%]:hover   .nav-tooltip[_ngcontent-%COMP%]{opacity:1;visibility:visible;transform:translateY(-50%) translate(0)}.admin-sidebar.collapsed[_ngcontent-%COMP%]   .logout-btn[_ngcontent-%COMP%]{position:relative;justify-content:center;padding:.75rem}.admin-sidebar.collapsed[_ngcontent-%COMP%]   .logout-btn[_ngcontent-%COMP%]   .nav-text[_ngcontent-%COMP%]{display:none}.admin-sidebar.collapsed[_ngcontent-%COMP%]   .logout-btn[_ngcontent-%COMP%]:hover   .nav-tooltip[_ngcontent-%COMP%]{opacity:1;visibility:visible;transform:translateY(-50%) translate(0)}.toggle-btn[_ngcontent-%COMP%]{position:absolute;top:1rem;right:-16px;width:32px;height:32px;border-radius:50%;background:#81b29a;border:3px solid #f4f6f9;cursor:pointer;display:flex;align-items:center;justify-content:center;z-index:10;transition:all .3s ease}.toggle-btn[_ngcontent-%COMP%]:hover{background:#619f81;transform:scale(1.1)}.toggle-btn[_ngcontent-%COMP%]   .hamburger[_ngcontent-%COMP%]{width:14px;height:10px;display:flex;flex-direction:column;justify-content:space-between}.toggle-btn[_ngcontent-%COMP%]   .hamburger[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{display:block;width:100%;height:2px;background-color:#fff;border-radius:2px;transition:all .3s cubic-bezier(.68,-.55,.265,1.55);transform-origin:center}.toggle-btn[_ngcontent-%COMP%]   .hamburger[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:nth-child(1){width:100%}.toggle-btn[_ngcontent-%COMP%]   .hamburger[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:nth-child(2){width:60%}.toggle-btn[_ngcontent-%COMP%]   .hamburger[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:nth-child(3){width:80%}.toggle-btn[_ngcontent-%COMP%]:hover   .hamburger[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{width:100%}.toggle-btn[_ngcontent-%COMP%]:not(.collapsed)   .hamburger[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:nth-child(1){transform:translateY(4px) rotate(45deg);width:100%}.toggle-btn[_ngcontent-%COMP%]:not(.collapsed)   .hamburger[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:nth-child(2){opacity:0;transform:scaleX(0)}.toggle-btn[_ngcontent-%COMP%]:not(.collapsed)   .hamburger[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:nth-child(3){transform:translateY(-4px) rotate(-45deg);width:100%}.sidenav-header[_ngcontent-%COMP%]{padding:1.25rem 1rem;border-bottom:1px solid rgba(255,255,255,.1);margin-top:.5rem}.sidenav-header[_ngcontent-%COMP%]   .brand[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.75rem;text-decoration:none;color:#fff;transition:all .3s ease}.sidenav-header[_ngcontent-%COMP%]   .brand[_ngcontent-%COMP%]   .brand-logo[_ngcontent-%COMP%]{width:40px;height:40px;min-width:40px;object-fit:contain}.sidenav-header[_ngcontent-%COMP%]   .brand[_ngcontent-%COMP%]   .brand-text[_ngcontent-%COMP%]{font-size:1.1rem;font-weight:600;letter-spacing:.5px;white-space:nowrap;transition:opacity .3s ease,width .3s ease}.nav-tooltip[_ngcontent-%COMP%]{position:absolute;left:calc(100% + 12px);top:50%;transform:translateY(-50%) translate(-8px);background:#3d405b;color:#fff;padding:.5rem 1rem;border-radius:8px;font-size:.875rem;font-weight:500;white-space:nowrap;opacity:0;visibility:hidden;transition:all .2s cubic-bezier(.68,-.55,.265,1.55);pointer-events:none;box-shadow:0 4px 12px #00000026;z-index:1001}.nav-tooltip[_ngcontent-%COMP%]:before{content:"";position:absolute;left:-6px;top:50%;transform:translateY(-50%);border:6px solid transparent;border-right-color:#3d405b;border-left:none}.sidenav-nav[_ngcontent-%COMP%]{flex:1;padding:1rem 0}.sidenav-nav[_ngcontent-%COMP%]   .nav-item[_ngcontent-%COMP%]{position:relative;display:flex;align-items:center;gap:.75rem;padding:.875rem 1.25rem;margin:.25rem 1rem .25rem 0;border-radius:0 25px 25px 0;color:#ffffffb3;text-decoration:none;transition:all .3s ease}.sidenav-nav[_ngcontent-%COMP%]   .nav-item[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:22px;width:22px;height:22px;min-width:22px;transition:all .3s ease}.sidenav-nav[_ngcontent-%COMP%]   .nav-item[_ngcontent-%COMP%]   .nav-text[_ngcontent-%COMP%]{white-space:nowrap;transition:opacity .3s ease,width .3s ease}.sidenav-nav[_ngcontent-%COMP%]   .nav-item[_ngcontent-%COMP%]:hover{background-color:#ffffff1a;color:#fff}.sidenav-nav[_ngcontent-%COMP%]   .nav-item.active[_ngcontent-%COMP%]{background-color:#81b29a;color:#fff}.sidenav-nav[_ngcontent-%COMP%]   .nav-item.active[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{color:#fff}.sidenav-footer[_ngcontent-%COMP%]{padding:1rem;border-top:1px solid rgba(255,255,255,.1)}.sidenav-footer[_ngcontent-%COMP%]   .logout-btn[_ngcontent-%COMP%]{position:relative;width:100%;display:flex;align-items:center;justify-content:center;gap:.5rem;padding:.75rem 1rem;background:transparent;border:1px solid rgba(255,255,255,.3);color:#fff;border-radius:8px;cursor:pointer;transition:all .3s ease}.sidenav-footer[_ngcontent-%COMP%]   .logout-btn[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:20px;width:20px;height:20px;min-width:20px}.sidenav-footer[_ngcontent-%COMP%]   .logout-btn[_ngcontent-%COMP%]   .nav-text[_ngcontent-%COMP%]{white-space:nowrap;transition:opacity .3s ease}.sidenav-footer[_ngcontent-%COMP%]   .logout-btn[_ngcontent-%COMP%]   .nav-tooltip[_ngcontent-%COMP%]{left:calc(100% + 20px)}.sidenav-footer[_ngcontent-%COMP%]   .logout-btn[_ngcontent-%COMP%]:hover{background-color:#ffffff1a;border-color:#ffffff80}.mobile-overlay[_ngcontent-%COMP%]{position:fixed;inset:0;background:#00000080;z-index:999}.admin-main[_ngcontent-%COMP%]{flex:1;margin-left:260px;display:flex;flex-direction:column;min-height:100vh;transition:margin-left .3s ease}.admin-wrapper.collapsed[_ngcontent-%COMP%]   .admin-main[_ngcontent-%COMP%]{margin-left:72px}.admin-toolbar[_ngcontent-%COMP%]{background-color:#fff;color:#3d405b;box-shadow:0 2px 4px #0000000d;position:sticky;top:0;z-index:100}.admin-toolbar[_ngcontent-%COMP%]   .mobile-menu-btn[_ngcontent-%COMP%]{color:#3d405b}.admin-toolbar[_ngcontent-%COMP%]   .toolbar-spacer[_ngcontent-%COMP%]{flex:1}.admin-toolbar[_ngcontent-%COMP%]   .user-menu-trigger[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.75rem;padding:.5rem 1rem;background:transparent;border:none;border-radius:50px;cursor:pointer;transition:all .2s ease}.admin-toolbar[_ngcontent-%COMP%]   .user-menu-trigger[_ngcontent-%COMP%]:hover{background:#81b29a1a}.admin-toolbar[_ngcontent-%COMP%]   .user-menu-trigger[_ngcontent-%COMP%]   .user-avatar[_ngcontent-%COMP%]{width:36px;height:36px;border-radius:50%;background:linear-gradient(135deg,#81b29a,#578f74);display:flex;align-items:center;justify-content:center}.admin-toolbar[_ngcontent-%COMP%]   .user-menu-trigger[_ngcontent-%COMP%]   .user-avatar[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:20px;width:20px;height:20px;color:#fff}.admin-toolbar[_ngcontent-%COMP%]   .user-menu-trigger[_ngcontent-%COMP%]   .user-name[_ngcontent-%COMP%]{font-weight:500;font-size:.9375rem;color:#3d405b}.admin-toolbar[_ngcontent-%COMP%]   .user-menu-trigger[_ngcontent-%COMP%]   .dropdown-icon[_ngcontent-%COMP%]{font-size:20px;width:20px;height:20px;color:#6c757d;transition:transform .2s ease}.admin-toolbar[_ngcontent-%COMP%]   .user-menu-trigger[aria-expanded=true][_ngcontent-%COMP%]   .dropdown-icon[_ngcontent-%COMP%]{transform:rotate(180deg)}  .user-dropdown-menu{margin-top:.5rem;border-radius:12px!important;box-shadow:0 10px 40px #00000026!important;min-width:240px!important;overflow:visible!important;background:#fff!important}  .user-dropdown-menu .mat-mdc-menu-content{padding:0!important;background:#fff!important}  .user-dropdown-menu .menu-header{display:flex;align-items:center;gap:.75rem;padding:1rem 1.25rem;background:linear-gradient(135deg,#81b29a1a,#81b29a0d)}  .user-dropdown-menu .menu-header .menu-avatar{width:44px;height:44px;border-radius:50%;background:linear-gradient(135deg,#81b29a,#578f74);display:flex;align-items:center;justify-content:center}  .user-dropdown-menu .menu-header .menu-avatar mat-icon{font-size:24px;width:24px;height:24px;color:#fff}  .user-dropdown-menu .menu-header .menu-user-info{display:flex;flex-direction:column;gap:.125rem}  .user-dropdown-menu .menu-header .menu-user-info .menu-user-name{font-weight:600;font-size:.9375rem;color:#3d405b}  .user-dropdown-menu .menu-header .menu-user-info .menu-user-role{font-size:.75rem;color:#6c757d}  .user-dropdown-menu .mat-mdc-menu-item{padding:.75rem 1.25rem;margin:.25rem .5rem;border-radius:8px;transition:all .2s ease}  .user-dropdown-menu .mat-mdc-menu-item .menu-icon{margin-right:.75rem}  .user-dropdown-menu .mat-mdc-menu-item .menu-icon.language{color:#6366f1}  .user-dropdown-menu .mat-mdc-menu-item .menu-icon.home{color:#81b29a}  .user-dropdown-menu .mat-mdc-menu-item .menu-icon.logout{color:#dc3545}  .user-dropdown-menu .mat-mdc-menu-item span{font-weight:500;color:#3d405b}  .user-dropdown-menu .mat-mdc-menu-item:hover{background:#f8f9fa}  .user-dropdown-menu .mat-mdc-menu-item.logout-item:hover{background:#dc354514}  .user-dropdown-menu mat-divider{margin:.5rem 0!important}.page-content[_ngcontent-%COMP%]{flex:1;padding:2rem}.admin-wrapper.mobile[_ngcontent-%COMP%]   .admin-sidebar[_ngcontent-%COMP%]{transform:translate(-100%);width:260px}.admin-wrapper.mobile[_ngcontent-%COMP%]   .admin-sidebar[_ngcontent-%COMP%]:not(.collapsed){transform:translate(0)}.admin-wrapper.mobile[_ngcontent-%COMP%]   .admin-sidebar[_ngcontent-%COMP%]   .toggle-btn[_ngcontent-%COMP%]{display:none}.admin-wrapper.mobile[_ngcontent-%COMP%]   .admin-main[_ngcontent-%COMP%]{margin-left:0}.admin-wrapper.mobile.collapsed[_ngcontent-%COMP%]   .admin-sidebar[_ngcontent-%COMP%]{transform:translate(-100%)}@media(max-width:599px){.page-content[_ngcontent-%COMP%]{padding:1rem}.user-name[_ngcontent-%COMP%]{display:none}}[dir=rtl][_nghost-%COMP%]   .admin-sidebar[_ngcontent-%COMP%], [dir=rtl]   [_nghost-%COMP%]   .admin-sidebar[_ngcontent-%COMP%]{right:0;left:auto}[dir=rtl][_nghost-%COMP%]   .toggle-btn[_ngcontent-%COMP%], [dir=rtl]   [_nghost-%COMP%]   .toggle-btn[_ngcontent-%COMP%]{right:auto;left:-16px}[dir=rtl][_nghost-%COMP%]   .nav-tooltip[_ngcontent-%COMP%], [dir=rtl]   [_nghost-%COMP%]   .nav-tooltip[_ngcontent-%COMP%]{left:auto;right:calc(100% + 12px);transform:translateY(-50%) translate(8px)}[dir=rtl][_nghost-%COMP%]   .nav-tooltip[_ngcontent-%COMP%]:before, [dir=rtl]   [_nghost-%COMP%]   .nav-tooltip[_ngcontent-%COMP%]:before{left:auto;right:-6px;border-right-color:transparent;border-left-color:#3d405b;border-right:none;border-left:6px solid #3D405B}[dir=rtl][_nghost-%COMP%]   .sidenav-nav[_ngcontent-%COMP%]   .nav-item[_ngcontent-%COMP%], [dir=rtl]   [_nghost-%COMP%]   .sidenav-nav[_ngcontent-%COMP%]   .nav-item[_ngcontent-%COMP%]{margin:.25rem 0 .25rem 1rem;border-radius:25px 0 0 25px}[dir=rtl][_nghost-%COMP%]   .sidenav-footer[_ngcontent-%COMP%]   .logout-btn[_ngcontent-%COMP%]   .nav-tooltip[_ngcontent-%COMP%], [dir=rtl]   [_nghost-%COMP%]   .sidenav-footer[_ngcontent-%COMP%]   .logout-btn[_ngcontent-%COMP%]   .nav-tooltip[_ngcontent-%COMP%]{right:calc(100% + 20px);left:auto}[dir=rtl][_nghost-%COMP%]   .admin-main[_ngcontent-%COMP%], [dir=rtl]   [_nghost-%COMP%]   .admin-main[_ngcontent-%COMP%]{margin-left:0;margin-right:260px}[dir=rtl][_nghost-%COMP%]   .admin-wrapper.collapsed[_ngcontent-%COMP%]   .admin-main[_ngcontent-%COMP%], [dir=rtl]   [_nghost-%COMP%]   .admin-wrapper.collapsed[_ngcontent-%COMP%]   .admin-main[_ngcontent-%COMP%]{margin-left:0;margin-right:72px}[dir=rtl][_nghost-%COMP%]   .admin-wrapper.mobile[_ngcontent-%COMP%]   .admin-sidebar[_ngcontent-%COMP%], [dir=rtl]   [_nghost-%COMP%]   .admin-wrapper.mobile[_ngcontent-%COMP%]   .admin-sidebar[_ngcontent-%COMP%]{transform:translate(100%)}[dir=rtl][_nghost-%COMP%]   .admin-wrapper.mobile[_ngcontent-%COMP%]   .admin-sidebar[_ngcontent-%COMP%]:not(.collapsed), [dir=rtl]   [_nghost-%COMP%]   .admin-wrapper.mobile[_ngcontent-%COMP%]   .admin-sidebar[_ngcontent-%COMP%]:not(.collapsed){transform:translate(0)}[dir=rtl][_nghost-%COMP%]   .admin-wrapper.mobile[_ngcontent-%COMP%]   .admin-main[_ngcontent-%COMP%], [dir=rtl]   [_nghost-%COMP%]   .admin-wrapper.mobile[_ngcontent-%COMP%]   .admin-main[_ngcontent-%COMP%]{margin-right:0}[dir=rtl][_nghost-%COMP%]   .admin-wrapper.mobile.collapsed[_ngcontent-%COMP%]   .admin-sidebar[_ngcontent-%COMP%], [dir=rtl]   [_nghost-%COMP%]   .admin-wrapper.mobile.collapsed[_ngcontent-%COMP%]   .admin-sidebar[_ngcontent-%COMP%]{transform:translate(100%)}']})};var yl={value:()=>{}};function ca(){for(var t=0,e=arguments.length,i={},n;t<e;++t){if(!(n=arguments[t]+"")||n in i||/[\s.]/.test(n))throw new Error("illegal type: "+n);i[n]=[]}return new ki(i)}function ki(t){this._=t}function Ml(t,e){return t.trim().split(/^|\s+/).map(function(i){var n="",o=i.indexOf(".");if(o>=0&&(n=i.slice(o+1),i=i.slice(0,o)),i&&!e.hasOwnProperty(i))throw new Error("unknown type: "+i);return{type:i,name:n}})}ki.prototype=ca.prototype={constructor:ki,on:function(t,e){var i=this._,n=Ml(t+"",i),o,c=-1,p=n.length;if(arguments.length<2){for(;++c<p;)if((o=(t=n[c]).type)&&(o=Pl(i[o],t.name)))return o;return}if(e!=null&&typeof e!="function")throw new Error("invalid callback: "+e);for(;++c<p;)if(o=(t=n[c]).type)i[o]=sa(i[o],t.name,e);else if(e==null)for(o in i)i[o]=sa(i[o],t.name,null);return this},copy:function(){var t={},e=this._;for(var i in e)t[i]=e[i].slice();return new ki(t)},call:function(t,e){if((o=arguments.length-2)>0)for(var i=new Array(o),n=0,o,c;n<o;++n)i[n]=arguments[n+2];if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(c=this._[t],n=0,o=c.length;n<o;++n)c[n].value.apply(e,i)},apply:function(t,e,i){if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(var n=this._[t],o=0,c=n.length;o<c;++o)n[o].value.apply(e,i)}};function Pl(t,e){for(var i=0,n=t.length,o;i<n;++i)if((o=t[i]).name===e)return o.value}function sa(t,e,i){for(var n=0,o=t.length;n<o;++n)if(t[n].name===e){t[n]=yl,t=t.slice(0,n).concat(t.slice(n+1));break}return i!=null&&t.push({name:e,value:i}),t}var Bn=ca;var Ai="http://www.w3.org/1999/xhtml",Nn={svg:"http://www.w3.org/2000/svg",xhtml:Ai,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function Ze(t){var e=t+="",i=e.indexOf(":");return i>=0&&(e=t.slice(0,i))!=="xmlns"&&(t=t.slice(i+1)),Nn.hasOwnProperty(e)?{space:Nn[e],local:t}:t}function Ol(t){return function(){var e=this.ownerDocument,i=this.namespaceURI;return i===Ai&&e.documentElement.namespaceURI===Ai?e.createElement(t):e.createElementNS(i,t)}}function Dl(t){return function(){return this.ownerDocument.createElementNS(t.space,t.local)}}function Ti(t){var e=Ze(t);return(e.local?Dl:Ol)(e)}function wl(){}function vt(t){return t==null?wl:function(){return this.querySelector(t)}}function pa(t){typeof t!="function"&&(t=vt(t));for(var e=this._groups,i=e.length,n=new Array(i),o=0;o<i;++o)for(var c=e[o],p=c.length,g=n[o]=new Array(p),_,u,x=0;x<p;++x)(_=c[x])&&(u=t.call(_,_.__data__,x,c))&&("__data__"in _&&(u.__data__=_.__data__),g[x]=u);return new ae(n,this._parents)}function Rn(t){return t==null?[]:Array.isArray(t)?t:Array.from(t)}function Sl(){return[]}function qt(t){return t==null?Sl:function(){return this.querySelectorAll(t)}}function El(t){return function(){return Rn(t.apply(this,arguments))}}function da(t){typeof t=="function"?t=El(t):t=qt(t);for(var e=this._groups,i=e.length,n=[],o=[],c=0;c<i;++c)for(var p=e[c],g=p.length,_,u=0;u<g;++u)(_=p[u])&&(n.push(t.call(_,_.__data__,u,p)),o.push(_));return new ae(n,o)}function Ht(t){return function(){return this.matches(t)}}function Bi(t){return function(e){return e.matches(t)}}var Il=Array.prototype.find;function kl(t){return function(){return Il.call(this.children,t)}}function Al(){return this.firstElementChild}function ma(t){return this.select(t==null?Al:kl(typeof t=="function"?t:Bi(t)))}var Tl=Array.prototype.filter;function Bl(){return Array.from(this.children)}function Nl(t){return function(){return Tl.call(this.children,t)}}function fa(t){return this.selectAll(t==null?Bl:Nl(typeof t=="function"?t:Bi(t)))}function ga(t){typeof t!="function"&&(t=Ht(t));for(var e=this._groups,i=e.length,n=new Array(i),o=0;o<i;++o)for(var c=e[o],p=c.length,g=n[o]=[],_,u=0;u<p;++u)(_=c[u])&&t.call(_,_.__data__,u,c)&&g.push(_);return new ae(n,this._parents)}function Ni(t){return new Array(t.length)}function ua(){return new ae(this._enter||this._groups.map(Ni),this._parents)}function Yt(t,e){this.ownerDocument=t.ownerDocument,this.namespaceURI=t.namespaceURI,this._next=null,this._parent=t,this.__data__=e}Yt.prototype={constructor:Yt,appendChild:function(t){return this._parent.insertBefore(t,this._next)},insertBefore:function(t,e){return this._parent.insertBefore(t,e)},querySelector:function(t){return this._parent.querySelector(t)},querySelectorAll:function(t){return this._parent.querySelectorAll(t)}};function ha(t){return function(){return t}}function Rl(t,e,i,n,o,c){for(var p=0,g,_=e.length,u=c.length;p<u;++p)(g=e[p])?(g.__data__=c[p],n[p]=g):i[p]=new Yt(t,c[p]);for(;p<_;++p)(g=e[p])&&(o[p]=g)}function Fl(t,e,i,n,o,c,p){var g,_,u=new Map,x=e.length,w=c.length,O=new Array(x),S;for(g=0;g<x;++g)(_=e[g])&&(O[g]=S=p.call(_,_.__data__,g,e)+"",u.has(S)?o[g]=_:u.set(S,_));for(g=0;g<w;++g)S=p.call(t,c[g],g,c)+"",(_=u.get(S))?(n[g]=_,_.__data__=c[g],u.delete(S)):i[g]=new Yt(t,c[g]);for(g=0;g<x;++g)(_=e[g])&&u.get(O[g])===_&&(o[g]=_)}function Vl(t){return t.__data__}function va(t,e){if(!arguments.length)return Array.from(this,Vl);var i=e?Fl:Rl,n=this._parents,o=this._groups;typeof t!="function"&&(t=ha(t));for(var c=o.length,p=new Array(c),g=new Array(c),_=new Array(c),u=0;u<c;++u){var x=n[u],w=o[u],O=w.length,S=zl(t.call(x,x&&x.__data__,u,n)),V=S.length,q=g[u]=new Array(V),ge=p[u]=new Array(V),He=_[u]=new Array(O);i(x,w,q,ge,He,S,e);for(var J=0,Ie=0,Ne,$t;J<V;++J)if(Ne=q[J]){for(J>=Ie&&(Ie=J+1);!($t=ge[Ie])&&++Ie<V;);Ne._next=$t||null}}return p=new ae(p,n),p._enter=g,p._exit=_,p}function zl(t){return typeof t=="object"&&"length"in t?t:Array.from(t)}function _a(){return new ae(this._exit||this._groups.map(Ni),this._parents)}function Ca(t,e,i){var n=this.enter(),o=this,c=this.exit();return typeof t=="function"?(n=t(n),n&&(n=n.selection())):n=n.append(t+""),e!=null&&(o=e(o),o&&(o=o.selection())),i==null?c.remove():i(c),n&&o?n.merge(o).order():o}function xa(t){for(var e=t.selection?t.selection():t,i=this._groups,n=e._groups,o=i.length,c=n.length,p=Math.min(o,c),g=new Array(o),_=0;_<p;++_)for(var u=i[_],x=n[_],w=u.length,O=g[_]=new Array(w),S,V=0;V<w;++V)(S=u[V]||x[V])&&(O[V]=S);for(;_<o;++_)g[_]=i[_];return new ae(g,this._parents)}function ba(){for(var t=this._groups,e=-1,i=t.length;++e<i;)for(var n=t[e],o=n.length-1,c=n[o],p;--o>=0;)(p=n[o])&&(c&&p.compareDocumentPosition(c)^4&&c.parentNode.insertBefore(p,c),c=p);return this}function ya(t){t||(t=Ll);function e(w,O){return w&&O?t(w.__data__,O.__data__):!w-!O}for(var i=this._groups,n=i.length,o=new Array(n),c=0;c<n;++c){for(var p=i[c],g=p.length,_=o[c]=new Array(g),u,x=0;x<g;++x)(u=p[x])&&(_[x]=u);_.sort(e)}return new ae(o,this._parents).order()}function Ll(t,e){return t<e?-1:t>e?1:t>=e?0:NaN}function Ma(){var t=arguments[0];return arguments[0]=this,t.apply(null,arguments),this}function Pa(){return Array.from(this)}function Oa(){for(var t=this._groups,e=0,i=t.length;e<i;++e)for(var n=t[e],o=0,c=n.length;o<c;++o){var p=n[o];if(p)return p}return null}function Da(){let t=0;for(let e of this)++t;return t}function wa(){return!this.node()}function Sa(t){for(var e=this._groups,i=0,n=e.length;i<n;++i)for(var o=e[i],c=0,p=o.length,g;c<p;++c)(g=o[c])&&t.call(g,g.__data__,c,o);return this}function Ul(t){return function(){this.removeAttribute(t)}}function Gl(t){return function(){this.removeAttributeNS(t.space,t.local)}}function $l(t,e){return function(){this.setAttribute(t,e)}}function jl(t,e){return function(){this.setAttributeNS(t.space,t.local,e)}}function ql(t,e){return function(){var i=e.apply(this,arguments);i==null?this.removeAttribute(t):this.setAttribute(t,i)}}function Hl(t,e){return function(){var i=e.apply(this,arguments);i==null?this.removeAttributeNS(t.space,t.local):this.setAttributeNS(t.space,t.local,i)}}function Ea(t,e){var i=Ze(t);if(arguments.length<2){var n=this.node();return i.local?n.getAttributeNS(i.space,i.local):n.getAttribute(i)}return this.each((e==null?i.local?Gl:Ul:typeof e=="function"?i.local?Hl:ql:i.local?jl:$l)(i,e))}function Ri(t){return t.ownerDocument&&t.ownerDocument.defaultView||t.document&&t||t.defaultView}function Yl(t){return function(){this.style.removeProperty(t)}}function Xl(t,e,i){return function(){this.style.setProperty(t,e,i)}}function Wl(t,e,i){return function(){var n=e.apply(this,arguments);n==null?this.style.removeProperty(t):this.style.setProperty(t,n,i)}}function Ia(t,e,i){return arguments.length>1?this.each((e==null?Yl:typeof e=="function"?Wl:Xl)(t,e,i??"")):lt(this.node(),t)}function lt(t,e){return t.style.getPropertyValue(e)||Ri(t).getComputedStyle(t,null).getPropertyValue(e)}function Ql(t){return function(){delete this[t]}}function Kl(t,e){return function(){this[t]=e}}function Zl(t,e){return function(){var i=e.apply(this,arguments);i==null?delete this[t]:this[t]=i}}function ka(t,e){return arguments.length>1?this.each((e==null?Ql:typeof e=="function"?Zl:Kl)(t,e)):this.node()[t]}function Aa(t){return t.trim().split(/^|\s+/)}function Fn(t){return t.classList||new Ta(t)}function Ta(t){this._node=t,this._names=Aa(t.getAttribute("class")||"")}Ta.prototype={add:function(t){var e=this._names.indexOf(t);e<0&&(this._names.push(t),this._node.setAttribute("class",this._names.join(" ")))},remove:function(t){var e=this._names.indexOf(t);e>=0&&(this._names.splice(e,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(t){return this._names.indexOf(t)>=0}};function Ba(t,e){for(var i=Fn(t),n=-1,o=e.length;++n<o;)i.add(e[n])}function Na(t,e){for(var i=Fn(t),n=-1,o=e.length;++n<o;)i.remove(e[n])}function Jl(t){return function(){Ba(this,t)}}function es(t){return function(){Na(this,t)}}function ts(t,e){return function(){(e.apply(this,arguments)?Ba:Na)(this,t)}}function Ra(t,e){var i=Aa(t+"");if(arguments.length<2){for(var n=Fn(this.node()),o=-1,c=i.length;++o<c;)if(!n.contains(i[o]))return!1;return!0}return this.each((typeof e=="function"?ts:e?Jl:es)(i,e))}function is(){this.textContent=""}function ns(t){return function(){this.textContent=t}}function os(t){return function(){var e=t.apply(this,arguments);this.textContent=e??""}}function Fa(t){return arguments.length?this.each(t==null?is:(typeof t=="function"?os:ns)(t)):this.node().textContent}function as(){this.innerHTML=""}function rs(t){return function(){this.innerHTML=t}}function ls(t){return function(){var e=t.apply(this,arguments);this.innerHTML=e??""}}function Va(t){return arguments.length?this.each(t==null?as:(typeof t=="function"?ls:rs)(t)):this.node().innerHTML}function ss(){this.nextSibling&&this.parentNode.appendChild(this)}function za(){return this.each(ss)}function cs(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function La(){return this.each(cs)}function Ua(t){var e=typeof t=="function"?t:Ti(t);return this.select(function(){return this.appendChild(e.apply(this,arguments))})}function ps(){return null}function Ga(t,e){var i=typeof t=="function"?t:Ti(t),n=e==null?ps:typeof e=="function"?e:vt(e);return this.select(function(){return this.insertBefore(i.apply(this,arguments),n.apply(this,arguments)||null)})}function ds(){var t=this.parentNode;t&&t.removeChild(this)}function $a(){return this.each(ds)}function ms(){var t=this.cloneNode(!1),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function fs(){var t=this.cloneNode(!0),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function ja(t){return this.select(t?fs:ms)}function qa(t){return arguments.length?this.property("__data__",t):this.node().__data__}function gs(t){return function(e){t.call(this,e,this.__data__)}}function us(t){return t.trim().split(/^|\s+/).map(function(e){var i="",n=e.indexOf(".");return n>=0&&(i=e.slice(n+1),e=e.slice(0,n)),{type:e,name:i}})}function hs(t){return function(){var e=this.__on;if(e){for(var i=0,n=-1,o=e.length,c;i<o;++i)c=e[i],(!t.type||c.type===t.type)&&c.name===t.name?this.removeEventListener(c.type,c.listener,c.options):e[++n]=c;++n?e.length=n:delete this.__on}}}function vs(t,e,i){return function(){var n=this.__on,o,c=gs(e);if(n){for(var p=0,g=n.length;p<g;++p)if((o=n[p]).type===t.type&&o.name===t.name){this.removeEventListener(o.type,o.listener,o.options),this.addEventListener(o.type,o.listener=c,o.options=i),o.value=e;return}}this.addEventListener(t.type,c,i),o={type:t.type,name:t.name,value:e,listener:c,options:i},n?n.push(o):this.__on=[o]}}function Ha(t,e,i){var n=us(t+""),o,c=n.length,p;if(arguments.length<2){var g=this.node().__on;if(g){for(var _=0,u=g.length,x;_<u;++_)for(o=0,x=g[_];o<c;++o)if((p=n[o]).type===x.type&&p.name===x.name)return x.value}return}for(g=e?vs:hs,o=0;o<c;++o)this.each(g(n[o],e,i));return this}function Ya(t,e,i){var n=Ri(t),o=n.CustomEvent;typeof o=="function"?o=new o(e,i):(o=n.document.createEvent("Event"),i?(o.initEvent(e,i.bubbles,i.cancelable),o.detail=i.detail):o.initEvent(e,!1,!1)),t.dispatchEvent(o)}function _s(t,e){return function(){return Ya(this,t,e)}}function Cs(t,e){return function(){return Ya(this,t,e.apply(this,arguments))}}function Xa(t,e){return this.each((typeof e=="function"?Cs:_s)(t,e))}function*Wa(){for(var t=this._groups,e=0,i=t.length;e<i;++e)for(var n=t[e],o=0,c=n.length,p;o<c;++o)(p=n[o])&&(yield p)}var Vn=[null];function ae(t,e){this._groups=t,this._parents=e}function Qa(){return new ae([[document.documentElement]],Vn)}function xs(){return this}ae.prototype=Qa.prototype={constructor:ae,select:pa,selectAll:da,selectChild:ma,selectChildren:fa,filter:ga,data:va,enter:ua,exit:_a,join:Ca,merge:xa,selection:xs,order:ba,sort:ya,call:Ma,nodes:Pa,node:Oa,size:Da,empty:wa,each:Sa,attr:Ea,style:Ia,property:ka,classed:Ra,text:Fa,html:Va,raise:za,lower:La,append:Ua,insert:Ga,remove:$a,clone:ja,datum:qa,on:Ha,dispatch:Xa,[Symbol.iterator]:Wa};var Je=Qa;function _t(t){return typeof t=="string"?new ae([[document.querySelector(t)]],[document.documentElement]):new ae([[t]],Vn)}function Fi(t,e,i){t.prototype=e.prototype=i,i.constructor=t}function zn(t,e){var i=Object.create(t.prototype);for(var n in e)i[n]=e[n];return i}function Qt(){}var Xt=.7,Li=1/Xt,At="\\s*([+-]?\\d+)\\s*",Wt="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",$e="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",bs=/^#([0-9a-f]{3,8})$/,ys=new RegExp(`^rgb\\(${At},${At},${At}\\)$`),Ms=new RegExp(`^rgb\\(${$e},${$e},${$e}\\)$`),Ps=new RegExp(`^rgba\\(${At},${At},${At},${Wt}\\)$`),Os=new RegExp(`^rgba\\(${$e},${$e},${$e},${Wt}\\)$`),Ds=new RegExp(`^hsl\\(${Wt},${$e},${$e}\\)$`),ws=new RegExp(`^hsla\\(${Wt},${$e},${$e},${Wt}\\)$`),Ka={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};Fi(Qt,st,{copy(t){return Object.assign(new this.constructor,this,t)},displayable(){return this.rgb().displayable()},hex:Za,formatHex:Za,formatHex8:Ss,formatHsl:Es,formatRgb:Ja,toString:Ja});function Za(){return this.rgb().formatHex()}function Ss(){return this.rgb().formatHex8()}function Es(){return ar(this).formatHsl()}function Ja(){return this.rgb().formatRgb()}function st(t){var e,i;return t=(t+"").trim().toLowerCase(),(e=bs.exec(t))?(i=e[1].length,e=parseInt(e[1],16),i===6?er(e):i===3?new we(e>>8&15|e>>4&240,e>>4&15|e&240,(e&15)<<4|e&15,1):i===8?Vi(e>>24&255,e>>16&255,e>>8&255,(e&255)/255):i===4?Vi(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|e&240,((e&15)<<4|e&15)/255):null):(e=ys.exec(t))?new we(e[1],e[2],e[3],1):(e=Ms.exec(t))?new we(e[1]*255/100,e[2]*255/100,e[3]*255/100,1):(e=Ps.exec(t))?Vi(e[1],e[2],e[3],e[4]):(e=Os.exec(t))?Vi(e[1]*255/100,e[2]*255/100,e[3]*255/100,e[4]):(e=Ds.exec(t))?nr(e[1],e[2]/100,e[3]/100,1):(e=ws.exec(t))?nr(e[1],e[2]/100,e[3]/100,e[4]):Ka.hasOwnProperty(t)?er(Ka[t]):t==="transparent"?new we(NaN,NaN,NaN,0):null}function er(t){return new we(t>>16&255,t>>8&255,t&255,1)}function Vi(t,e,i,n){return n<=0&&(t=e=i=NaN),new we(t,e,i,n)}function Is(t){return t instanceof Qt||(t=st(t)),t?(t=t.rgb(),new we(t.r,t.g,t.b,t.opacity)):new we}function Tt(t,e,i,n){return arguments.length===1?Is(t):new we(t,e,i,n??1)}function we(t,e,i,n){this.r=+t,this.g=+e,this.b=+i,this.opacity=+n}Fi(we,Tt,zn(Qt,{brighter(t){return t=t==null?Li:Math.pow(Li,t),new we(this.r*t,this.g*t,this.b*t,this.opacity)},darker(t){return t=t==null?Xt:Math.pow(Xt,t),new we(this.r*t,this.g*t,this.b*t,this.opacity)},rgb(){return this},clamp(){return new we(xt(this.r),xt(this.g),xt(this.b),Ui(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:tr,formatHex:tr,formatHex8:ks,formatRgb:ir,toString:ir}));function tr(){return`#${Ct(this.r)}${Ct(this.g)}${Ct(this.b)}`}function ks(){return`#${Ct(this.r)}${Ct(this.g)}${Ct(this.b)}${Ct((isNaN(this.opacity)?1:this.opacity)*255)}`}function ir(){let t=Ui(this.opacity);return`${t===1?"rgb(":"rgba("}${xt(this.r)}, ${xt(this.g)}, ${xt(this.b)}${t===1?")":`, ${t})`}`}function Ui(t){return isNaN(t)?1:Math.max(0,Math.min(1,t))}function xt(t){return Math.max(0,Math.min(255,Math.round(t)||0))}function Ct(t){return t=xt(t),(t<16?"0":"")+t.toString(16)}function nr(t,e,i,n){return n<=0?t=e=i=NaN:i<=0||i>=1?t=e=NaN:e<=0&&(t=NaN),new ze(t,e,i,n)}function ar(t){if(t instanceof ze)return new ze(t.h,t.s,t.l,t.opacity);if(t instanceof Qt||(t=st(t)),!t)return new ze;if(t instanceof ze)return t;t=t.rgb();var e=t.r/255,i=t.g/255,n=t.b/255,o=Math.min(e,i,n),c=Math.max(e,i,n),p=NaN,g=c-o,_=(c+o)/2;return g?(e===c?p=(i-n)/g+(i<n)*6:i===c?p=(n-e)/g+2:p=(e-i)/g+4,g/=_<.5?c+o:2-c-o,p*=60):g=_>0&&_<1?0:p,new ze(p,g,_,t.opacity)}function rr(t,e,i,n){return arguments.length===1?ar(t):new ze(t,e,i,n??1)}function ze(t,e,i,n){this.h=+t,this.s=+e,this.l=+i,this.opacity=+n}Fi(ze,rr,zn(Qt,{brighter(t){return t=t==null?Li:Math.pow(Li,t),new ze(this.h,this.s,this.l*t,this.opacity)},darker(t){return t=t==null?Xt:Math.pow(Xt,t),new ze(this.h,this.s,this.l*t,this.opacity)},rgb(){var t=this.h%360+(this.h<0)*360,e=isNaN(t)||isNaN(this.s)?0:this.s,i=this.l,n=i+(i<.5?i:1-i)*e,o=2*i-n;return new we(Ln(t>=240?t-240:t+120,o,n),Ln(t,o,n),Ln(t<120?t+240:t-120,o,n),this.opacity)},clamp(){return new ze(or(this.h),zi(this.s),zi(this.l),Ui(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){let t=Ui(this.opacity);return`${t===1?"hsl(":"hsla("}${or(this.h)}, ${zi(this.s)*100}%, ${zi(this.l)*100}%${t===1?")":`, ${t})`}`}}));function or(t){return t=(t||0)%360,t<0?t+360:t}function zi(t){return Math.max(0,Math.min(1,t||0))}function Ln(t,e,i){return(t<60?e+(i-e)*t/60:t<180?i:t<240?e+(i-e)*(240-t)/60:e)*255}function Un(t,e,i,n,o){var c=t*t,p=c*t;return((1-3*t+3*c-p)*e+(4-6*c+3*p)*i+(1+3*t+3*c-3*p)*n+p*o)/6}function lr(t){var e=t.length-1;return function(i){var n=i<=0?i=0:i>=1?(i=1,e-1):Math.floor(i*e),o=t[n],c=t[n+1],p=n>0?t[n-1]:2*o-c,g=n<e-1?t[n+2]:2*c-o;return Un((i-n/e)*e,p,o,c,g)}}function sr(t){var e=t.length;return function(i){var n=Math.floor(((i%=1)<0?++i:i)*e),o=t[(n+e-1)%e],c=t[n%e],p=t[(n+1)%e],g=t[(n+2)%e];return Un((i-n/e)*e,o,c,p,g)}}var Gn=t=>()=>t;function As(t,e){return function(i){return t+i*e}}function Ts(t,e,i){return t=Math.pow(t,i),e=Math.pow(e,i)-t,i=1/i,function(n){return Math.pow(t+n*e,i)}}function cr(t){return(t=+t)==1?Gi:function(e,i){return i-e?Ts(e,i,t):Gn(isNaN(e)?i:e)}}function Gi(t,e){var i=e-t;return i?As(t,i):Gn(isNaN(t)?e:t)}var $i=(function t(e){var i=cr(e);function n(o,c){var p=i((o=Tt(o)).r,(c=Tt(c)).r),g=i(o.g,c.g),_=i(o.b,c.b),u=Gi(o.opacity,c.opacity);return function(x){return o.r=p(x),o.g=g(x),o.b=_(x),o.opacity=u(x),o+""}}return n.gamma=t,n})(1);function pr(t){return function(e){var i=e.length,n=new Array(i),o=new Array(i),c=new Array(i),p,g;for(p=0;p<i;++p)g=Tt(e[p]),n[p]=g.r||0,o[p]=g.g||0,c[p]=g.b||0;return n=t(n),o=t(o),c=t(c),g.opacity=1,function(_){return g.r=n(_),g.g=o(_),g.b=c(_),g+""}}}var Bs=pr(lr),Ns=pr(sr);function Be(t,e){return t=+t,e=+e,function(i){return t*(1-i)+e*i}}var jn=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,$n=new RegExp(jn.source,"g");function Rs(t){return function(){return t}}function Fs(t){return function(e){return t(e)+""}}function qn(t,e){var i=jn.lastIndex=$n.lastIndex=0,n,o,c,p=-1,g=[],_=[];for(t=t+"",e=e+"";(n=jn.exec(t))&&(o=$n.exec(e));)(c=o.index)>i&&(c=e.slice(i,c),g[p]?g[p]+=c:g[++p]=c),(n=n[0])===(o=o[0])?g[p]?g[p]+=o:g[++p]=o:(g[++p]=null,_.push({i:p,x:Be(n,o)})),i=$n.lastIndex;return i<e.length&&(c=e.slice(i),g[p]?g[p]+=c:g[++p]=c),g.length<2?_[0]?Fs(_[0].x):Rs(e):(e=_.length,function(u){for(var x=0,w;x<e;++x)g[(w=_[x]).i]=w.x(u);return g.join("")})}var dr=180/Math.PI,ji={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function Hn(t,e,i,n,o,c){var p,g,_;return(p=Math.sqrt(t*t+e*e))&&(t/=p,e/=p),(_=t*i+e*n)&&(i-=t*_,n-=e*_),(g=Math.sqrt(i*i+n*n))&&(i/=g,n/=g,_/=g),t*n<e*i&&(t=-t,e=-e,_=-_,p=-p),{translateX:o,translateY:c,rotate:Math.atan2(e,t)*dr,skewX:Math.atan(_)*dr,scaleX:p,scaleY:g}}var qi;function mr(t){let e=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(t+"");return e.isIdentity?ji:Hn(e.a,e.b,e.c,e.d,e.e,e.f)}function fr(t){return t==null?ji:(qi||(qi=document.createElementNS("http://www.w3.org/2000/svg","g")),qi.setAttribute("transform",t),(t=qi.transform.baseVal.consolidate())?(t=t.matrix,Hn(t.a,t.b,t.c,t.d,t.e,t.f)):ji)}function gr(t,e,i,n){function o(u){return u.length?u.pop()+" ":""}function c(u,x,w,O,S,V){if(u!==w||x!==O){var q=S.push("translate(",null,e,null,i);V.push({i:q-4,x:Be(u,w)},{i:q-2,x:Be(x,O)})}else(w||O)&&S.push("translate("+w+e+O+i)}function p(u,x,w,O){u!==x?(u-x>180?x+=360:x-u>180&&(u+=360),O.push({i:w.push(o(w)+"rotate(",null,n)-2,x:Be(u,x)})):x&&w.push(o(w)+"rotate("+x+n)}function g(u,x,w,O){u!==x?O.push({i:w.push(o(w)+"skewX(",null,n)-2,x:Be(u,x)}):x&&w.push(o(w)+"skewX("+x+n)}function _(u,x,w,O,S,V){if(u!==w||x!==O){var q=S.push(o(S)+"scale(",null,",",null,")");V.push({i:q-4,x:Be(u,w)},{i:q-2,x:Be(x,O)})}else(w!==1||O!==1)&&S.push(o(S)+"scale("+w+","+O+")")}return function(u,x){var w=[],O=[];return u=t(u),x=t(x),c(u.translateX,u.translateY,x.translateX,x.translateY,w,O),p(u.rotate,x.rotate,w,O),g(u.skewX,x.skewX,w,O),_(u.scaleX,u.scaleY,x.scaleX,x.scaleY,w,O),u=x=null,function(S){for(var V=-1,q=O.length,ge;++V<q;)w[(ge=O[V]).i]=ge.x(S);return w.join("")}}}var Yn=gr(mr,"px, ","px)","deg)"),Xn=gr(fr,", ",")",")");var Bt=0,Zt=0,Kt=0,hr=1e3,Hi,Jt,Yi=0,bt=0,Xi=0,ei=typeof performance=="object"&&performance.now?performance:Date,vr=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(t){setTimeout(t,17)};function ii(){return bt||(vr(Vs),bt=ei.now()+Xi)}function Vs(){bt=0}function ti(){this._call=this._time=this._next=null}ti.prototype=Wi.prototype={constructor:ti,restart:function(t,e,i){if(typeof t!="function")throw new TypeError("callback is not a function");i=(i==null?ii():+i)+(e==null?0:+e),!this._next&&Jt!==this&&(Jt?Jt._next=this:Hi=this,Jt=this),this._call=t,this._time=i,Wn()},stop:function(){this._call&&(this._call=null,this._time=1/0,Wn())}};function Wi(t,e,i){var n=new ti;return n.restart(t,e,i),n}function _r(){ii(),++Bt;for(var t=Hi,e;t;)(e=bt-t._time)>=0&&t._call.call(void 0,e),t=t._next;--Bt}function ur(){bt=(Yi=ei.now())+Xi,Bt=Zt=0;try{_r()}finally{Bt=0,Ls(),bt=0}}function zs(){var t=ei.now(),e=t-Yi;e>hr&&(Xi-=e,Yi=t)}function Ls(){for(var t,e=Hi,i,n=1/0;e;)e._call?(n>e._time&&(n=e._time),t=e,e=e._next):(i=e._next,e._next=null,e=t?t._next=i:Hi=i);Jt=t,Wn(n)}function Wn(t){if(!Bt){Zt&&(Zt=clearTimeout(Zt));var e=t-bt;e>24?(t<1/0&&(Zt=setTimeout(ur,t-ei.now()-Xi)),Kt&&(Kt=clearInterval(Kt))):(Kt||(Yi=ei.now(),Kt=setInterval(zs,hr)),Bt=1,vr(ur))}}function Qi(t,e,i){var n=new ti;return e=e==null?0:+e,n.restart(o=>{n.stop(),t(o+e)},e,i),n}var Us=Bn("start","end","cancel","interrupt"),Gs=[],br=0,Cr=1,Zi=2,Ki=3,xr=4,Ji=5,ni=6;function ct(t,e,i,n,o,c){var p=t.__transition;if(!p)t.__transition={};else if(i in p)return;$s(t,i,{name:e,index:n,group:o,on:Us,tween:Gs,time:c.time,delay:c.delay,duration:c.duration,ease:c.ease,timer:null,state:br})}function oi(t,e){var i=me(t,e);if(i.state>br)throw new Error("too late; already scheduled");return i}function ue(t,e){var i=me(t,e);if(i.state>Ki)throw new Error("too late; already running");return i}function me(t,e){var i=t.__transition;if(!i||!(i=i[e]))throw new Error("transition not found");return i}function $s(t,e,i){var n=t.__transition,o;n[e]=i,i.timer=Wi(c,0,i.time);function c(u){i.state=Cr,i.timer.restart(p,i.delay,i.time),i.delay<=u&&p(u-i.delay)}function p(u){var x,w,O,S;if(i.state!==Cr)return _();for(x in n)if(S=n[x],S.name===i.name){if(S.state===Ki)return Qi(p);S.state===xr?(S.state=ni,S.timer.stop(),S.on.call("interrupt",t,t.__data__,S.index,S.group),delete n[x]):+x<e&&(S.state=ni,S.timer.stop(),S.on.call("cancel",t,t.__data__,S.index,S.group),delete n[x])}if(Qi(function(){i.state===Ki&&(i.state=xr,i.timer.restart(g,i.delay,i.time),g(u))}),i.state=Zi,i.on.call("start",t,t.__data__,i.index,i.group),i.state===Zi){for(i.state=Ki,o=new Array(O=i.tween.length),x=0,w=-1;x<O;++x)(S=i.tween[x].value.call(t,t.__data__,i.index,i.group))&&(o[++w]=S);o.length=w+1}}function g(u){for(var x=u<i.duration?i.ease.call(null,u/i.duration):(i.timer.restart(_),i.state=Ji,1),w=-1,O=o.length;++w<O;)o[w].call(t,x);i.state===Ji&&(i.on.call("end",t,t.__data__,i.index,i.group),_())}function _(){i.state=ni,i.timer.stop(),delete n[e];for(var u in n)return;delete t.__transition}}function en(t,e){var i=t.__transition,n,o,c=!0,p;if(i){e=e==null?null:e+"";for(p in i){if((n=i[p]).name!==e){c=!1;continue}o=n.state>Zi&&n.state<Ji,n.state=ni,n.timer.stop(),n.on.call(o?"interrupt":"cancel",t,t.__data__,n.index,n.group),delete i[p]}c&&delete t.__transition}}function yr(t){return this.each(function(){en(this,t)})}function js(t,e){var i,n;return function(){var o=ue(this,t),c=o.tween;if(c!==i){n=i=c;for(var p=0,g=n.length;p<g;++p)if(n[p].name===e){n=n.slice(),n.splice(p,1);break}}o.tween=n}}function qs(t,e,i){var n,o;if(typeof i!="function")throw new Error;return function(){var c=ue(this,t),p=c.tween;if(p!==n){o=(n=p).slice();for(var g={name:e,value:i},_=0,u=o.length;_<u;++_)if(o[_].name===e){o[_]=g;break}_===u&&o.push(g)}c.tween=o}}function Mr(t,e){var i=this._id;if(t+="",arguments.length<2){for(var n=me(this.node(),i).tween,o=0,c=n.length,p;o<c;++o)if((p=n[o]).name===t)return p.value;return null}return this.each((e==null?js:qs)(i,t,e))}function Nt(t,e,i){var n=t._id;return t.each(function(){var o=ue(this,n);(o.value||(o.value={}))[e]=i.apply(this,arguments)}),function(o){return me(o,n).value[e]}}function tn(t,e){var i;return(typeof e=="number"?Be:e instanceof st?$i:(i=st(e))?(e=i,$i):qn)(t,e)}function Hs(t){return function(){this.removeAttribute(t)}}function Ys(t){return function(){this.removeAttributeNS(t.space,t.local)}}function Xs(t,e,i){var n,o=i+"",c;return function(){var p=this.getAttribute(t);return p===o?null:p===n?c:c=e(n=p,i)}}function Ws(t,e,i){var n,o=i+"",c;return function(){var p=this.getAttributeNS(t.space,t.local);return p===o?null:p===n?c:c=e(n=p,i)}}function Qs(t,e,i){var n,o,c;return function(){var p,g=i(this),_;return g==null?void this.removeAttribute(t):(p=this.getAttribute(t),_=g+"",p===_?null:p===n&&_===o?c:(o=_,c=e(n=p,g)))}}function Ks(t,e,i){var n,o,c;return function(){var p,g=i(this),_;return g==null?void this.removeAttributeNS(t.space,t.local):(p=this.getAttributeNS(t.space,t.local),_=g+"",p===_?null:p===n&&_===o?c:(o=_,c=e(n=p,g)))}}function Pr(t,e){var i=Ze(t),n=i==="transform"?Xn:tn;return this.attrTween(t,typeof e=="function"?(i.local?Ks:Qs)(i,n,Nt(this,"attr."+t,e)):e==null?(i.local?Ys:Hs)(i):(i.local?Ws:Xs)(i,n,e))}function Zs(t,e){return function(i){this.setAttribute(t,e.call(this,i))}}function Js(t,e){return function(i){this.setAttributeNS(t.space,t.local,e.call(this,i))}}function ec(t,e){var i,n;function o(){var c=e.apply(this,arguments);return c!==n&&(i=(n=c)&&Js(t,c)),i}return o._value=e,o}function tc(t,e){var i,n;function o(){var c=e.apply(this,arguments);return c!==n&&(i=(n=c)&&Zs(t,c)),i}return o._value=e,o}function Or(t,e){var i="attr."+t;if(arguments.length<2)return(i=this.tween(i))&&i._value;if(e==null)return this.tween(i,null);if(typeof e!="function")throw new Error;var n=Ze(t);return this.tween(i,(n.local?ec:tc)(n,e))}function ic(t,e){return function(){oi(this,t).delay=+e.apply(this,arguments)}}function nc(t,e){return e=+e,function(){oi(this,t).delay=e}}function Dr(t){var e=this._id;return arguments.length?this.each((typeof t=="function"?ic:nc)(e,t)):me(this.node(),e).delay}function oc(t,e){return function(){ue(this,t).duration=+e.apply(this,arguments)}}function ac(t,e){return e=+e,function(){ue(this,t).duration=e}}function wr(t){var e=this._id;return arguments.length?this.each((typeof t=="function"?oc:ac)(e,t)):me(this.node(),e).duration}function rc(t,e){if(typeof e!="function")throw new Error;return function(){ue(this,t).ease=e}}function Sr(t){var e=this._id;return arguments.length?this.each(rc(e,t)):me(this.node(),e).ease}function lc(t,e){return function(){var i=e.apply(this,arguments);if(typeof i!="function")throw new Error;ue(this,t).ease=i}}function Er(t){if(typeof t!="function")throw new Error;return this.each(lc(this._id,t))}function Ir(t){typeof t!="function"&&(t=Ht(t));for(var e=this._groups,i=e.length,n=new Array(i),o=0;o<i;++o)for(var c=e[o],p=c.length,g=n[o]=[],_,u=0;u<p;++u)(_=c[u])&&t.call(_,_.__data__,u,c)&&g.push(_);return new be(n,this._parents,this._name,this._id)}function kr(t){if(t._id!==this._id)throw new Error;for(var e=this._groups,i=t._groups,n=e.length,o=i.length,c=Math.min(n,o),p=new Array(n),g=0;g<c;++g)for(var _=e[g],u=i[g],x=_.length,w=p[g]=new Array(x),O,S=0;S<x;++S)(O=_[S]||u[S])&&(w[S]=O);for(;g<n;++g)p[g]=e[g];return new be(p,this._parents,this._name,this._id)}function sc(t){return(t+"").trim().split(/^|\s+/).every(function(e){var i=e.indexOf(".");return i>=0&&(e=e.slice(0,i)),!e||e==="start"})}function cc(t,e,i){var n,o,c=sc(e)?oi:ue;return function(){var p=c(this,t),g=p.on;g!==n&&(o=(n=g).copy()).on(e,i),p.on=o}}function Ar(t,e){var i=this._id;return arguments.length<2?me(this.node(),i).on.on(t):this.each(cc(i,t,e))}function pc(t){return function(){var e=this.parentNode;for(var i in this.__transition)if(+i!==t)return;e&&e.removeChild(this)}}function Tr(){return this.on("end.remove",pc(this._id))}function Br(t){var e=this._name,i=this._id;typeof t!="function"&&(t=vt(t));for(var n=this._groups,o=n.length,c=new Array(o),p=0;p<o;++p)for(var g=n[p],_=g.length,u=c[p]=new Array(_),x,w,O=0;O<_;++O)(x=g[O])&&(w=t.call(x,x.__data__,O,g))&&("__data__"in x&&(w.__data__=x.__data__),u[O]=w,ct(u[O],e,i,O,u,me(x,i)));return new be(c,this._parents,e,i)}function Nr(t){var e=this._name,i=this._id;typeof t!="function"&&(t=qt(t));for(var n=this._groups,o=n.length,c=[],p=[],g=0;g<o;++g)for(var _=n[g],u=_.length,x,w=0;w<u;++w)if(x=_[w]){for(var O=t.call(x,x.__data__,w,_),S,V=me(x,i),q=0,ge=O.length;q<ge;++q)(S=O[q])&&ct(S,e,i,q,O,V);c.push(O),p.push(x)}return new be(c,p,e,i)}var dc=Je.prototype.constructor;function Rr(){return new dc(this._groups,this._parents)}function mc(t,e){var i,n,o;return function(){var c=lt(this,t),p=(this.style.removeProperty(t),lt(this,t));return c===p?null:c===i&&p===n?o:o=e(i=c,n=p)}}function Fr(t){return function(){this.style.removeProperty(t)}}function fc(t,e,i){var n,o=i+"",c;return function(){var p=lt(this,t);return p===o?null:p===n?c:c=e(n=p,i)}}function gc(t,e,i){var n,o,c;return function(){var p=lt(this,t),g=i(this),_=g+"";return g==null&&(_=g=(this.style.removeProperty(t),lt(this,t))),p===_?null:p===n&&_===o?c:(o=_,c=e(n=p,g))}}function uc(t,e){var i,n,o,c="style."+e,p="end."+c,g;return function(){var _=ue(this,t),u=_.on,x=_.value[c]==null?g||(g=Fr(e)):void 0;(u!==i||o!==x)&&(n=(i=u).copy()).on(p,o=x),_.on=n}}function Vr(t,e,i){var n=(t+="")=="transform"?Yn:tn;return e==null?this.styleTween(t,mc(t,n)).on("end.style."+t,Fr(t)):typeof e=="function"?this.styleTween(t,gc(t,n,Nt(this,"style."+t,e))).each(uc(this._id,t)):this.styleTween(t,fc(t,n,e),i).on("end.style."+t,null)}function hc(t,e,i){return function(n){this.style.setProperty(t,e.call(this,n),i)}}function vc(t,e,i){var n,o;function c(){var p=e.apply(this,arguments);return p!==o&&(n=(o=p)&&hc(t,p,i)),n}return c._value=e,c}function zr(t,e,i){var n="style."+(t+="");if(arguments.length<2)return(n=this.tween(n))&&n._value;if(e==null)return this.tween(n,null);if(typeof e!="function")throw new Error;return this.tween(n,vc(t,e,i??""))}function _c(t){return function(){this.textContent=t}}function Cc(t){return function(){var e=t(this);this.textContent=e??""}}function Lr(t){return this.tween("text",typeof t=="function"?Cc(Nt(this,"text",t)):_c(t==null?"":t+""))}function xc(t){return function(e){this.textContent=t.call(this,e)}}function bc(t){var e,i;function n(){var o=t.apply(this,arguments);return o!==i&&(e=(i=o)&&xc(o)),e}return n._value=t,n}function Ur(t){var e="text";if(arguments.length<1)return(e=this.tween(e))&&e._value;if(t==null)return this.tween(e,null);if(typeof t!="function")throw new Error;return this.tween(e,bc(t))}function Gr(){for(var t=this._name,e=this._id,i=nn(),n=this._groups,o=n.length,c=0;c<o;++c)for(var p=n[c],g=p.length,_,u=0;u<g;++u)if(_=p[u]){var x=me(_,e);ct(_,t,i,u,p,{time:x.time+x.delay+x.duration,delay:0,duration:x.duration,ease:x.ease})}return new be(n,this._parents,t,i)}function $r(){var t,e,i=this,n=i._id,o=i.size();return new Promise(function(c,p){var g={value:p},_={value:function(){--o===0&&c()}};i.each(function(){var u=ue(this,n),x=u.on;x!==t&&(e=(t=x).copy(),e._.cancel.push(g),e._.interrupt.push(g),e._.end.push(_)),u.on=e}),o===0&&c()})}var yc=0;function be(t,e,i,n){this._groups=t,this._parents=e,this._name=i,this._id=n}function jr(t){return Je().transition(t)}function nn(){return++yc}var et=Je.prototype;be.prototype=jr.prototype={constructor:be,select:Br,selectAll:Nr,selectChild:et.selectChild,selectChildren:et.selectChildren,filter:Ir,merge:kr,selection:Rr,transition:Gr,call:et.call,nodes:et.nodes,node:et.node,size:et.size,empty:et.empty,each:et.each,on:Ar,attr:Pr,attrTween:Or,style:Vr,styleTween:zr,text:Lr,textTween:Ur,remove:Tr,tween:Mr,delay:Dr,duration:wr,ease:Sr,easeVarying:Er,end:$r,[Symbol.iterator]:et[Symbol.iterator]};function on(t){return((t*=2)<=1?t*t*t:(t-=2)*t*t+2)/2}var Mc={time:null,delay:0,duration:250,ease:on};function Pc(t,e){for(var i;!(i=t.__transition)||!(i=i[e]);)if(!(t=t.parentNode))throw new Error(`transition ${e} not found`);return i}function qr(t){var e,i;t instanceof be?(e=t._id,t=t._name):(e=nn(),(i=Mc).time=ii(),t=t==null?null:t+"");for(var n=this._groups,o=n.length,c=0;c<o;++c)for(var p=n[c],g=p.length,_,u=0;u<g;++u)(_=p[u])&&ct(_,t,e,u,p,i||Pc(_,e));return new be(n,this._parents,t,e)}Je.prototype.interrupt=yr;Je.prototype.transition=qr;var{abs:Nh,max:Rh,min:Fh}=Math;function Hr(t){return[+t[0],+t[1]]}function Oc(t){return[Hr(t[0]),Hr(t[1])]}var Vh={name:"x",handles:["w","e"].map(Qn),input:function(t,e){return t==null?null:[[+t[0],e[0][1]],[+t[1],e[1][1]]]},output:function(t){return t&&[t[0][0],t[1][0]]}},zh={name:"y",handles:["n","s"].map(Qn),input:function(t,e){return t==null?null:[[e[0][0],+t[0]],[e[1][0],+t[1]]]},output:function(t){return t&&[t[0][1],t[1][1]]}},Lh={name:"xy",handles:["n","w","e","s","nw","ne","sw","se"].map(Qn),input:function(t){return t==null?null:Oc(t)},output:function(t){return t}};function Qn(t){return{type:t}}function Dc(t){var e=0,i=t.children,n=i&&i.length;if(!n)e=1;else for(;--n>=0;)e+=i[n].value;t.value=e}function Yr(){return this.eachAfter(Dc)}function Xr(t,e){let i=-1;for(let n of this)t.call(e,n,++i,this);return this}function Wr(t,e){for(var i=this,n=[i],o,c,p=-1;i=n.pop();)if(t.call(e,i,++p,this),o=i.children)for(c=o.length-1;c>=0;--c)n.push(o[c]);return this}function Qr(t,e){for(var i=this,n=[i],o=[],c,p,g,_=-1;i=n.pop();)if(o.push(i),c=i.children)for(p=0,g=c.length;p<g;++p)n.push(c[p]);for(;i=o.pop();)t.call(e,i,++_,this);return this}function Kr(t,e){let i=-1;for(let n of this)if(t.call(e,n,++i,this))return n}function Zr(t){return this.eachAfter(function(e){for(var i=+t(e.data)||0,n=e.children,o=n&&n.length;--o>=0;)i+=n[o].value;e.value=i})}function Jr(t){return this.eachBefore(function(e){e.children&&e.children.sort(t)})}function el(t){for(var e=this,i=wc(e,t),n=[e];e!==i;)e=e.parent,n.push(e);for(var o=n.length;t!==i;)n.splice(o,0,t),t=t.parent;return n}function wc(t,e){if(t===e)return t;var i=t.ancestors(),n=e.ancestors(),o=null;for(t=i.pop(),e=n.pop();t===e;)o=t,t=i.pop(),e=n.pop();return o}function tl(){for(var t=this,e=[t];t=t.parent;)e.push(t);return e}function il(){return Array.from(this)}function nl(){var t=[];return this.eachBefore(function(e){e.children||t.push(e)}),t}function ol(){var t=this,e=[];return t.each(function(i){i!==t&&e.push({source:i.parent,target:i})}),e}function*al(){var t=this,e,i=[t],n,o,c;do for(e=i.reverse(),i=[];t=e.pop();)if(yield t,n=t.children)for(o=0,c=n.length;o<c;++o)i.push(n[o]);while(i.length)}function Rt(t,e){t instanceof Map?(t=[void 0,t],e===void 0&&(e=Ic)):e===void 0&&(e=Ec);for(var i=new yt(t),n,o=[i],c,p,g,_;n=o.pop();)if((p=e(n.data))&&(_=(p=Array.from(p)).length))for(n.children=p,g=_-1;g>=0;--g)o.push(c=p[g]=new yt(p[g])),c.parent=n,c.depth=n.depth+1;return i.eachBefore(Ac)}function Sc(){return Rt(this).eachBefore(kc)}function Ec(t){return t.children}function Ic(t){return Array.isArray(t)?t[1]:null}function kc(t){t.data.value!==void 0&&(t.value=t.data.value),t.data=t.data.data}function Ac(t){var e=0;do t.height=e;while((t=t.parent)&&t.height<++e)}function yt(t){this.data=t,this.depth=this.height=0,this.parent=null}yt.prototype=Rt.prototype={constructor:yt,count:Yr,each:Xr,eachAfter:Qr,eachBefore:Wr,find:Kr,sum:Zr,sort:Jr,path:el,ancestors:tl,descendants:il,leaves:nl,links:ol,copy:Sc,[Symbol.iterator]:al};function Tc(t,e){return t.parent===e.parent?1:2}function Kn(t){var e=t.children;return e?e[0]:t.t}function Zn(t){var e=t.children;return e?e[e.length-1]:t.t}function Bc(t,e,i){var n=i/(e.i-t.i);e.c-=n,e.s+=i,t.c+=n,e.z+=i,e.m+=i}function Nc(t){for(var e=0,i=0,n=t.children,o=n.length,c;--o>=0;)c=n[o],c.z+=e,c.m+=e,e+=c.s+(i+=c.c)}function Rc(t,e,i){return t.a.parent===e.parent?t.a:i}function an(t,e){this._=t,this.parent=null,this.children=null,this.A=null,this.a=this,this.z=0,this.m=0,this.c=0,this.s=0,this.t=null,this.i=e}an.prototype=Object.create(yt.prototype);function Fc(t){for(var e=new an(t,0),i,n=[e],o,c,p,g;i=n.pop();)if(c=i._.children)for(i.children=new Array(g=c.length),p=g-1;p>=0;--p)n.push(o=i.children[p]=new an(c[p],p)),o.parent=i;return(e.parent=new an(null,0)).children=[e],e}function Jn(){var t=Tc,e=1,i=1,n=null;function o(u){var x=Fc(u);if(x.eachAfter(c),x.parent.m=-x.z,x.eachBefore(p),n)u.eachBefore(_);else{var w=u,O=u,S=u;u.eachBefore(function(J){J.x<w.x&&(w=J),J.x>O.x&&(O=J),J.depth>S.depth&&(S=J)});var V=w===O?1:t(w,O)/2,q=V-w.x,ge=e/(O.x+V+q),He=i/(S.depth||1);u.eachBefore(function(J){J.x=(J.x+q)*ge,J.y=J.depth*He})}return u}function c(u){var x=u.children,w=u.parent.children,O=u.i?w[u.i-1]:null;if(x){Nc(u);var S=(x[0].z+x[x.length-1].z)/2;O?(u.z=O.z+t(u._,O._),u.m=u.z-S):u.z=S}else O&&(u.z=O.z+t(u._,O._));u.parent.A=g(u,O,u.parent.A||w[0])}function p(u){u._.x=u.z+u.parent.m,u.m+=u.parent.m}function g(u,x,w){if(x){for(var O=u,S=u,V=x,q=O.parent.children[0],ge=O.m,He=S.m,J=V.m,Ie=q.m,Ne;V=Zn(V),O=Kn(O),V&&O;)q=Kn(q),S=Zn(S),S.a=u,Ne=V.z+J-O.z-ge+t(V._,O._),Ne>0&&(Bc(Rc(V,u,w),u,Ne),ge+=Ne,He+=Ne),J+=V.m,ge+=O.m,Ie+=q.m,He+=S.m;V&&!Zn(S)&&(S.t=V,S.m+=J-He),O&&!Kn(q)&&(q.t=O,q.m+=ge-Ie,w=u)}return w}function _(u){u.x*=e,u.y=u.depth*i}return o.separation=function(u){return arguments.length?(t=u,o):t},o.size=function(u){return arguments.length?(n=!1,e=+u[0],i=+u[1],o):n?null:[e,i]},o.nodeSize=function(u){return arguments.length?(n=!0,e=+u[0],i=+u[1],o):n?[e,i]:null},o}function pt(t,e,i){this.k=t,this.x=e,this.y=i}pt.prototype={constructor:pt,scale:function(t){return t===1?this:new pt(this.k*t,this.x,this.y)},translate:function(t,e){return t===0&e===0?this:new pt(this.k,this.x+this.k*t,this.y+this.k*e)},apply:function(t){return[t[0]*this.k+this.x,t[1]*this.k+this.y]},applyX:function(t){return t*this.k+this.x},applyY:function(t){return t*this.k+this.y},invert:function(t){return[(t[0]-this.x)/this.k,(t[1]-this.y)/this.k]},invertX:function(t){return(t-this.x)/this.k},invertY:function(t){return(t-this.y)/this.k},rescaleX:function(t){return t.copy().domain(t.range().map(this.invertX,this).map(t.invert,t))},rescaleY:function(t){return t.copy().domain(t.range().map(this.invertY,this).map(t.invert,t))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var eo=new pt(1,0,0);to.prototype=pt.prototype;function to(t){for(;!t.__zoom;)if(!(t=t.parentNode))return eo;return t.__zoom}var zc=["chartContainer"];function Lc(t,e){t&1&&(r(0,"div",1),D(1,"mat-spinner",5),a())}function Uc(t,e){if(t&1){let i=z();r(0,"div",2)(1,"mat-icon"),s(2,"error_outline"),a(),r(3,"p"),s(4),d(5,"translate"),a(),r(6,"button",6),P("click",function(){I(i);let o=C();return k(o.loadData())}),r(7,"mat-icon"),s(8,"refresh"),a(),s(9),d(10,"translate"),a()()}t&2&&(l(4),f(m(5,2,"admin.employees.errors.loadFailed")),l(5),T(" ",m(10,4,"common.retry")," "))}function Gc(t,e){t&1&&(r(0,"div",3)(1,"mat-icon"),s(2,"people_outline"),a(),r(3,"p"),s(4),d(5,"translate"),a()()),t&2&&(l(4),f(m(5,1,"admin.noEmployeesFound")))}function $c(t,e){t&1&&D(0,"div",4,0)}var Ft=class t{constructor(e,i,n){this.translationService=e;this.employeesService=i;this.cdr=n;this.currentLanguage=this.translationService.language(),mo(()=>{let o=this.translationService.language();this.currentLanguage!==o&&(this.currentLanguage=o,this.loadData())})}chartContainer;departmentId;loading=!1;error=!1;hasData=!1;data=null;svg=null;resizeObserver=null;currentLanguage;ngOnInit(){this.loadData()}ngOnChanges(e){e.departmentId&&!e.departmentId.firstChange&&this.loadData()}ngAfterViewInit(){this.setupResizeObserver()}ngOnDestroy(){this.resizeObserver&&this.resizeObserver.disconnect(),_t("body").selectAll(".org-chart-body-tooltip").remove()}get isArabic(){return this.translationService.language()==="ar"}loadData(){this.loading=!0,this.error=!1,this.employeesService.getTree(this.departmentId).subscribe({next:e=>{e.success&&e.data&&e.data.length>0?(e.data.length===1?this.data=this.mapToOrgNode(e.data[0]):this.data={id:"virtual-root",name:"",title:"",department:"",initials:"",isVirtualRoot:!0,children:e.data.map(i=>this.mapToOrgNode(i))},this.hasData=!0):this.hasData=!1,this.loading=!1,this.cdr.markForCheck(),this.hasData&&setTimeout(()=>this.renderChart(),0)},error:()=>{this.loading=!1,this.error=!0,this.cdr.detectChanges()}})}mapToOrgNode(e){let i=this.isArabic?e.fullNameAr:e.fullNameEn;return{id:e.id,name:i||"",title:(this.isArabic?e.positionNameAr:e.positionNameEn)||"",department:(this.isArabic?e.departmentNameAr:e.departmentNameEn)||"",initials:this.getInitials(i),filePath:e.filePath,children:e.children?.map(n=>this.mapToOrgNode(n))}}getInitials(e){return e?e.split(" ").map(i=>i[0]).join("").substring(0,2).toUpperCase():"?"}setupResizeObserver(){this.chartContainer?.nativeElement&&(this.resizeObserver=new ResizeObserver(()=>{this.hasData&&this.renderChart()}),this.resizeObserver.observe(this.chartContainer.nativeElement))}renderChart(){if(!this.data||!this.chartContainer?.nativeElement)return;let e=this.chartContainer.nativeElement,n=(e.clientWidth||800)-60,o=e.clientHeight||600;_t(e).selectAll("*").remove();let c=180,p=120,g=40,_=60,u=Rt(this.data),x=Math.max(o-100,(u.height+1)*(p+_)),O=Jn().nodeSize([c+g,p+_])(u),S=1/0,V=-1/0;O.each(R=>{R.x<S&&(S=R.x),R.x>V&&(V=R.x)});let q=V-S+c+100,ge=x+120,He=q>n?n/q:1,J=ge*He;this.svg=_t(e).append("svg").attr("width","100%").attr("height",J).attr("viewBox",`0 0 ${q} ${ge}`).attr("preserveAspectRatio","xMidYMin meet").attr("class","org-chart-svg");let Ie=this.svg.append("defs"),Ne=Ie.append("linearGradient").attr("id","avatarGradient").attr("x1","0%").attr("y1","0%").attr("x2","100%").attr("y2","100%");Ne.append("stop").attr("offset","0%").attr("stop-color","#34d399"),Ne.append("stop").attr("offset","100%").attr("stop-color","#059669");let $t=Ie.append("linearGradient").attr("id","linkGradient").attr("x1","0%").attr("y1","0%").attr("x2","0%").attr("y2","100%");$t.append("stop").attr("offset","0%").attr("stop-color","#10b981"),$t.append("stop").attr("offset","100%").attr("stop-color","#d1d5db"),Ie.append("filter").attr("id","cardShadow").attr("x","-20%").attr("y","-20%").attr("width","140%").attr("height","140%").append("feDropShadow").attr("dx","0").attr("dy","4").attr("stdDeviation","8").attr("flood-color","rgba(0, 0, 0, 0.1)"),Ie.append("clipPath").attr("id","avatarClip").append("circle").attr("cx",0).attr("cy",0).attr("r",20);let lo=this.svg.append("g").attr("transform",`translate(${q/2}, 60)`).append("g").attr("transform",`translate(${-(V+S)/2}, 0)`);lo.selectAll(".link").data(O.links().filter(R=>!R.source.data.isVirtualRoot)).enter().append("path").attr("class","org-chart-link").attr("d",R=>{let Fe=R.source.x,fi=R.source.y+p,gi=R.target.x,tt=R.target.y,so=(fi+tt)/2;return`M ${Fe} ${fi}
                C ${Fe} ${so},
                  ${gi} ${so},
                  ${gi} ${tt}`}).style("fill","none").style("stroke","#10b981").style("stroke-width","2.5px").style("stroke-linecap","round"),_t("body").selectAll(".org-chart-body-tooltip").remove();let wn=_t("body").append("div").attr("class","org-chart-body-tooltip").style("position","fixed").style("visibility","hidden").style("background","rgba(30, 41, 59, 0.95)").style("color","white").style("padding","10px 14px").style("border-radius","6px").style("font-size","13px").style("box-shadow","0 4px 12px rgba(0, 0, 0, 0.3)").style("pointer-events","none").style("z-index","10000").style("max-width","250px").style("line-height","1.4"),mi=this,Re=lo.selectAll(".node").data(O.descendants().filter(R=>!R.data.isVirtualRoot)).enter().append("g").attr("class","org-chart-node").attr("transform",R=>`translate(${R.x-c/2}, ${R.y})`).style("cursor","pointer").on("mouseenter",(R,Fe)=>{let fi=mi.isArabic?"\u0627\u0644\u0645\u0633\u0645\u0649 \u0627\u0644\u0648\u0638\u064A\u0641\u064A":"Position",gi=mi.isArabic?"\u0627\u0644\u0642\u0633\u0645":"Department",tt="";Fe.data.filePath&&(tt+=`<div style="text-align: center; margin-bottom: 8px;">
            <img src="${Fe.data.filePath}" alt="${Fe.data.name}" style="width: 60px; height: 60px; border-radius: 50%; object-fit: cover; border: 2px solid #34d399;">
          </div>`),tt+=`<div style="font-weight: 600; color: #34d399; margin-bottom: 4px; text-align: center;">${Fe.data.name}</div>`,Fe.data.title&&(tt+=`<div><span style="color: #94a3b8;">${fi}:</span> ${Fe.data.title}</div>`),Fe.data.department&&(tt+=`<div><span style="color: #94a3b8;">${gi}:</span> ${Fe.data.department}</div>`),wn.html(tt).style("direction",mi.isArabic?"rtl":"ltr").style("text-align",mi.isArabic?"right":"left").style("visibility","visible")}).on("mousemove",R=>{wn.style("left",R.clientX+10+"px").style("top",R.clientY+10+"px")}).on("mouseleave",()=>{wn.style("visibility","hidden")});Re.append("rect").attr("class","node-card-bg").attr("width",c).attr("height",p).attr("rx",12).attr("ry",12).attr("filter","url(#cardShadow)").style("fill","rgba(255, 255, 255, 0.98)"),Re.append("rect").attr("class","node-card-border").attr("width",c).attr("height",p).attr("rx",12).attr("ry",12).style("fill","none").style("stroke","#e2e8f0").style("stroke-width","1.5px");let Ye=c/2;Re.filter(R=>!R.data.filePath).append("circle").attr("class","node-avatar-circle").attr("cx",Ye).attr("cy",24).attr("r",20).style("fill","url(#avatarGradient)"),Re.filter(R=>!R.data.filePath).append("text").attr("class","node-avatar-text").attr("x",Ye).attr("y",24).attr("text-anchor","middle").attr("dominant-baseline","central").style("fill","white").style("font-size","11px").style("font-weight","700").style("letter-spacing","0.5px").text(R=>R.data.initials),Re.filter(R=>!!R.data.filePath).append("circle").attr("cx",Ye).attr("cy",24).attr("r",20).style("fill","#e2e8f0"),Re.filter(R=>!!R.data.filePath).append("image").attr("class","node-avatar-image").attr("x",Ye-20).attr("y",4).attr("width",40).attr("height",40).attr("clip-path","circle(20px at 20px 20px)").attr("preserveAspectRatio","xMidYMid slice").attr("href",R=>R.data.filePath||""),Re.append("text").attr("class","node-name-text").attr("x",Ye).attr("y",58).attr("text-anchor","middle").style("fill","#1e293b").style("font-size","12px").style("font-weight","700").text(R=>this.truncateText(R.data.name,16)),Re.append("text").attr("class","node-title-text").attr("x",Ye).attr("y",76).attr("text-anchor","middle").style("fill","#10b981").style("font-size","10px").style("font-weight","600").text(R=>this.truncateText(R.data.title,20)),Re.append("text").attr("class","node-department-text").attr("x",Ye).attr("y",94).attr("text-anchor","middle").style("fill","#64748b").style("font-size","9px").style("font-weight","500").text(R=>this.truncateText(R.data.department,22)),Re.filter(R=>!!(R.children&&R.children.length>0)).append("circle").attr("class","node-connector").attr("cx",Ye).attr("cy",p).attr("r",4).style("fill","#10b981"),Re.filter(R=>R.parent!==null&&!R.parent.data.isVirtualRoot).append("circle").attr("class","node-connector-top").attr("cx",Ye).attr("cy",0).attr("r",3).style("fill","#e2e8f0")}truncateText(e,i){return e?e.length>i?e.substring(0,i)+"...":e:""}static \u0275fac=function(i){return new(i||t)(h(N),h(De),h(W))};static \u0275cmp=E({type:t,selectors:[["app-org-chart"]],viewQuery:function(i,n){if(i&1&&Dt(zc,5),i&2){let o;ut(o=ht())&&(n.chartContainer=o.first)}},inputs:{departmentId:"departmentId"},standalone:!1,features:[Ot],decls:4,vars:1,consts:[["chartContainer",""],[1,"org-chart-loading"],[1,"org-chart-error"],[1,"org-chart-empty"],[1,"org-chart-container"],["diameter","40"],["mat-raised-button","","color","primary",3,"click"]],template:function(i,n){i&1&&b(0,Lc,2,0,"div",1)(1,Uc,11,6,"div",2)(2,Gc,6,3,"div",3)(3,$c,2,0,"div",4),i&2&&y(n.loading?0:n.error?1:n.hasData?3:2)},dependencies:[fe,B,Oe,A],styles:[`app-org-chart{display:block;width:100%;height:calc(100vh - 200px);overflow-x:hidden;overflow-y:auto}.org-chart-loading{display:flex;justify-content:center;align-items:center;min-height:400px;background:linear-gradient(135deg,#f8fafc,#e2e8f0);border-radius:16px}.org-chart-error{display:flex;flex-direction:column;align-items:center;justify-content:center;min-height:400px;gap:16px;background:linear-gradient(135deg,#fef2f2,#fee2e2);border-radius:16px;padding:40px}.org-chart-error mat-icon{font-size:56px;width:56px;height:56px;color:#ef4444}.org-chart-error p{font-size:1.1rem;margin:0;color:#991b1b;font-weight:500}.org-chart-error button{margin-top:8px;border-radius:12px;padding:10px 24px;font-weight:600}.org-chart-error button mat-icon{font-size:20px;width:20px;height:20px;margin-right:8px;color:inherit}.org-chart-empty{display:flex;flex-direction:column;align-items:center;justify-content:center;min-height:400px;background:linear-gradient(135deg,#f8fafc,#e2e8f0);border-radius:16px;padding:40px}.org-chart-empty mat-icon{font-size:72px;width:72px;height:72px;margin-bottom:1.5rem;color:#94a3b8}.org-chart-empty p{font-size:1.1rem;margin:0;color:#64748b;font-weight:500}.org-chart-container{width:100%;height:100%;padding:30px;background:linear-gradient(180deg,#f8fafc,#fff);border-radius:16px;box-sizing:border-box}.org-chart-svg{font-family:Inter,DM Sans,-apple-system,BlinkMacSystemFont,sans-serif}.avatar-gradient-stop-1{stop-color:#10b981}.avatar-gradient-stop-2{stop-color:#059669}.org-chart-link{fill:none;stroke:url(#linkGradient);stroke-width:2.5px;stroke-linecap:round}.org-chart-node{cursor:pointer}.org-chart-node:hover .node-card-bg{filter:drop-shadow(0 8px 20px rgba(0,0,0,.12))}.org-chart-node:hover .node-card-border{stroke:#10b981;stroke-width:2px}.node-card-bg{fill:#fffffff2;filter:drop-shadow(0 4px 16px rgba(0,0,0,.08));transition:all .3s cubic-bezier(.4,0,.2,1)}.node-card-border{fill:none;stroke:#e2e8f0;stroke-width:1.5px;transition:all .3s ease}.node-avatar-circle{fill:url(#avatarGradient);filter:drop-shadow(0 2px 4px rgba(16,185,129,.3))}.node-avatar-text{fill:#fff;font-size:13px;font-weight:700;letter-spacing:.5px;text-transform:uppercase}.node-name-text{fill:#1e293b;font-size:14px;font-weight:700;letter-spacing:-.01em}.node-title-text{fill:#10b981;font-size:11px;font-weight:600}.node-department-text{fill:#64748b;font-size:10px;font-weight:500}.node-connector{fill:#10b981;filter:drop-shadow(0 1px 2px rgba(16,185,129,.4))}.node-connector-top{fill:#e2e8f0}
`],encapsulation:2})};var ai=class t{constructor(e){this.authService=e}hasUserPermission=!0;permissions=F;ngOnInit(){this.hasUserPermission=this.authService.hasPermission(F.USERS_READ)}static \u0275fac=function(i){return new(i||t)(h(Ci))};static \u0275cmp=E({type:t,selectors:[["app-dashboard"]],standalone:!1,decls:16,vars:6,consts:[[1,"dashboard-container"],[1,"org-tree-section"],[1,"section-header"],[1,"header-info"],[1,"header-icon"],[1,"tree-content"]],template:function(i,n){i&1&&(r(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"mat-icon"),s(6,"account_tree"),a()(),r(7,"div")(8,"h2"),s(9),d(10,"translate"),a(),r(11,"p"),s(12),d(13,"translate"),a()()()(),r(14,"div",5),D(15,"app-org-chart"),a()()()),i&2&&(l(9),f(m(10,2,"admin.organizationChart")),l(3),f(m(13,4,"admin.organizationChartDescription")))},dependencies:[B,Ft,A],styles:[".dashboard-container[_ngcontent-%COMP%]{padding:1.5rem;min-height:calc(100vh - 120px)}.org-tree-section[_ngcontent-%COMP%]{background:#fff;border-radius:16px;box-shadow:0 4px 20px #00000014;overflow:hidden}.org-tree-section[_ngcontent-%COMP%]   .section-header[_ngcontent-%COMP%]{padding:1.5rem 2rem;border-bottom:1px solid #e9ecef;background:linear-gradient(135deg,#f8fafc,#fff)}.org-tree-section[_ngcontent-%COMP%]   .section-header[_ngcontent-%COMP%]   .header-info[_ngcontent-%COMP%]{display:flex;align-items:center;gap:1rem}.org-tree-section[_ngcontent-%COMP%]   .section-header[_ngcontent-%COMP%]   .header-info[_ngcontent-%COMP%]   .header-icon[_ngcontent-%COMP%]{width:48px;height:48px;border-radius:12px;background:linear-gradient(135deg,#81b29a,#5a9178);display:flex;align-items:center;justify-content:center}.org-tree-section[_ngcontent-%COMP%]   .section-header[_ngcontent-%COMP%]   .header-info[_ngcontent-%COMP%]   .header-icon[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{color:#fff;font-size:24px}.org-tree-section[_ngcontent-%COMP%]   .section-header[_ngcontent-%COMP%]   .header-info[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin:0;font-size:1.25rem;font-weight:700;color:#1e293b}.org-tree-section[_ngcontent-%COMP%]   .section-header[_ngcontent-%COMP%]   .header-info[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:.25rem 0 0;font-size:.875rem;color:#64748b}.org-tree-section[_ngcontent-%COMP%]   .tree-content[_ngcontent-%COMP%]{padding:1.5rem;min-height:400px}[dir=rtl][_nghost-%COMP%]   .section-header[_ngcontent-%COMP%]   .header-info[_ngcontent-%COMP%], [dir=rtl]   [_nghost-%COMP%]   .section-header[_ngcontent-%COMP%]   .header-info[_ngcontent-%COMP%]{text-align:right}@media(max-width:768px){.dashboard-container[_ngcontent-%COMP%]{padding:1rem}.org-tree-section[_ngcontent-%COMP%]   .section-header[_ngcontent-%COMP%]{padding:1rem 1.25rem}.org-tree-section[_ngcontent-%COMP%]   .section-header[_ngcontent-%COMP%]   .header-info[_ngcontent-%COMP%]   .header-icon[_ngcontent-%COMP%]{width:40px;height:40px}.org-tree-section[_ngcontent-%COMP%]   .section-header[_ngcontent-%COMP%]   .header-info[_ngcontent-%COMP%]   .header-icon[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:20px}.org-tree-section[_ngcontent-%COMP%]   .section-header[_ngcontent-%COMP%]   .header-info[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:1.1rem}.org-tree-section[_ngcontent-%COMP%]   .tree-content[_ngcontent-%COMP%]{padding:1rem}}"]})};var dt=class t extends Ke{constructor(e){super(e,"users")}getByUsername(e){return this.get(`/by-username/${e}`)}getByEmail(e){return this.get(`/by-email/${e}`)}changePassword(e,i){return this.post(`/${e}/change-password`,i)}assignRoles(e,i){return this.post(`/${e}/roles`,i)}removeRoles(e,i){return this.http.delete(`${this.getApiUrl()}/${e}/roles`,{body:i}).pipe(hi(n=>this.handleError(n)))}activate(e){return this.post(`/${e}/activate`)}deactivate(e){return this.post(`/${e}/deactivate`)}static \u0275fac=function(i){return new(i||t)(We(Qe))};static \u0275prov=Xe({token:t,factory:t.\u0275fac,providedIn:"root"})};var jc=["*"];function qc(t,e){t&1&&D(0,"mat-spinner",4)}function Hc(t,e){if(t&1&&(s(0),d(1,"translate")),t&2){let i=C(2);T(" ",m(1,1,i.saveLabel)," ")}}function Yc(t,e){if(t&1){let i=z();r(0,"mat-dialog-actions",1)(1,"button",2),P("click",function(){I(i);let o=C();return k(o.onCancel())}),s(2),d(3,"translate"),a(),r(4,"button",3),P("click",function(){I(i);let o=C();return k(o.onSave())}),b(5,qc,1,0,"mat-spinner",4)(6,Hc,2,3),a()()}if(t&2){let i=C();l(),v("disabled",i.loading),l(),T(" ",m(3,4,i.cancelLabel)," "),l(2),v("disabled",i.saveDisabled||i.loading),l(),y(i.loading?5:6)}}var j=class t{title="";saveLabel="common.save";cancelLabel="common.cancel";saveDisabled=!1;loading=!1;showActions=!0;save=new Ee;cancel=new Ee;onSave(){this.save.emit()}onCancel(){this.cancel.emit()}static \u0275fac=function(i){return new(i||t)};static \u0275cmp=E({type:t,selectors:[["app-base-dialog"]],inputs:{title:"title",saveLabel:"saveLabel",cancelLabel:"cancelLabel",saveDisabled:"saveDisabled",loading:"loading",showActions:"showActions"},outputs:{save:"save",cancel:"cancel"},standalone:!1,ngContentSelectors:jc,decls:6,vars:4,consts:[["mat-dialog-title",""],["align","end"],["mat-button","",3,"click","disabled"],["mat-raised-button","","color","primary",3,"click","disabled"],["diameter","20"]],template:function(i,n){i&1&&(vo(),r(0,"h2",0),s(1),d(2,"translate"),a(),r(3,"mat-dialog-content"),_o(4),a(),b(5,Yc,7,6,"mat-dialog-actions",1)),i&2&&(l(),f(m(2,2,n.title)),l(4),y(n.showActions?5:-1))},dependencies:[fe,Ko,Jo,Zo,Oe,A],styles:["[_nghost-%COMP%]{display:block}h2[mat-dialog-title][_ngcontent-%COMP%]{margin:0;padding:1.25rem 1.5rem;font-size:1.25rem;font-weight:600;background:linear-gradient(135deg,var(--primary-color) 0%,#059669 100%);color:var(--white-color);border-bottom:none;letter-spacing:.3px}mat-dialog-content[_ngcontent-%COMP%]{padding:1.5rem!important;max-height:70vh;background-color:#f8f9fa;overflow-x:hidden}  .dialog-form{display:flex;flex-direction:column;gap:1.25rem;width:100%}  .dialog-form mat-form-field{width:100%;--mdc-outlined-text-field-outline-color: #e0e0e0;--mdc-outlined-text-field-hover-outline-color: var(--primary-color);--mdc-outlined-text-field-focus-outline-color: var(--primary-color);--mdc-outlined-text-field-label-text-color: var(--p-color);--mdc-outlined-text-field-focus-label-text-color: var(--primary-color);--mdc-outlined-text-field-container-shape: 8px}  .dialog-form mat-form-field .mat-mdc-form-field-icon-prefix{color:var(--p-color);padding-right:12px;margin-right:4px}  .dialog-form mat-form-field .mdc-text-field--outlined .mdc-notched-outline .mdc-notched-outline__leading{width:16px}  .dialog-form mat-form-field mat-error{color:#f44336;font-size:.75rem;font-weight:500}  .dialog-form .form-section{background:#fff;border-radius:12px;border:1px solid #e9ecef;overflow:hidden;transition:all .3s ease}  .dialog-form .form-section:hover{box-shadow:0 4px 12px #00000014}  .dialog-form .form-section .section-header{display:flex;align-items:center;gap:12px;padding:14px 16px;border-bottom:1px solid #e9ecef}  .dialog-form .form-section .section-header .section-icon{width:36px;height:36px;border-radius:10px;display:flex;align-items:center;justify-content:center}  .dialog-form .form-section .section-header .section-icon mat-icon{font-size:20px;width:20px;height:20px;color:#fff}  .dialog-form .form-section .section-header .section-title{font-size:.95rem;font-weight:600;color:var(--secondary-color);letter-spacing:.3px}  .dialog-form .form-section .section-content{padding:20px 16px 8px;display:flex;flex-direction:column;gap:4px}  .dialog-form .section-purple .section-header{background:linear-gradient(135deg,#f8f4ff,#f0e8ff)}  .dialog-form .section-purple .section-header .section-icon{background:linear-gradient(135deg,#7c3aed,#5b21b6)}  .dialog-form .section-purple .section-header .section-title{color:#5b21b6}  .dialog-form .section-purple mat-form-field{--mdc-outlined-text-field-hover-outline-color: #7c3aed;--mdc-outlined-text-field-focus-outline-color: #7c3aed;--mdc-outlined-text-field-focus-label-text-color: #7c3aed}  .dialog-form .section-purple mat-form-field .mat-mdc-form-field-icon-prefix{color:#7c3aed}  .dialog-form .section-primary .section-header{background:linear-gradient(135deg,#f0fdf4,#dcfce7)}  .dialog-form .section-primary .section-header .section-icon{background:linear-gradient(135deg,var(--primary-color) 0%,#059669 100%)}  .dialog-form .section-primary .section-header .section-title{color:#047857}  .dialog-form .section-primary mat-form-field{--mdc-outlined-text-field-hover-outline-color: var(--primary-color);--mdc-outlined-text-field-focus-outline-color: var(--primary-color);--mdc-outlined-text-field-focus-label-text-color: var(--primary-color)}  .dialog-form .section-primary mat-form-field .mat-mdc-form-field-icon-prefix{color:var(--primary-color)}  .dialog-form .section-orange .section-header{background:linear-gradient(135deg,#fffbeb,#fef3c7)}  .dialog-form .section-orange .section-header .section-icon{background:linear-gradient(135deg,var(--custom-btn-bg-color) 0%,#d97706 100%)}  .dialog-form .section-orange .section-header .section-title{color:#b45309}  .dialog-form .section-orange mat-form-field{--mdc-outlined-text-field-hover-outline-color: var(--custom-btn-bg-color);--mdc-outlined-text-field-focus-outline-color: var(--custom-btn-bg-color);--mdc-outlined-text-field-focus-label-text-color: var(--custom-btn-bg-color)}  .dialog-form .section-blue .section-header{background:linear-gradient(135deg,#eff6ff,#dbeafe)}  .dialog-form .section-blue .section-header .section-icon{background:linear-gradient(135deg,#3b82f6,#1d4ed8)}  .dialog-form .section-blue .section-header .section-title{color:#1e40af}  .dialog-form .section-blue mat-form-field{--mdc-outlined-text-field-hover-outline-color: #3b82f6;--mdc-outlined-text-field-focus-outline-color: #3b82f6;--mdc-outlined-text-field-focus-label-text-color: #3b82f6}  .dialog-form .section-blue mat-form-field .mat-mdc-form-field-icon-prefix{color:#3b82f6}  .dialog-form .form-row{display:flex;gap:1rem}  .dialog-form .form-row mat-form-field{flex:1}  .dialog-form .mat-mdc-icon-button{--mdc-icon-button-icon-color: var(--p-color)}  .dialog-form .mat-mdc-icon-button:hover{--mdc-icon-button-icon-color: var(--primary-color)}mat-dialog-actions[_ngcontent-%COMP%]{padding:1rem 1.5rem!important;border-top:1px solid #e9ecef;background-color:#fff;gap:.75rem}mat-dialog-actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{min-width:110px;border-radius:8px;font-weight:500;letter-spacing:.3px;transition:all .2s ease}mat-dialog-actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]   mat-spinner[_ngcontent-%COMP%]{display:inline-block}mat-dialog-actions[_ngcontent-%COMP%]   button[mat-button][_ngcontent-%COMP%]{color:var(--p-color);border:1px solid #e0e0e0}mat-dialog-actions[_ngcontent-%COMP%]   button[mat-button][_ngcontent-%COMP%]:hover{background-color:#f5f5f5;border-color:#bdbdbd}mat-dialog-actions[_ngcontent-%COMP%]   button[mat-raised-button][_ngcontent-%COMP%]{background:linear-gradient(135deg,var(--primary-color) 0%,#059669 100%);box-shadow:0 2px 8px #81b29a66}mat-dialog-actions[_ngcontent-%COMP%]   button[mat-raised-button][_ngcontent-%COMP%]:hover:not([disabled]){box-shadow:0 4px 12px #81b29a80;transform:translateY(-1px)}mat-dialog-actions[_ngcontent-%COMP%]   button[mat-raised-button][disabled][_ngcontent-%COMP%]{background:#e0e0e0;box-shadow:none}"]})};function Xc(t,e){t&1&&(r(0,"mat-error"),s(1),d(2,"translate"),a()),t&2&&(l(),f(m(2,1,"admin.users.errors.usernameRequired")))}function Wc(t,e){t&1&&(r(0,"mat-error"),s(1),d(2,"translate"),a()),t&2&&(l(),f(m(2,1,"admin.users.errors.usernameMinLength")))}function Qc(t,e){t&1&&(r(0,"mat-error"),s(1),d(2,"translate"),a()),t&2&&(l(),f(m(2,1,"admin.users.errors.passwordRequired")))}function Kc(t,e){t&1&&(r(0,"mat-error"),s(1),d(2,"translate"),a()),t&2&&(l(),f(m(2,1,"admin.users.errors.passwordMinLength")))}function Zc(t,e){if(t&1){let i=z();r(0,"div",2)(1,"div",4)(2,"div",5)(3,"mat-icon"),s(4,"security"),a()(),r(5,"div",6),s(6),d(7,"translate"),a()(),r(8,"div",7)(9,"mat-form-field",8)(10,"mat-label"),s(11),d(12,"translate"),a(),r(13,"mat-icon",9),s(14,"person"),a(),D(15,"input",16),d(16,"translate"),b(17,Xc,3,3,"mat-error"),b(18,Wc,3,3,"mat-error"),a(),r(19,"mat-form-field",8)(20,"mat-label"),s(21),d(22,"translate"),a(),r(23,"mat-icon",9),s(24,"lock"),a(),D(25,"input",17),d(26,"translate"),r(27,"button",18),P("click",function(){I(i);let o=C();return k(o.hidePassword=!o.hidePassword)}),r(28,"mat-icon"),s(29),a()(),b(30,Qc,3,3,"mat-error"),b(31,Kc,3,3,"mat-error"),a()()()}if(t&2){let i,n,o,c,p=C();l(6),f(m(7,11,"admin.users.accountInfo")),l(5),f(m(12,13,"admin.users.username")),l(4),v("placeholder",m(16,15,"admin.users.placeholders.username")),l(2),y((i=p.form.get("username"))!=null&&i.hasError("required")&&((i=p.form.get("username"))!=null&&i.touched)?17:-1),l(),y((n=p.form.get("username"))!=null&&n.hasError("minlength")&&((n=p.form.get("username"))!=null&&n.touched)?18:-1),l(3),f(m(22,17,"admin.users.password")),l(4),v("type",p.hidePassword?"password":"text")("placeholder",m(26,19,"admin.users.placeholders.password")),l(4),f(p.hidePassword?"visibility_off":"visibility"),l(),y((o=p.form.get("password"))!=null&&o.hasError("required")&&((o=p.form.get("password"))!=null&&o.touched)?30:-1),l(),y((c=p.form.get("password"))!=null&&c.hasError("minlength")&&((c=p.form.get("password"))!=null&&c.touched)?31:-1)}}function Jc(t,e){t&1&&(r(0,"mat-error"),s(1),d(2,"translate"),a()),t&2&&(l(),f(m(2,1,"admin.users.errors.emailRequired")))}function ep(t,e){t&1&&(r(0,"mat-error"),s(1),d(2,"translate"),a()),t&2&&(l(),f(m(2,1,"admin.users.errors.emailInvalid")))}var ri=class t{constructor(e,i,n,o,c,p){this.fb=e;this.dialogRef=i;this.usersService=n;this.snackbar=o;this.translationService=c;this.data=p;this.isEditMode=p.mode==="edit"}form;isEditMode;hidePassword=!0;loading=!1;ngOnInit(){this.initForm()}initForm(){this.isEditMode?this.form=this.fb.group({email:[this.data.user?.email,[M.required,M.email]],firstName:[this.data.user?.firstName],lastName:[this.data.user?.lastName],phoneNumber:[this.data.user?.phoneNumber]}):this.form=this.fb.group({username:["",[M.required,M.minLength(3)]],email:["",[M.required,M.email]],password:["",[M.required,M.minLength(6)]],firstName:[""],lastName:[""],phoneNumber:[""]})}translate(e){return this.translationService.translate(e)}onSubmit(){if(this.form.invalid){this.form.markAllAsTouched();return}if(this.loading=!0,this.isEditMode){let e={email:this.form.value.email,firstName:this.form.value.firstName,lastName:this.form.value.lastName,phoneNumber:this.form.value.phoneNumber};this.usersService.update(this.data.user.id,e).subscribe({next:()=>{this.snackbar.success(this.translate("admin.users.userUpdated")),this.dialogRef.close(!0)},error:i=>{this.snackbar.error(i.message||this.translate("admin.users.errors.updateFailed")),this.loading=!1}})}else{let e={username:this.form.value.username,email:this.form.value.email,password:this.form.value.password,firstName:this.form.value.firstName,lastName:this.form.value.lastName,phoneNumber:this.form.value.phoneNumber};this.usersService.create(e).subscribe({next:()=>{this.snackbar.success(this.translate("admin.users.userCreated")),this.dialogRef.close(!0)},error:i=>{this.snackbar.error(i.message||this.translate("admin.users.errors.createFailed")),this.loading=!1}})}}onCancel(){this.dialogRef.close()}static \u0275fac=function(i){return new(i||t)(h(pe),h(G),h(dt),h(L),h(N),h($))};static \u0275cmp=E({type:t,selectors:[["app-user-dialog"]],standalone:!1,decls:56,vars:38,consts:[[3,"save","cancel","title","saveLabel","saveDisabled","loading"],[1,"dialog-form",3,"formGroup"],[1,"form-section","section-purple"],[1,"form-section","section-primary"],[1,"section-header"],[1,"section-icon"],[1,"section-title"],[1,"section-content"],["appearance","outline"],["matPrefix",""],["matInput","","formControlName","email","type","email",3,"placeholder"],["matInput","","formControlName","phoneNumber",3,"placeholder"],[1,"form-section","section-orange"],[1,"form-row"],["matInput","","formControlName","firstName",3,"placeholder"],["matInput","","formControlName","lastName",3,"placeholder"],["matInput","","formControlName","username",3,"placeholder"],["matInput","","formControlName","password",3,"type","placeholder"],["mat-icon-button","","matSuffix","","type","button",3,"click"]],template:function(i,n){if(i&1&&(r(0,"app-base-dialog",0),P("save",function(){return n.onSubmit()})("cancel",function(){return n.onCancel()}),r(1,"form",1),b(2,Zc,32,21,"div",2),r(3,"div",3)(4,"div",4)(5,"div",5)(6,"mat-icon"),s(7,"contact_mail"),a()(),r(8,"div",6),s(9),d(10,"translate"),a()(),r(11,"div",7)(12,"mat-form-field",8)(13,"mat-label"),s(14),d(15,"translate"),a(),r(16,"mat-icon",9),s(17,"email"),a(),D(18,"input",10),d(19,"translate"),b(20,Jc,3,3,"mat-error"),b(21,ep,3,3,"mat-error"),a(),r(22,"mat-form-field",8)(23,"mat-label"),s(24),d(25,"translate"),a(),r(26,"mat-icon",9),s(27,"phone"),a(),D(28,"input",11),d(29,"translate"),a()()(),r(30,"div",12)(31,"div",4)(32,"div",5)(33,"mat-icon"),s(34,"badge"),a()(),r(35,"div",6),s(36),d(37,"translate"),a()(),r(38,"div",7)(39,"div",13)(40,"mat-form-field",8)(41,"mat-label"),s(42),d(43,"translate"),a(),r(44,"mat-icon",9),s(45,"person_outline"),a(),D(46,"input",14),d(47,"translate"),a(),r(48,"mat-form-field",8)(49,"mat-label"),s(50),d(51,"translate"),a(),r(52,"mat-icon",9),s(53,"person"),a(),D(54,"input",15),d(55,"translate"),a()()()()()()),i&2){let o,c;v("title",n.isEditMode?"admin.users.editUser":"admin.users.createUser")("saveLabel",n.isEditMode?"common.update":"common.create")("saveDisabled",n.form.invalid)("loading",n.loading),l(),v("formGroup",n.form),l(),y(n.isEditMode?-1:2),l(7),f(m(10,18,"admin.users.contactInfo")),l(5),f(m(15,20,"admin.users.email")),l(4),v("placeholder",m(19,22,"admin.users.placeholders.email")),l(2),y((o=n.form.get("email"))!=null&&o.hasError("required")&&((o=n.form.get("email"))!=null&&o.touched)?20:-1),l(),y((c=n.form.get("email"))!=null&&c.hasError("email")&&((c=n.form.get("email"))!=null&&c.touched)?21:-1),l(3),f(m(25,24,"admin.users.phoneNumber")),l(4),v("placeholder",m(29,26,"admin.users.placeholders.phoneNumber")),l(8),f(m(37,28,"admin.users.personalInfo")),l(6),f(m(43,30,"admin.users.firstName")),l(4),v("placeholder",m(47,32,"admin.users.placeholders.firstName")),l(4),f(m(51,34,"admin.users.lastName")),l(4),v("placeholder",m(55,36,"admin.users.placeholders.lastName"))}},dependencies:[le,Me,ne,re,ce,se,_e,K,Q,ke,oe,ot,at,B,j,A],encapsulation:2})};var Ce=class t{constructor(e,i){this.dialogRef=e;this.title=i.title,this.message=i.message,this.confirmLabel=i.confirmLabel||"common.confirm",this.cancelLabel=i.cancelLabel||"common.cancel",this.confirmColor=i.confirmColor||"warn",this.icon=i.icon||"warning"}title;message;confirmLabel;cancelLabel;confirmColor;icon;onConfirm(){this.dialogRef.close(!0)}onCancel(){this.dialogRef.close(!1)}static \u0275fac=function(i){return new(i||t)(h(G),h($))};static \u0275cmp=E({type:t,selectors:[["app-confirm-dialog"]],standalone:!1,decls:17,vars:15,consts:[[1,"confirm-dialog"],[1,"dialog-icon",3,"ngClass"],[1,"dialog-title"],[1,"dialog-message"],[1,"dialog-actions"],["mat-button","",1,"cancel-btn",3,"click"],["mat-raised-button","",1,"confirm-btn",3,"click","color"]],template:function(i,n){i&1&&(r(0,"div",0)(1,"div",1)(2,"mat-icon"),s(3),a()(),r(4,"h2",2),s(5),d(6,"translate"),a(),r(7,"p",3),s(8),d(9,"translate"),a(),r(10,"div",4)(11,"button",5),P("click",function(){return n.onCancel()}),s(12),d(13,"translate"),a(),r(14,"button",6),P("click",function(){return n.onConfirm()}),s(15),d(16,"translate"),a()()()),i&2&&(l(),v("ngClass",n.confirmColor),l(2),f(n.icon),l(2),f(m(6,7,n.title)),l(3),f(m(9,9,n.message)),l(4),T(" ",m(13,11,n.cancelLabel)," "),l(2),v("color",n.confirmColor),l(),T(" ",m(16,13,n.confirmLabel)," "))},dependencies:[xo,fe,B,A],styles:[".confirm-dialog[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;padding:24px;text-align:center;min-width:320px;max-width:400px}.confirm-dialog[_ngcontent-%COMP%]   .dialog-icon[_ngcontent-%COMP%]{width:64px;height:64px;border-radius:50%;display:flex;align-items:center;justify-content:center;margin-bottom:16px}.confirm-dialog[_ngcontent-%COMP%]   .dialog-icon[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:32px;width:32px;height:32px;color:#fff}.confirm-dialog[_ngcontent-%COMP%]   .dialog-icon.warn[_ngcontent-%COMP%]{background:linear-gradient(135deg,#ef4444,#dc2626)}.confirm-dialog[_ngcontent-%COMP%]   .dialog-icon.primary[_ngcontent-%COMP%]{background:linear-gradient(135deg,var(--primary-color) 0%,#059669 100%)}.confirm-dialog[_ngcontent-%COMP%]   .dialog-icon.accent[_ngcontent-%COMP%]{background:linear-gradient(135deg,var(--custom-btn-bg-color) 0%,#d97706 100%)}.confirm-dialog[_ngcontent-%COMP%]   .dialog-title[_ngcontent-%COMP%]{margin:0 0 8px;font-size:1.25rem;font-weight:600;color:var(--secondary-color)}.confirm-dialog[_ngcontent-%COMP%]   .dialog-message[_ngcontent-%COMP%]{margin:0 0 24px;font-size:.95rem;color:var(--p-color);line-height:1.5}.confirm-dialog[_ngcontent-%COMP%]   .dialog-actions[_ngcontent-%COMP%]{display:flex;gap:12px;width:100%;justify-content:center}.confirm-dialog[_ngcontent-%COMP%]   .dialog-actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{min-width:100px;border-radius:8px;font-weight:500;transition:all .2s ease}.confirm-dialog[_ngcontent-%COMP%]   .dialog-actions[_ngcontent-%COMP%]   .cancel-btn[_ngcontent-%COMP%]{color:var(--p-color);border:1px solid #e0e0e0}.confirm-dialog[_ngcontent-%COMP%]   .dialog-actions[_ngcontent-%COMP%]   .cancel-btn[_ngcontent-%COMP%]:hover{background-color:#f5f5f5;border-color:#bdbdbd}.confirm-dialog[_ngcontent-%COMP%]   .dialog-actions[_ngcontent-%COMP%]   .confirm-btn[color=warn][_ngcontent-%COMP%]{background:linear-gradient(135deg,#ef4444,#dc2626);box-shadow:0 2px 8px #ef444466}.confirm-dialog[_ngcontent-%COMP%]   .dialog-actions[_ngcontent-%COMP%]   .confirm-btn[color=warn][_ngcontent-%COMP%]:hover{box-shadow:0 4px 12px #ef444480;transform:translateY(-1px)}.confirm-dialog[_ngcontent-%COMP%]   .dialog-actions[_ngcontent-%COMP%]   .confirm-btn[color=primary][_ngcontent-%COMP%]{background:linear-gradient(135deg,var(--primary-color) 0%,#059669 100%);box-shadow:0 2px 8px #81b29a66}.confirm-dialog[_ngcontent-%COMP%]   .dialog-actions[_ngcontent-%COMP%]   .confirm-btn[color=primary][_ngcontent-%COMP%]:hover{box-shadow:0 4px 12px #81b29a80;transform:translateY(-1px)}"]})};var np=()=>[5,10,25,50],op=()=>({panelClass:"paginator-select-panel"}),ll=(t,e)=>e.key,ap=(t,e)=>e.value,rp=(t,e)=>e.icon;function lp(t,e){if(t&1&&(r(0,"h1"),s(1),d(2,"translate"),a()),t&2){let i=C(2);l(),f(m(2,1,i.config.title))}}function sp(t,e){if(t&1&&(r(0,"p"),s(1),d(2,"translate"),a()),t&2){let i=C(2);l(),f(m(2,1,i.config.subtitle))}}function cp(t,e){if(t&1&&(r(0,"mat-icon"),s(1),a()),t&2){let i=C(3);l(),f(i.config.addButton.icon)}}function pp(t,e){if(t&1){let i=z();r(0,"button",15),P("click",function(){I(i);let o=C(2);return k(o.addClick.emit())}),b(1,cp,2,1,"mat-icon"),s(2),d(3,"translate"),a()}if(t&2){let i=C(2);v("color",i.config.addButton.color||"primary"),l(),y(i.config.addButton.icon?1:-1),l(),T(" ",m(3,3,i.config.addButton.label)," ")}}function dp(t,e){if(t&1&&(r(0,"div",2)(1,"div",13),b(2,lp,3,3,"h1"),b(3,sp,3,3,"p"),a(),b(4,pp,4,5,"button",14),a()),t&2){let i=C();l(2),y(i.config.title?2:-1),l(),y(i.config.subtitle?3:-1),l(),y(i.config.addButton?4:-1)}}function mp(t,e){if(t&1){let i=z();r(0,"button",25),P("click",function(){I(i);let o=C(3);return o.searchTerm="",k(o.onSearch())}),r(1,"mat-icon"),s(2,"close"),a()()}}function fp(t,e){if(t&1){let i=z();r(0,"div",17)(1,"mat-icon",22),s(2,"search"),a(),r(3,"input",23),d(4,"translate"),Et("ngModelChange",function(o){I(i);let c=C(2);return St(c.searchTerm,o)||(c.searchTerm=o),k(o)}),P("keyup",function(o){I(i);let c=C(2);return k(c.onSearchKeyup(o))}),a(),b(5,mp,3,0,"button",24),a()}if(t&2){let i=C(2);l(3),wt("ngModel",i.searchTerm),v("placeholder",i.config.searchPlaceholder||m(4,3,"common.searchPlaceholder")),l(2),y(i.searchTerm?5:-1)}}function gp(t,e){if(t&1&&(r(0,"mat-icon",31),s(1),a()),t&2){let i=C(2).$implicit;l(),f(i.icon)}}function up(t,e){if(t&1){let i=z();r(0,"mat-form-field",29)(1,"mat-label"),s(2),d(3,"translate"),a(),r(4,"input",30),d(5,"translate"),Et("ngModelChange",function(o){I(i);let c=C().$implicit,p=C(3);return St(p.filterValues[c.key],o)||(p.filterValues[c.key]=o),k(o)}),a(),b(6,gp,2,1,"mat-icon",31),a()}if(t&2){let i=C().$implicit,n=C(3);jt("width",i.width||"180px"),l(2),f(m(3,6,i.label)),l(2),wt("ngModel",n.filterValues[i.key]),v("placeholder",m(5,8,i.placeholder||"")),l(2),y(i.icon?6:-1)}}function hp(t,e){if(t&1&&(r(0,"mat-option",33),s(1),d(2,"translate"),a()),t&2){let i=e.$implicit;v("value",i.value),l(),f(m(2,2,i.label))}}function vp(t,e){if(t&1){let i=z();r(0,"mat-form-field",29)(1,"mat-label"),s(2),d(3,"translate"),a(),r(4,"mat-select",32),Et("valueChange",function(o){I(i);let c=C().$implicit,p=C(3);return St(p.filterValues[c.key],o)||(p.filterValues[c.key]=o),k(o)}),Y(5,hp,3,4,"mat-option",33,ap),a()()}if(t&2){let i=C().$implicit,n=C(3);jt("width",i.width||"180px"),l(2),f(m(3,4,i.label)),l(2),wt("value",n.filterValues[i.key]),l(),X(i.options)}}function _p(t,e){if(t&1){let i=z();r(0,"mat-form-field",29)(1,"mat-label"),s(2),d(3,"translate"),a(),r(4,"input",34),d(5,"translate"),Et("ngModelChange",function(o){I(i);let c=C().$implicit,p=C(3);return St(p.filterValues[c.key],o)||(p.filterValues[c.key]=o),k(o)}),a(),D(6,"mat-datepicker-toggle",35)(7,"mat-datepicker",null,0),a()}if(t&2){let i=it(8),n=C().$implicit,o=C(3);jt("width",n.width||"180px"),l(2),f(m(3,7,n.label)),l(2),v("matDatepicker",i),wt("ngModel",o.filterValues[n.key]),v("placeholder",m(5,9,n.placeholder||"")),l(2),v("for",i)}}function Cp(t,e){if(t&1){let i=z();r(0,"div",28)(1,"mat-slide-toggle",36),Et("ngModelChange",function(o){I(i);let c=C().$implicit,p=C(3);return St(p.filterValues[c.key],o)||(p.filterValues[c.key]=o),k(o)}),s(2),d(3,"translate"),a()()}if(t&2){let i=C().$implicit,n=C(3);l(),wt("ngModel",n.filterValues[i.key]),l(),T(" ",m(3,2,i.label)," ")}}function xp(t,e){if(t&1&&(r(0,"div",26),b(1,up,7,10,"mat-form-field",27)(2,vp,7,6,"mat-form-field",27)(3,_p,9,11,"mat-form-field",27)(4,Cp,4,4,"div",28),a()),t&2){let i,n=e.$implicit;l(),y((i=n.type)==="text"?1:i==="select"?2:i==="date"?3:i==="checkbox"?4:-1)}}function bp(t,e){if(t&1&&(r(0,"div",18),Y(1,xp,5,1,"div",26,ll),a()),t&2){let i=C(2);l(),X(i.config.filters)}}function yp(t,e){if(t&1){let i=z();r(0,"div",3)(1,"div",16),b(2,fp,6,5,"div",17),b(3,bp,3,0,"div",18),r(4,"div",19)(5,"button",20),P("click",function(){I(i);let o=C();return k(o.applyFilters())}),r(6,"mat-icon"),s(7,"filter_list"),a(),r(8,"span"),s(9),d(10,"translate"),a()(),r(11,"button",21),P("click",function(){I(i);let o=C();return k(o.clearFilters())}),r(12,"mat-icon"),s(13,"refresh"),a(),r(14,"span"),s(15),d(16,"translate"),a()()()()()}if(t&2){let i=C();l(2),y(i.config.showSearch!==!1?2:-1),l(),y(i.config.filters!=null&&i.config.filters.length?3:-1),l(6),f(m(10,4,"common.apply")),l(6),f(m(16,6,"common.clear"))}}function Mp(t,e){t&1&&(r(0,"div",5)(1,"div",37),D(2,"mat-spinner",38),r(3,"span"),s(4),d(5,"translate"),a()()()),t&2&&(l(4),f(m(5,1,"common.loading")))}function Pp(t,e){if(t&1&&(r(0,"th",41),s(1),d(2,"translate"),a()),t&2){let i=C().$implicit;jt("width",i.width),v("mat-sort-header",i.sortable?i.key:""),l(),T(" ",m(2,4,i.header)," ")}}function Op(t,e){if(t&1&&(r(0,"span",44),s(1),d(2,"translate"),a()),t&2){let i=C().$implicit,n=C().$implicit;Ve("badge-primary",n.badge(i).color==="primary")("badge-accent",n.badge(i).color==="accent")("badge-warn",n.badge(i).color==="warn")("badge-success",n.badge(i).color==="success")("badge-info",n.badge(i).color==="info"),l(),T(" ",m(2,11,n.badge(i).text)," ")}}function Dp(t,e){if(t&1&&(s(0),d(1,"date")),t&2){let i=C().$implicit,n=C().$implicit;T(" ",It(1,1,n.cell?n.cell(i):i[n.key],n.dateFormat||"mediumDate")," ")}}function wp(t,e){if(t&1&&s(0),t&2){let i=C().$implicit,n=C().$implicit;T(" ",n.cell?n.cell(i):i[n.key]," ")}}function Sp(t,e){if(t&1&&(r(0,"td",42),b(1,Op,3,13,"span",43)(2,Dp,2,4)(3,wp,1,1),a()),t&2){let i=C().$implicit;l(),y(i.badge?1:i.type==="date"?2:3)}}function Ep(t,e){if(t&1&&(In(0,7),gt(1,Pp,3,6,"th",39)(2,Sp,4,1,"td",40),kn()),t&2){let i=e.$implicit;v("matColumnDef",i.key)}}function Ip(t,e){t&1&&(r(0,"th",47),s(1),d(2,"translate"),a()),t&2&&(l(),f(m(2,1,"common.actions")))}function kp(t,e){if(t&1){let i=z();r(0,"button",50),d(1,"translate"),P("click",function(){I(i);let o=C().$implicit,c=C().$implicit;return k(o.onClick(c))}),r(2,"mat-icon"),s(3),a()()}if(t&2){let i=C().$implicit;Ve("primary",i.color==="primary")("accent",i.color==="accent")("warn",i.color==="warn")("success",i.color==="success")("info",i.color==="info"),v("matTooltip",m(1,12,i.tooltip)),l(3),f(i.icon)}}function Ap(t,e){if(t&1&&b(0,kp,4,14,"button",49),t&2){let i=e.$implicit,n=C().$implicit,o=C(2);y(o.isActionVisible(i,n)?0:-1)}}function Tp(t,e){if(t&1&&(r(0,"td",48),Y(1,Ap,1,1,null,null,rp),a()),t&2){let i=C(2);l(),X(i.config.actions)}}function Bp(t,e){t&1&&(In(0,8),gt(1,Ip,3,3,"th",45)(2,Tp,3,0,"td",46),kn())}function Np(t,e){t&1&&D(0,"tr",51)}function Rp(t,e){t&1&&D(0,"tr",52)}function Fp(t,e){if(t&1&&(r(0,"tr",53)(1,"td",54)(2,"div",55)(3,"mat-icon"),s(4,"inbox"),a(),r(5,"span"),s(6),d(7,"translate"),a()()()()),t&2){let i=C();l(),uo("colspan",i.displayedColumns.length),l(5),f(m(7,2,"common.noData"))}}var Se=class t{constructor(e){this.cdr=e}data=[];config;totalCount=0;loading=!1;pageSize=10;pageIndex=0;pageChange=new Ee;sortChange=new Ee;filterChange=new Ee;searchChange=new Ee;addClick=new Ee;paginator;sort;displayedColumns=[];dataSource=new Uo;filterValues={};searchTerm="";ngOnChanges(e){e.data&&(this.dataSource.data=[...this.data],this.cdr.detectChanges()),e.config&&this.config&&(this.initColumns(),this.initFilterDefaults())}initColumns(){this.displayedColumns=[...this.config.selectable?["select"]:[],...this.config.columns.map(e=>e.key),...this.config.actions?.length?["actions"]:[]]}initFilterDefaults(){this.config.filters&&this.config.filters.forEach(e=>{e.defaultValue!==void 0&&(this.filterValues[e.key]=e.defaultValue)})}onFilterChange(e,i){this.filterValues[e]=i}applyFilters(){this.filterChange.emit(En(Sn({},this.filterValues),{search:this.searchTerm}))}onSearch(){this.searchChange.emit(this.searchTerm),this.applyFilters()}onSearchKeyup(e){e.key==="Enter"&&this.onSearch()}clearFilters(){this.searchTerm="",this.filterValues={},this.initFilterDefaults(),this.filterChange.emit(En(Sn({},this.filterValues),{search:""}))}onPageChange(e){this.pageChange.emit(e)}onSortChange(e){this.sortChange.emit(e)}isActionVisible(e,i){return e.visible?e.visible(i):!0}static \u0275fac=function(i){return new(i||t)(h(W))};static \u0275cmp=E({type:t,selectors:[["app-data-grid"]],viewQuery:function(i,n){if(i&1&&Dt(wi,5)(Di,5),i&2){let o;ut(o=ht())&&(n.paginator=o.first),ut(o=ht())&&(n.sort=o.first)}},inputs:{data:"data",config:"config",totalCount:"totalCount",loading:"loading",pageSize:"pageSize",pageIndex:"pageIndex"},outputs:{pageChange:"pageChange",sortChange:"sortChange",filterChange:"filterChange",searchChange:"searchChange",addClick:"addClick"},standalone:!1,features:[Ot],decls:13,vars:15,consts:[["picker",""],[1,"data-grid-container"],[1,"grid-header"],[1,"filters-section"],[1,"table-wrapper"],[1,"loading-overlay"],["mat-table","","matSort","",3,"matSortChange","dataSource"],[3,"matColumnDef"],["matColumnDef","actions"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["class","mat-row",4,"matNoDataRow"],["aria-label","Select page",1,"modern-paginator",3,"page","length","pageSize","pageIndex","pageSizeOptions","showFirstLastButtons","selectConfig"],[1,"header-content"],["mat-raised-button","",3,"color"],["mat-raised-button","",3,"click","color"],[1,"filters-container"],[1,"search-wrapper"],[1,"filters-group"],[1,"filter-actions"],["mat-flat-button","","color","primary",3,"click"],["mat-stroked-button","",3,"click"],[1,"search-icon"],[1,"search-input",3,"ngModelChange","keyup","ngModel","placeholder"],[1,"clear-search"],[1,"clear-search",3,"click"],[1,"filter-item"],["appearance","outline",3,"width"],[1,"toggle-filter"],["appearance","outline"],["matInput","",3,"ngModelChange","ngModel","placeholder"],["matSuffix",""],[3,"valueChange","value"],[3,"value"],["matInput","",3,"ngModelChange","matDatepicker","ngModel","placeholder"],["matSuffix","",3,"for"],[3,"ngModelChange","ngModel"],[1,"loading-content"],["diameter","40"],["mat-header-cell","",3,"mat-sort-header","width",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["mat-header-cell","",3,"mat-sort-header"],["mat-cell",""],[1,"status-badge",3,"badge-primary","badge-accent","badge-warn","badge-success","badge-info"],[1,"status-badge"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","","class","actions-cell",4,"matCellDef"],["mat-header-cell",""],["mat-cell","",1,"actions-cell"],["mat-icon-button","","matTooltipClass","action-tooltip",1,"action-btn",3,"primary","accent","warn","success","info","matTooltip"],["mat-icon-button","","matTooltipClass","action-tooltip",1,"action-btn",3,"click","matTooltip"],["mat-header-row",""],["mat-row",""],[1,"mat-row"],[1,"mat-cell","no-data"],[1,"empty-state"]],template:function(i,n){i&1&&(r(0,"div",1),b(1,dp,5,3,"div",2),b(2,yp,17,8,"div",3),r(3,"div",4),b(4,Mp,6,3,"div",5),r(5,"table",6),P("matSortChange",function(c){return n.onSortChange(c)}),Y(6,Ep,3,1,"ng-container",7,ll),b(8,Bp,3,0,"ng-container",8),gt(9,Np,1,0,"tr",9)(10,Rp,1,0,"tr",10)(11,Fp,8,4,"tr",11),a(),r(12,"mat-paginator",12),P("page",function(c){return n.onPageChange(c)}),a()()()),i&2&&(l(),y(n.config.title||n.config.addButton?1:-1),l(),y(n.config.filters!=null&&n.config.filters.length||n.config.showSearch!==!1?2:-1),l(2),y(n.loading?4:-1),l(),v("dataSource",n.dataSource),l(),X(n.config.columns),l(2),y(n.config.actions!=null&&n.config.actions.length?8:-1),l(),v("matHeaderRowDef",n.displayedColumns),l(),v("matRowDefColumns",n.displayedColumns),l(2),v("length",n.totalCount||n.data.length)("pageSize",n.config.defaultPageSize||n.pageSize)("pageIndex",n.pageIndex)("pageSizeOptions",n.config.pageSizeOptions||An(13,np))("showFirstLastButtons",!0)("selectConfig",An(14,op)))},dependencies:[Me,ne,So,_e,K,Q,ot,fe,at,B,Io,Ao,Ro,To,ko,Fo,Bo,No,Vo,zo,Lo,yi,Di,ra,wi,Te,Ae,ea,Oe,Mi,Pi,Oi,kt,A],styles:[`[_nghost-%COMP%]{display:block}.data-grid-container[_ngcontent-%COMP%]{background:#fff;border-radius:14px;box-shadow:0 4px 6px -1px #0000001a,0 2px 4px -1px #0000000f;padding:1.5rem}.grid-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:1.5rem;padding-bottom:1.5rem;border-bottom:1px solid #e5e7eb}.grid-header[_ngcontent-%COMP%]   .header-content[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{margin:0;font-size:1.875rem;font-weight:700;color:#3d405b;letter-spacing:-.025em;line-height:1.2}.grid-header[_ngcontent-%COMP%]   .header-content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:.5rem 0 0;color:#6c757d;font-size:.9375rem}.grid-header[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{display:inline-flex;align-items:center;gap:.5rem;padding:.75rem 1.5rem;font-weight:600;font-size:.875rem;border-radius:10px;transition:.2s ease;box-shadow:0 1px 2px #0000000d;background:linear-gradient(135deg,#81b29a,#6a9b82);color:#fff;border:none}.grid-header[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:20px;width:20px;height:20px}.grid-header[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{transform:translateY(-2px);box-shadow:0 4px 6px -1px #0000001a,0 2px 4px -1px #0000000f;background:linear-gradient(135deg,#6a9b82,#5f8d75)}.grid-header[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:active{transform:translateY(0)}.filters-section[_ngcontent-%COMP%]{margin-bottom:1.5rem;padding:1rem;background:#f9fafb;border-radius:10px}.filters-container[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;align-items:center;gap:1rem}.search-wrapper[_ngcontent-%COMP%]{position:relative;display:flex;align-items:center;flex:1;min-width:280px;max-width:400px}.search-wrapper[_ngcontent-%COMP%]   .search-icon[_ngcontent-%COMP%]{position:absolute;left:14px;color:#9ca3af;font-size:20px;width:20px;height:20px;pointer-events:none;transition:color .15s ease}.search-wrapper[_ngcontent-%COMP%]   .search-input[_ngcontent-%COMP%]{width:100%;height:44px;padding:0 44px;font-size:.9375rem;color:#3d405b;background:#fff;border:2px solid #e5e7eb;border-radius:9999px;outline:none;transition:.2s ease}.search-wrapper[_ngcontent-%COMP%]   .search-input[_ngcontent-%COMP%]::placeholder{color:#9ca3af}.search-wrapper[_ngcontent-%COMP%]   .search-input[_ngcontent-%COMP%]:hover{background:#f3f4f6}.search-wrapper[_ngcontent-%COMP%]   .search-input[_ngcontent-%COMP%]:focus{background:#fff;border-color:#81b29a;box-shadow:0 0 0 3px #81b29a1a}.search-wrapper[_ngcontent-%COMP%]   .search-input[_ngcontent-%COMP%]:focus + .search-icon[_ngcontent-%COMP%], .search-wrapper[_ngcontent-%COMP%]   .search-input[_ngcontent-%COMP%]:focus ~ .search-icon[_ngcontent-%COMP%]{color:#81b29a}.search-wrapper[_ngcontent-%COMP%]   .clear-search[_ngcontent-%COMP%]{position:absolute;right:8px;display:flex;align-items:center;justify-content:center;width:28px;height:28px;padding:0;background:#f3f4f6;border:none;border-radius:50%;cursor:pointer;transition:.15s ease}.search-wrapper[_ngcontent-%COMP%]   .clear-search[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:16px;width:16px;height:16px;color:#6c757d}.search-wrapper[_ngcontent-%COMP%]   .clear-search[_ngcontent-%COMP%]:hover{background:#e4e7eb}.search-wrapper[_ngcontent-%COMP%]   .clear-search[_ngcontent-%COMP%]:hover   mat-icon[_ngcontent-%COMP%]{color:#3d405b}.filters-group[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;align-items:center;gap:.75rem}.filter-item[_ngcontent-%COMP%]   mat-form-field[_ngcontent-%COMP%]     .mat-mdc-form-field-subscript-wrapper{display:none}.filter-item[_ngcontent-%COMP%]   mat-form-field[_ngcontent-%COMP%]     .mat-mdc-text-field-wrapper{background:#fff;border-radius:10px;padding:0 1rem}.filter-item[_ngcontent-%COMP%]   mat-form-field[_ngcontent-%COMP%]     .mat-mdc-select-value{padding-left:.5rem}.filter-item[_ngcontent-%COMP%]   mat-form-field[_ngcontent-%COMP%]     .mat-mdc-form-field-infix{padding:.75rem 0;min-height:auto}.filter-item[_ngcontent-%COMP%]   mat-form-field[_ngcontent-%COMP%]     .mdc-text-field--outlined{--mdc-outlined-text-field-container-shape: 10px}.filter-item[_ngcontent-%COMP%]   mat-form-field[_ngcontent-%COMP%]     .mdc-text-field--outlined .mdc-notched-outline__leading, .filter-item[_ngcontent-%COMP%]   mat-form-field[_ngcontent-%COMP%]     .mdc-text-field--outlined .mdc-notched-outline__notch, .filter-item[_ngcontent-%COMP%]   mat-form-field[_ngcontent-%COMP%]     .mdc-text-field--outlined .mdc-notched-outline__trailing{border-color:#e5e7eb}.filter-item[_ngcontent-%COMP%]   mat-form-field[_ngcontent-%COMP%]     .mat-mdc-form-field:hover .mdc-notched-outline .mdc-notched-outline__leading, .filter-item[_ngcontent-%COMP%]   mat-form-field[_ngcontent-%COMP%]     .mat-mdc-form-field:hover .mdc-notched-outline .mdc-notched-outline__notch, .filter-item[_ngcontent-%COMP%]   mat-form-field[_ngcontent-%COMP%]     .mat-mdc-form-field:hover .mdc-notched-outline .mdc-notched-outline__trailing{border-color:#c8ccd5}.filter-item[_ngcontent-%COMP%]   mat-form-field[_ngcontent-%COMP%]     .mat-mdc-form-field.mat-focused .mdc-notched-outline .mdc-notched-outline__leading, .filter-item[_ngcontent-%COMP%]   mat-form-field[_ngcontent-%COMP%]     .mat-mdc-form-field.mat-focused .mdc-notched-outline .mdc-notched-outline__notch, .filter-item[_ngcontent-%COMP%]   mat-form-field[_ngcontent-%COMP%]     .mat-mdc-form-field.mat-focused .mdc-notched-outline .mdc-notched-outline__trailing{border-color:#81b29a;border-width:2px}.filter-item[_ngcontent-%COMP%]   mat-form-field[_ngcontent-%COMP%]     .mat-mdc-select-panel{background:#fff;border:1px solid #e5e7eb;border-radius:10px;box-shadow:0 10px 15px -3px #0000001a,0 4px 6px -2px #0000000d}.filter-item[_ngcontent-%COMP%]   mat-form-field[_ngcontent-%COMP%]     .mat-mdc-select-panel .mat-mdc-option{background:#fff}.filter-item[_ngcontent-%COMP%]   mat-form-field[_ngcontent-%COMP%]     .mat-mdc-select-panel .mat-mdc-option:hover:not(.mat-mdc-option-disabled){background:#f3f4f6}.filter-item[_ngcontent-%COMP%]   mat-form-field[_ngcontent-%COMP%]     .mat-mdc-select-panel .mat-mdc-option.mat-mdc-option-active{background:#81b29a1a}.filter-item[_ngcontent-%COMP%]   mat-form-field[_ngcontent-%COMP%]     .mat-mdc-select-panel .mat-mdc-option.mdc-list-item--selected{background:#81b29a1a}  .action-tooltip{background:#3d405b!important;color:#fff!important;font-size:.75rem;padding:.5rem .75rem;border-radius:6px;box-shadow:0 4px 6px -1px #0000001a,0 2px 4px -1px #0000000f}  .mat-mdc-select-panel{background:#fff!important;border:1px solid #e5e7eb;border-radius:10px;box-shadow:0 10px 15px -3px #0000001a,0 4px 6px -2px #0000000d}  .mat-mdc-select-panel .mat-mdc-option{background:#fff}  .mat-mdc-select-panel .mat-mdc-option:hover:not(.mat-mdc-option-disabled){background:#f3f4f6}  .mat-mdc-select-panel .mat-mdc-option.mat-mdc-option-active{background:#81b29a1a}  .mat-mdc-select-panel .mat-mdc-option.mdc-list-item--selected{background:#81b29a1a}.toggle-filter[_ngcontent-%COMP%]{display:flex;align-items:center;height:56px;padding:0 1rem;background:#f9fafb;border-radius:10px}.toggle-filter[_ngcontent-%COMP%]   mat-slide-toggle[_ngcontent-%COMP%]{--mdc-switch-selected-track-color: #81B29A;--mdc-switch-selected-handle-color: #ffffff;--mdc-switch-selected-hover-track-color: #6a9b82}.filter-actions[_ngcontent-%COMP%]{display:flex;gap:.5rem;margin-left:auto}.filter-actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{display:inline-flex;align-items:center;gap:.375rem;padding:.625rem 1rem;font-weight:500;font-size:.875rem;border-radius:10px;transition:.2s ease}.filter-actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:18px;width:18px;height:18px}.filter-actions[_ngcontent-%COMP%]   button[color=primary][_ngcontent-%COMP%]{box-shadow:0 1px 2px #0000000d}.filter-actions[_ngcontent-%COMP%]   button[color=primary][_ngcontent-%COMP%]:hover{box-shadow:0 4px 6px -1px #0000001a,0 2px 4px -1px #0000000f}.filter-actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:not([color]){color:#6c757d;border-color:#e5e7eb}.filter-actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:not([color]):hover{background:#f3f4f6;color:#3d405b}.loading-overlay[_ngcontent-%COMP%]{position:absolute;inset:0;background:#ffffffd9;-webkit-backdrop-filter:blur(2px);backdrop-filter:blur(2px);display:flex;align-items:center;justify-content:center;z-index:10;border-radius:10px}.loading-content[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;gap:.75rem;padding:1.5rem;background:#fff;border-radius:10px;box-shadow:0 4px 6px -1px #0000001a,0 2px 4px -1px #0000000f}.loading-content[_ngcontent-%COMP%]   mat-spinner[_ngcontent-%COMP%]{--mdc-circular-progress-active-indicator-color: #81B29A}.loading-content[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{color:#6c757d;font-size:.875rem;font-weight:500}.table-wrapper[_ngcontent-%COMP%]{position:relative;border:1px solid #e5e7eb;border-radius:10px;overflow:hidden;min-height:200px}.table-wrapper[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]{width:100%}.table-wrapper[_ngcontent-%COMP%]   .mat-mdc-header-row[_ngcontent-%COMP%]{background:linear-gradient(135deg,#81b29a,#6a9b82)}.table-wrapper[_ngcontent-%COMP%]   .mat-mdc-header-cell[_ngcontent-%COMP%]{color:#fff;font-weight:600;font-size:.75rem;text-transform:uppercase;letter-spacing:.05em;padding:1rem 1.25rem;border-bottom:none}.table-wrapper[_ngcontent-%COMP%]   .mat-mdc-header-cell[_ngcontent-%COMP%]   .mat-sort-header-arrow[_ngcontent-%COMP%], .table-wrapper[_ngcontent-%COMP%]   .mat-mdc-header-cell[_ngcontent-%COMP%]   .mat-sort-header-container[_ngcontent-%COMP%]   .mat-sort-header-content[_ngcontent-%COMP%]{color:#fff}.table-wrapper[_ngcontent-%COMP%]   .mat-mdc-cell[_ngcontent-%COMP%]{color:#3d405b;font-size:.875rem;padding:1rem 1.25rem;border-bottom:1px solid #e5e7eb}.table-wrapper[_ngcontent-%COMP%]   .mat-mdc-row[_ngcontent-%COMP%]{transition:background .15s ease;background:#fff}.table-wrapper[_ngcontent-%COMP%]   .mat-mdc-row[_ngcontent-%COMP%]:nth-child(2n){background:#f9fafb}.table-wrapper[_ngcontent-%COMP%]   .mat-mdc-row[_ngcontent-%COMP%]:hover{background:#81b29a1a}.table-wrapper[_ngcontent-%COMP%]   .mat-mdc-row[_ngcontent-%COMP%]:last-child   .mat-mdc-cell[_ngcontent-%COMP%]{border-bottom:none}.table-wrapper[_ngcontent-%COMP%]   .actions-cell[_ngcontent-%COMP%]{padding:.5rem 1rem}.table-wrapper[_ngcontent-%COMP%]   .action-btn[_ngcontent-%COMP%]{width:36px;height:36px;margin:0 2px;transition:.2s ease;border-radius:6px}.table-wrapper[_ngcontent-%COMP%]   .action-btn[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:20px;color:#6c757d;transition:color .15s ease}.table-wrapper[_ngcontent-%COMP%]   .action-btn[_ngcontent-%COMP%]:hover{background:#81b29a1a}.table-wrapper[_ngcontent-%COMP%]   .action-btn[_ngcontent-%COMP%]:hover   mat-icon[_ngcontent-%COMP%]{color:#81b29a}.table-wrapper[_ngcontent-%COMP%]   .action-btn.primary[_ngcontent-%COMP%]:hover{background:#81b29a1a}.table-wrapper[_ngcontent-%COMP%]   .action-btn.primary[_ngcontent-%COMP%]:hover   mat-icon[_ngcontent-%COMP%]{color:#81b29a}.table-wrapper[_ngcontent-%COMP%]   .action-btn.warn[_ngcontent-%COMP%]:hover{background:#ef44441a}.table-wrapper[_ngcontent-%COMP%]   .action-btn.warn[_ngcontent-%COMP%]:hover   mat-icon[_ngcontent-%COMP%]{color:#ef4444}.table-wrapper[_ngcontent-%COMP%]   .action-btn.success[_ngcontent-%COMP%]:hover{background:#22c55e1a}.table-wrapper[_ngcontent-%COMP%]   .action-btn.success[_ngcontent-%COMP%]:hover   mat-icon[_ngcontent-%COMP%]{color:#22c55e}.table-wrapper[_ngcontent-%COMP%]   .action-btn.info[_ngcontent-%COMP%]:hover{background:#3b82f61a}.table-wrapper[_ngcontent-%COMP%]   .action-btn.info[_ngcontent-%COMP%]:hover   mat-icon[_ngcontent-%COMP%]{color:#3b82f6}.table-wrapper[_ngcontent-%COMP%]   .action-btn.accent[_ngcontent-%COMP%]:hover{background:#f4a2611a}.table-wrapper[_ngcontent-%COMP%]   .action-btn.accent[_ngcontent-%COMP%]:hover   mat-icon[_ngcontent-%COMP%]{color:#f4a261}.table-wrapper[_ngcontent-%COMP%]   .status-badge[_ngcontent-%COMP%]{display:inline-flex;align-items:center;padding:.25rem .75rem;border-radius:9999px;font-size:.75rem;font-weight:600;text-transform:uppercase;letter-spacing:.025em}.table-wrapper[_ngcontent-%COMP%]   .status-badge.badge-success[_ngcontent-%COMP%]{background:#22c55e1a;color:#22c55e}.table-wrapper[_ngcontent-%COMP%]   .status-badge.badge-warn[_ngcontent-%COMP%]{background:#ef44441a;color:#ef4444}.table-wrapper[_ngcontent-%COMP%]   .status-badge.badge-accent[_ngcontent-%COMP%]{background:#f4a2611a;color:#f4a261}.table-wrapper[_ngcontent-%COMP%]   .status-badge.badge-info[_ngcontent-%COMP%]{background:#3b82f61a;color:#3b82f6}.table-wrapper[_ngcontent-%COMP%]   .status-badge.badge-primary[_ngcontent-%COMP%]{background:#81b29a1a;color:#81b29a}.table-wrapper[_ngcontent-%COMP%]   .no-data[_ngcontent-%COMP%]{padding:0}.table-wrapper[_ngcontent-%COMP%]   .empty-state[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;gap:.75rem;padding:4rem 2rem;color:#9ca3af}.table-wrapper[_ngcontent-%COMP%]   .empty-state[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:48px;width:48px;height:48px;opacity:.5}.table-wrapper[_ngcontent-%COMP%]   .empty-state[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:.9375rem}.table-wrapper[_ngcontent-%COMP%]   .paginator-wrapper[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;padding:1rem 1.25rem;border-top:1px solid #e5e7eb;background:#f9fafb;gap:1rem;flex-wrap:wrap}.table-wrapper[_ngcontent-%COMP%]   .paginator-info[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.5rem;color:#6c757d;font-size:.875rem}.table-wrapper[_ngcontent-%COMP%]   .paginator-info[_ngcontent-%COMP%]   .paginator-range[_ngcontent-%COMP%]{font-weight:500;color:#3d405b}.table-wrapper[_ngcontent-%COMP%]   .paginator-controls[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.25rem}.table-wrapper[_ngcontent-%COMP%]   .paginator-btn[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;width:36px;height:36px;padding:0;background:#fff;border:1px solid #e5e7eb;border-radius:6px;color:#6c757d;cursor:pointer;transition:.2s ease}.table-wrapper[_ngcontent-%COMP%]   .paginator-btn[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:20px;width:20px;height:20px}.table-wrapper[_ngcontent-%COMP%]   .paginator-btn[_ngcontent-%COMP%]:hover:not(:disabled){background:#81b29a1a;border-color:#81b29a;color:#81b29a}.table-wrapper[_ngcontent-%COMP%]   .paginator-btn[_ngcontent-%COMP%]:disabled{opacity:.4;cursor:not-allowed;background:#f9fafb}.table-wrapper[_ngcontent-%COMP%]   .page-numbers[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.25rem;margin:0 .5rem}.table-wrapper[_ngcontent-%COMP%]   .page-btn[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;min-width:36px;height:36px;padding:0 .5rem;background:#fff;border:1px solid #e5e7eb;border-radius:6px;color:#6c757d;font-size:.875rem;font-weight:500;cursor:pointer;transition:.2s ease}.table-wrapper[_ngcontent-%COMP%]   .page-btn[_ngcontent-%COMP%]:hover:not(.active):not(.ellipsis){background:#f3f4f6;border-color:#c8ccd5}.table-wrapper[_ngcontent-%COMP%]   .page-btn.active[_ngcontent-%COMP%]{background:#81b29a;border-color:#81b29a;color:#fff}.table-wrapper[_ngcontent-%COMP%]   .page-btn.ellipsis[_ngcontent-%COMP%]{cursor:default;color:#9ca3af;background:#f9fafb;border-color:#e5e7eb}.table-wrapper[_ngcontent-%COMP%]   .page-size-select[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.5rem;margin-left:1rem;padding-left:1rem;border-left:1px solid #e5e7eb}.table-wrapper[_ngcontent-%COMP%]   .page-size-select[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{color:#6c757d;font-size:.8125rem;white-space:nowrap}.table-wrapper[_ngcontent-%COMP%]   .page-size-select[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{padding:.375rem 2rem .375rem .75rem;font-size:.875rem;color:#3d405b;background:#fff url("data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' fill='none' viewBox='0 0 20 20'%3e%3cpath stroke='%236b7280' stroke-linecap='round' stroke-linejoin='round' stroke-width='1.5' d='M6 8l4 4 4-4'/%3e%3c/svg%3e") right .5rem center/1rem no-repeat;border:1px solid #e5e7eb;border-radius:6px;cursor:pointer;appearance:none;transition:.2s ease}.table-wrapper[_ngcontent-%COMP%]   .page-size-select[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]:hover{border-color:#c8ccd5}.table-wrapper[_ngcontent-%COMP%]   .page-size-select[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]:focus{outline:none;border-color:#81b29a;box-shadow:0 0 0 3px #81b29a1a}.table-wrapper[_ngcontent-%COMP%]   mat-paginator[_ngcontent-%COMP%]{border-top:1px solid #e5e7eb}.table-wrapper[_ngcontent-%COMP%]   mat-paginator[_ngcontent-%COMP%]     .mat-mdc-paginator-outer-container{padding:.25rem 0}.table-wrapper[_ngcontent-%COMP%]   mat-paginator[_ngcontent-%COMP%]     .mat-mdc-paginator-container{padding:.5rem 1.25rem;min-height:60px;gap:1rem}.table-wrapper[_ngcontent-%COMP%]   mat-paginator[_ngcontent-%COMP%]     .mat-mdc-paginator-page-size{align-items:center;gap:.5rem}.table-wrapper[_ngcontent-%COMP%]   mat-paginator[_ngcontent-%COMP%]     .mat-mdc-paginator-page-size-label{color:#6c757d;font-size:.8125rem;margin:0}.table-wrapper[_ngcontent-%COMP%]   mat-paginator[_ngcontent-%COMP%]     .mat-mdc-paginator-page-size-select{margin:0;width:auto}.table-wrapper[_ngcontent-%COMP%]   mat-paginator[_ngcontent-%COMP%]     .mat-mdc-paginator-page-size-select .mat-mdc-text-field-wrapper{padding:0 .75rem;background:#fff;border:1px solid #e5e7eb;border-radius:6px}.table-wrapper[_ngcontent-%COMP%]   mat-paginator[_ngcontent-%COMP%]     .mat-mdc-paginator-page-size-select .mat-mdc-text-field-wrapper:hover{border-color:#c8ccd5}.table-wrapper[_ngcontent-%COMP%]   mat-paginator[_ngcontent-%COMP%]     .mat-mdc-paginator-page-size-select .mdc-notched-outline{display:none}.table-wrapper[_ngcontent-%COMP%]   mat-paginator[_ngcontent-%COMP%]     .mat-mdc-paginator-page-size-select .mat-mdc-select-value{font-size:.875rem}.table-wrapper[_ngcontent-%COMP%]   mat-paginator[_ngcontent-%COMP%]     .mat-mdc-paginator-range-label{color:#6c757d;font-size:.875rem;margin:0 1rem}.table-wrapper[_ngcontent-%COMP%]   mat-paginator[_ngcontent-%COMP%]     .mat-mdc-paginator-range-label:before{content:"Showing ";color:#9ca3af}.table-wrapper[_ngcontent-%COMP%]   mat-paginator[_ngcontent-%COMP%]     .mat-mdc-paginator-range-actions{gap:.25rem}.table-wrapper[_ngcontent-%COMP%]   mat-paginator[_ngcontent-%COMP%]     .mat-mdc-paginator-navigation-previous, .table-wrapper[_ngcontent-%COMP%]   mat-paginator[_ngcontent-%COMP%]     .mat-mdc-paginator-navigation-next, .table-wrapper[_ngcontent-%COMP%]   mat-paginator[_ngcontent-%COMP%]     .mat-mdc-paginator-navigation-first, .table-wrapper[_ngcontent-%COMP%]   mat-paginator[_ngcontent-%COMP%]     .mat-mdc-paginator-navigation-last{width:36px;height:36px;background:#fff;border:1px solid #e5e7eb;border-radius:6px;transition:.2s ease}.table-wrapper[_ngcontent-%COMP%]   mat-paginator[_ngcontent-%COMP%]     .mat-mdc-paginator-navigation-previous .mat-mdc-button-persistent-ripple, .table-wrapper[_ngcontent-%COMP%]   mat-paginator[_ngcontent-%COMP%]     .mat-mdc-paginator-navigation-next .mat-mdc-button-persistent-ripple, .table-wrapper[_ngcontent-%COMP%]   mat-paginator[_ngcontent-%COMP%]     .mat-mdc-paginator-navigation-first .mat-mdc-button-persistent-ripple, .table-wrapper[_ngcontent-%COMP%]   mat-paginator[_ngcontent-%COMP%]     .mat-mdc-paginator-navigation-last .mat-mdc-button-persistent-ripple{border-radius:6px}.table-wrapper[_ngcontent-%COMP%]   mat-paginator[_ngcontent-%COMP%]     .mat-mdc-paginator-navigation-previous:hover:not(:disabled), .table-wrapper[_ngcontent-%COMP%]   mat-paginator[_ngcontent-%COMP%]     .mat-mdc-paginator-navigation-next:hover:not(:disabled), .table-wrapper[_ngcontent-%COMP%]   mat-paginator[_ngcontent-%COMP%]     .mat-mdc-paginator-navigation-first:hover:not(:disabled), .table-wrapper[_ngcontent-%COMP%]   mat-paginator[_ngcontent-%COMP%]     .mat-mdc-paginator-navigation-last:hover:not(:disabled){background:#81b29a1a;border-color:#81b29a}.table-wrapper[_ngcontent-%COMP%]   mat-paginator[_ngcontent-%COMP%]     .mat-mdc-paginator-navigation-previous:hover:not(:disabled) .mat-mdc-paginator-icon, .table-wrapper[_ngcontent-%COMP%]   mat-paginator[_ngcontent-%COMP%]     .mat-mdc-paginator-navigation-next:hover:not(:disabled) .mat-mdc-paginator-icon, .table-wrapper[_ngcontent-%COMP%]   mat-paginator[_ngcontent-%COMP%]     .mat-mdc-paginator-navigation-first:hover:not(:disabled) .mat-mdc-paginator-icon, .table-wrapper[_ngcontent-%COMP%]   mat-paginator[_ngcontent-%COMP%]     .mat-mdc-paginator-navigation-last:hover:not(:disabled) .mat-mdc-paginator-icon{fill:#81b29a}.table-wrapper[_ngcontent-%COMP%]   mat-paginator[_ngcontent-%COMP%]     .mat-mdc-paginator-navigation-previous:disabled, .table-wrapper[_ngcontent-%COMP%]   mat-paginator[_ngcontent-%COMP%]     .mat-mdc-paginator-navigation-next:disabled, .table-wrapper[_ngcontent-%COMP%]   mat-paginator[_ngcontent-%COMP%]     .mat-mdc-paginator-navigation-first:disabled, .table-wrapper[_ngcontent-%COMP%]   mat-paginator[_ngcontent-%COMP%]     .mat-mdc-paginator-navigation-last:disabled{opacity:.4;background:#f9fafb}.table-wrapper[_ngcontent-%COMP%]   mat-paginator[_ngcontent-%COMP%]     .mat-mdc-paginator-navigation-previous .mat-mdc-paginator-icon, .table-wrapper[_ngcontent-%COMP%]   mat-paginator[_ngcontent-%COMP%]     .mat-mdc-paginator-navigation-next .mat-mdc-paginator-icon, .table-wrapper[_ngcontent-%COMP%]   mat-paginator[_ngcontent-%COMP%]     .mat-mdc-paginator-navigation-first .mat-mdc-paginator-icon, .table-wrapper[_ngcontent-%COMP%]   mat-paginator[_ngcontent-%COMP%]     .mat-mdc-paginator-navigation-last .mat-mdc-paginator-icon{fill:#6c757d;transition:fill .15s ease}[dir=rtl][_nghost-%COMP%]   .grid-header[_ngcontent-%COMP%]   button[_ngcontent-%COMP%], [dir=rtl]   [_nghost-%COMP%]   .grid-header[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{flex-direction:row-reverse}[dir=rtl][_nghost-%COMP%]   .search-wrapper[_ngcontent-%COMP%]   .search-icon[_ngcontent-%COMP%], [dir=rtl]   [_nghost-%COMP%]   .search-wrapper[_ngcontent-%COMP%]   .search-icon[_ngcontent-%COMP%]{left:auto;right:14px}[dir=rtl][_nghost-%COMP%]   .search-wrapper[_ngcontent-%COMP%]   .search-input[_ngcontent-%COMP%], [dir=rtl]   [_nghost-%COMP%]   .search-wrapper[_ngcontent-%COMP%]   .search-input[_ngcontent-%COMP%]{padding:0 44px}[dir=rtl][_nghost-%COMP%]   .search-wrapper[_ngcontent-%COMP%]   .clear-search[_ngcontent-%COMP%], [dir=rtl]   [_nghost-%COMP%]   .search-wrapper[_ngcontent-%COMP%]   .clear-search[_ngcontent-%COMP%]{right:auto;left:8px}[dir=rtl][_nghost-%COMP%]   .filter-actions[_ngcontent-%COMP%], [dir=rtl]   [_nghost-%COMP%]   .filter-actions[_ngcontent-%COMP%]{margin-left:unset;margin-right:auto}[dir=rtl][_nghost-%COMP%]   .filter-actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%], [dir=rtl]   [_nghost-%COMP%]   .filter-actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{flex-direction:row-reverse}[dir=rtl][_nghost-%COMP%]   .page-size-select[_ngcontent-%COMP%], [dir=rtl]   [_nghost-%COMP%]   .page-size-select[_ngcontent-%COMP%]{margin-left:unset;margin-right:1rem;padding-left:unset;padding-right:1rem;border-left:none;border-right:1px solid #e5e7eb}[dir=rtl][_nghost-%COMP%]   .page-size-select[_ngcontent-%COMP%]   select[_ngcontent-%COMP%], [dir=rtl]   [_nghost-%COMP%]   .page-size-select[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{background-position:left .5rem center;padding:.375rem .75rem .375rem 2rem}@media(max-width:1024px){.search-wrapper[_ngcontent-%COMP%]{max-width:320px}}@media(max-width:768px){.data-grid-container[_ngcontent-%COMP%]{padding:1rem;border-radius:10px}.grid-header[_ngcontent-%COMP%]{flex-direction:column;align-items:stretch;gap:1rem;text-align:center;padding-bottom:1rem}.grid-header[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{justify-content:center}.filters-section[_ngcontent-%COMP%]{padding:.75rem}.filters-container[_ngcontent-%COMP%]{flex-direction:column;align-items:stretch}.search-wrapper[_ngcontent-%COMP%]{max-width:none;min-width:unset}.filters-group[_ngcontent-%COMP%]{width:100%}.filters-group[_ngcontent-%COMP%]   .filter-item[_ngcontent-%COMP%]{flex:1;min-width:140px}.filters-group[_ngcontent-%COMP%]   .filter-item[_ngcontent-%COMP%]   mat-form-field[_ngcontent-%COMP%]{width:100%!important}.toggle-filter[_ngcontent-%COMP%]{width:100%;justify-content:center}.filter-actions[_ngcontent-%COMP%]{width:100%;margin-left:0}.filter-actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{flex:1;justify-content:center}.table-wrapper[_ngcontent-%COMP%]{border-radius:6px}.table-wrapper[_ngcontent-%COMP%]   .mat-mdc-header-cell[_ngcontent-%COMP%], .table-wrapper[_ngcontent-%COMP%]   .mat-mdc-cell[_ngcontent-%COMP%]{padding:.75rem}}@media(max-width:576px){.grid-header[_ngcontent-%COMP%]   .header-content[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:1.5rem}.filters-group[_ngcontent-%COMP%]   .filter-item[_ngcontent-%COMP%]{min-width:100%}.table-wrapper[_ngcontent-%COMP%]   .mat-mdc-header-cell[_ngcontent-%COMP%], .table-wrapper[_ngcontent-%COMP%]   .mat-mdc-cell[_ngcontent-%COMP%]{padding:.625rem .75rem;font-size:.8125rem}.table-wrapper[_ngcontent-%COMP%]   .action-btn[_ngcontent-%COMP%]{width:32px;height:32px}.table-wrapper[_ngcontent-%COMP%]   .action-btn[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:18px}.table-wrapper[_ngcontent-%COMP%]   .paginator-wrapper[_ngcontent-%COMP%]{flex-direction:column;gap:.75rem;padding:.75rem 1rem}.table-wrapper[_ngcontent-%COMP%]   .paginator-info[_ngcontent-%COMP%]{order:1}.table-wrapper[_ngcontent-%COMP%]   .paginator-controls[_ngcontent-%COMP%]{order:0;width:100%;justify-content:center}.table-wrapper[_ngcontent-%COMP%]   .page-size-select[_ngcontent-%COMP%]{order:2;margin:0;padding:0;border:none;width:100%;justify-content:center}.table-wrapper[_ngcontent-%COMP%]   mat-paginator[_ngcontent-%COMP%]     .mat-mdc-paginator-container{flex-wrap:wrap;justify-content:center;padding:.75rem 1rem;gap:.75rem}.table-wrapper[_ngcontent-%COMP%]   mat-paginator[_ngcontent-%COMP%]     .mat-mdc-paginator-page-size{margin:0}.table-wrapper[_ngcontent-%COMP%]   mat-paginator[_ngcontent-%COMP%]     .mat-mdc-paginator-range-label{margin:0;width:100%;text-align:center;order:-1}.table-wrapper[_ngcontent-%COMP%]   mat-paginator[_ngcontent-%COMP%]     .mat-mdc-paginator-range-label:before{display:none}.table-wrapper[_ngcontent-%COMP%]   mat-paginator[_ngcontent-%COMP%]     .mat-mdc-paginator-range-actions{width:100%;justify-content:center}}`]})};var ln=class t{constructor(e,i,n,o,c){this.usersService=e;this.snackbar=i;this.dialog=n;this.translationService=o;this.cdr=c}users=[];totalCount=0;loading=!1;pageNumber=1;pageSize=10;sortBy;sortDescending=!1;filterValues={};gridConfig;ngOnInit(){this.initGridConfig(),this.loadUsers()}initGridConfig(){this.gridConfig={title:"admin.users.title",subtitle:"admin.users.subtitle",addButton:{label:"admin.users.addUser",icon:"add",color:"primary"},showSearch:!0,searchPlaceholder:this.translate("admin.users.searchPlaceholder"),filters:[{key:"status",label:"admin.users.statusFilter",type:"select",defaultValue:"all",options:[{value:"all",label:"admin.users.all"},{value:"active",label:"admin.active"},{value:"inactive",label:"admin.inactive"}]}],columns:[{key:"username",header:"admin.users.username",sortable:!0},{key:"email",header:"admin.users.email",sortable:!0},{key:"fullName",header:"admin.users.fullName",cell:e=>`${e.firstName||""} ${e.lastName||""}`.trim()||"-"},{key:"phoneNumber",header:"admin.users.phone",cell:e=>e.phoneNumber||"-"},{key:"isActive",header:"admin.status",cell:e=>e.isActive?this.translate("admin.active"):this.translate("admin.inactive")},{key:"createdAt",header:"admin.users.created",sortable:!0,cell:e=>new Date(e.createdAt).toLocaleDateString()}],actions:[{icon:"edit",tooltip:"admin.users.edit",permission:F.USERS_UPDATE,color:"info",onClick:e=>this.openEditDialog(e)},{icon:"toggle_on",tooltip:"admin.users.deactivate",permission:F.USERS_ACTIVATE,color:"success",onClick:e=>this.toggleUserStatus(e),visible:e=>e.isActive},{icon:"toggle_off",tooltip:"admin.users.activate",permission:F.USERS_ACTIVATE,color:"warn",onClick:e=>this.toggleUserStatus(e),visible:e=>!e.isActive},{icon:"delete",tooltip:"admin.users.delete",permission:F.USERS_DELETE,color:"warn",onClick:e=>this.deleteUser(e)}],serverSide:!0,pageSizeOptions:[5,10,25,50],defaultPageSize:10}}translate(e){return this.translationService.translate(e)}loadUsers(){this.loading=!0;let e={pageNumber:this.pageNumber,pageSize:this.pageSize,search:this.filterValues.search||void 0,sortBy:this.sortBy,sortDescending:this.sortDescending};this.usersService.getPaged(e).subscribe({next:i=>{if(i.success&&i.data){let n=i.data.data,o=this.filterValues.status;o&&o!=="all"&&(n=n.filter(c=>o==="active"?c.isActive:!c.isActive)),this.users=n,this.totalCount=i.data.totalCount}this.loading=!1,this.cdr.detectChanges()},error:i=>{this.snackbar.error(i.message||this.translate("admin.users.errors.loadFailed")),this.loading=!1,this.cdr.detectChanges()}})}onPageChange(e){this.pageNumber=e.pageIndex+1,this.pageSize=e.pageSize,this.loadUsers()}onSortChange(e){this.sortBy=e.active,this.sortDescending=e.direction==="desc",this.loadUsers()}onFilterChange(e){this.filterValues=e,this.pageNumber=1,this.loadUsers()}openCreateDialog(){let e={mode:"create"};this.dialog.open(ri,{width:"700px",data:e,disableClose:!0}).afterClosed().subscribe(n=>{n&&this.loadUsers()})}openEditDialog(e){let i={mode:"edit",user:e};this.dialog.open(ri,{width:"700px",data:i,disableClose:!0}).afterClosed().subscribe(o=>{o&&this.loadUsers()})}toggleUserStatus(e){let i=e.isActive?this.usersService.deactivate(e.id):this.usersService.activate(e.id),n=e.isActive?this.translate("admin.users.userDeactivated"):this.translate("admin.users.userActivated");this.loading=!0,i.subscribe({next:()=>{this.snackbar.success(n),this.loadUsers()},error:o=>{this.snackbar.error(o.message),this.loading=!1}})}deleteUser(e){let i={title:this.translate("admin.users.deleteUser"),message:this.translate("admin.users.confirmDelete"),confirmLabel:this.translate("common.delete"),cancelLabel:this.translate("common.cancel"),confirmColor:"warn",icon:"delete"};this.dialog.open(Ce,{width:"400px",data:i}).afterClosed().subscribe(o=>{o&&(this.loading=!0,this.usersService.delete(e.id).subscribe({next:()=>{this.snackbar.success(this.translate("admin.users.userDeleted")),this.loadUsers()},error:c=>{this.snackbar.error(c.message||this.translate("admin.users.errors.deleteFailed")),this.loading=!1}}))})}static \u0275fac=function(i){return new(i||t)(h(dt),h(L),h(Pe),h(N),h(W))};static \u0275cmp=E({type:t,selectors:[["app-users-component"]],standalone:!1,decls:1,vars:6,consts:[[3,"pageChange","sortChange","filterChange","addClick","data","config","totalCount","loading","pageIndex","pageSize"]],template:function(i,n){i&1&&(r(0,"app-data-grid",0),P("pageChange",function(c){return n.onPageChange(c)})("sortChange",function(c){return n.onSortChange(c)})("filterChange",function(c){return n.onFilterChange(c)})("addClick",function(){return n.openCreateDialog()}),a()),i&2&&v("data",n.users)("config",n.gridConfig)("totalCount",n.totalCount)("loading",n.loading)("pageIndex",n.pageNumber-1)("pageSize",n.pageSize)},dependencies:[Se],encapsulation:2})};var mt=class t extends Ke{constructor(e){super(e,"roles")}getByName(e){return this.get(`/by-name/${encodeURIComponent(e)}`)}assignPermissions(e,i){return this.post(`/${e}/permissions`,i)}removePermissions(e,i){return this.http.delete(`${this.getApiUrl()}/${e}/permissions`,{body:i}).pipe(hi(n=>this.handleError(n)))}static \u0275fac=function(i){return new(i||t)(We(Qe))};static \u0275prov=Xe({token:t,factory:t.\u0275fac,providedIn:"root"})},sn=class t extends Ke{constructor(e){super(e,"permissions")}getByName(e){return this.get(`/by-name/${encodeURIComponent(e)}`)}getByModule(e){return this.get(`/by-module/${encodeURIComponent(e)}`)}getByRoleId(e){return this.get(`/by-role/${e}`)}getByUserId(e){return this.get(`/by-user/${e}`)}static \u0275fac=function(i){return new(i||t)(We(Qe))};static \u0275prov=Xe({token:t,factory:t.\u0275fac,providedIn:"root"})};function Vp(t,e){t&1&&(r(0,"mat-error"),s(1),d(2,"translate"),a()),t&2&&(l(),f(m(2,1,"admin.roles.errors.nameRequired")))}function zp(t,e){t&1&&(r(0,"mat-error"),s(1),d(2,"translate"),a()),t&2&&(l(),f(m(2,1,"admin.roles.errors.nameMinLength")))}function Lp(t,e){if(t&1&&(r(0,"form",1)(1,"div",3)(2,"div",4)(3,"div",5)(4,"mat-icon"),s(5,"admin_panel_settings"),a()(),r(6,"div",6),s(7),d(8,"translate"),a()(),r(9,"div",7)(10,"mat-form-field",8)(11,"mat-label"),s(12),d(13,"translate"),a(),r(14,"mat-icon",9),s(15,"label"),a(),D(16,"input",10),d(17,"translate"),b(18,Vp,3,3,"mat-error"),b(19,zp,3,3,"mat-error"),a(),r(20,"mat-form-field",8)(21,"mat-label"),s(22),d(23,"translate"),a(),r(24,"mat-icon",9),s(25,"description"),a(),D(26,"textarea",11),d(27,"translate"),a()()()()),t&2){let i,n,o=C();v("formGroup",o.form),l(7),f(m(8,8,"admin.roles.roleInfo")),l(5),f(m(13,10,"admin.roles.name")),l(4),v("placeholder",m(17,12,"admin.roles.placeholders.name")),l(2),y((i=o.form.get("name"))!=null&&i.hasError("required")&&((i=o.form.get("name"))!=null&&i.touched)?18:-1),l(),y((n=o.form.get("name"))!=null&&n.hasError("minlength")&&((n=o.form.get("name"))!=null&&n.touched)?19:-1),l(3),f(m(23,14,"admin.roles.description")),l(4),v("placeholder",m(27,16,"admin.roles.placeholders.description"))}}function Up(t,e){t&1&&(r(0,"mat-chip",16),s(1),d(2,"translate"),a()),t&2&&(l(),f(m(2,1,"admin.roles.system")))}function Gp(t,e){t&1&&(r(0,"mat-chip"),s(1),d(2,"translate"),a()),t&2&&(l(),f(m(2,1,"admin.roles.custom")))}function $p(t,e){if(t&1&&(r(0,"mat-chip"),s(1),a()),t&2){let i=e.$implicit;l(),f(i)}}function jp(t,e){t&1&&(r(0,"span",19),s(1),d(2,"translate"),a()),t&2&&(l(),f(m(2,1,"admin.roles.noPermissions")))}function qp(t,e){if(t&1&&(r(0,"div",2)(1,"div",3)(2,"div",4)(3,"div",5)(4,"mat-icon"),s(5,"admin_panel_settings"),a()(),r(6,"div",6),s(7),d(8,"translate"),a()(),r(9,"div",12)(10,"div",13)(11,"span",14),s(12),d(13,"translate"),a(),r(14,"span",15),s(15),a()(),r(16,"div",13)(17,"span",14),s(18),d(19,"translate"),a(),r(20,"span",15),s(21),a()(),r(22,"div",13)(23,"span",14),s(24),d(25,"translate"),a(),r(26,"span",15),b(27,Up,3,3,"mat-chip",16)(28,Gp,3,3,"mat-chip"),a()(),r(29,"div",13)(30,"span",14),s(31),d(32,"translate"),a(),r(33,"span",15),s(34),d(35,"date"),a()()()(),r(36,"div",17)(37,"div",4)(38,"div",5)(39,"mat-icon"),s(40,"security"),a()(),r(41,"div",6),s(42),d(43,"translate"),a()(),r(44,"div",7)(45,"div",18),Y(46,$p,2,1,"mat-chip",null,ho),b(48,jp,3,3,"span",19),a()()()()),t&2){let i=C();l(7),f(m(8,12,"admin.roles.roleInfo")),l(5),f(m(13,14,"admin.roles.name")),l(3),f(i.data.role.name),l(3),f(m(19,16,"admin.roles.description")),l(3),f(i.data.role.description||"-"),l(3),f(m(25,18,"admin.roles.type")),l(3),y(i.data.role.isSystemRole?27:28),l(4),f(m(32,20,"admin.roles.created")),l(3),f(It(35,22,i.data.role.createdAt,"medium")),l(8),de("",m(43,25,"admin.roles.permissions")," (",i.data.role.permissions.length||0,")"),l(4),X(i.data.role.permissions),l(2),y(i.data.role.permissions.length?-1:48)}}var Ut=class t{constructor(e,i,n,o,c,p){this.fb=e;this.dialogRef=i;this.rolesService=n;this.snackbar=o;this.translationService=c;this.data=p;this.mode=p.mode}form;mode;loading=!1;ngOnInit(){this.initForm()}get isCreateMode(){return this.mode==="create"}get isEditMode(){return this.mode==="edit"}get isViewMode(){return this.mode==="view"}get dialogTitle(){switch(this.mode){case"create":return"admin.roles.createRole";case"edit":return"admin.roles.editRole";case"view":return"admin.roles.viewRole";default:return""}}get saveLabel(){switch(this.mode){case"create":return"common.create";case"edit":return"common.update";default:return"common.close"}}initForm(){this.isViewMode?this.form=this.fb.group({}):this.isEditMode?this.form=this.fb.group({name:[this.data.role?.name,[M.required,M.minLength(2)]],description:[this.data.role?.description]}):this.form=this.fb.group({name:["",[M.required,M.minLength(2)]],description:[""]})}translate(e){return this.translationService.translate(e)}onSubmit(){if(this.isViewMode){this.dialogRef.close();return}if(this.form.invalid){this.form.markAllAsTouched();return}if(this.loading=!0,this.isEditMode){let e={name:this.form.value.name,description:this.form.value.description};this.rolesService.update(this.data.role.id,e).subscribe({next:()=>{this.snackbar.success(this.translate("admin.roles.roleUpdated")),this.dialogRef.close(!0)},error:i=>{this.snackbar.error(i.message||this.translate("admin.roles.errors.updateFailed")),this.loading=!1}})}else{let e={name:this.form.value.name,description:this.form.value.description};this.rolesService.create(e).subscribe({next:()=>{this.snackbar.success(this.translate("admin.roles.roleCreated")),this.dialogRef.close(!0)},error:i=>{this.snackbar.error(i.message||this.translate("admin.roles.errors.createFailed")),this.loading=!1}})}}onCancel(){this.dialogRef.close()}static \u0275fac=function(i){return new(i||t)(h(pe),h(G),h(mt),h(L),h(N),h($))};static \u0275cmp=E({type:t,selectors:[["app-role-dialog"]],standalone:!1,decls:3,vars:6,consts:[[3,"save","cancel","title","saveLabel","saveDisabled","loading"],[1,"dialog-form",3,"formGroup"],[1,"view-content"],[1,"form-section","section-primary"],[1,"section-header"],[1,"section-icon"],[1,"section-title"],[1,"section-content"],["appearance","outline"],["matPrefix",""],["matInput","","formControlName","name",3,"placeholder"],["matInput","","formControlName","description","rows","3",3,"placeholder"],[1,"section-content","view-fields"],[1,"view-field"],[1,"field-label"],[1,"field-value"],["color","primary"],[1,"form-section","section-purple"],[1,"permissions-list"],[1,"no-permissions"]],template:function(i,n){i&1&&(r(0,"app-base-dialog",0),P("save",function(){return n.onSubmit()})("cancel",function(){return n.onCancel()}),b(1,Lp,28,18,"form",1),b(2,qp,49,27,"div",2),a()),i&2&&(v("title",n.dialogTitle)("saveLabel",n.saveLabel)("saveDisabled",!n.isViewMode&&n.form.invalid)("loading",n.loading),l(),y(n.isCreateMode||n.isEditMode?1:-1),l(),y(n.isViewMode&&n.data.role?2:-1))},dependencies:[le,Me,ne,re,ce,se,_e,K,Q,ke,oe,B,rt,j,kt,A],styles:[".view-content[_ngcontent-%COMP%]   .view-fields[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:1rem}.view-content[_ngcontent-%COMP%]   .view-field[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:.25rem}.view-content[_ngcontent-%COMP%]   .view-field[_ngcontent-%COMP%]   .field-label[_ngcontent-%COMP%]{font-size:.75rem;color:var(--p-color);text-transform:uppercase;letter-spacing:.5px}.view-content[_ngcontent-%COMP%]   .view-field[_ngcontent-%COMP%]   .field-value[_ngcontent-%COMP%]{font-size:1rem;color:var(--dark-color)}.view-content[_ngcontent-%COMP%]   .permissions-list[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;gap:.5rem}.view-content[_ngcontent-%COMP%]   .permissions-list[_ngcontent-%COMP%]   .no-permissions[_ngcontent-%COMP%]{color:var(--p-color);font-style:italic}.permissions-manager[_ngcontent-%COMP%]   .loading-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;gap:1rem;padding:2rem;color:var(--p-color)}.permissions-manager[_ngcontent-%COMP%]   .role-info[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.5rem;padding:1rem;background:var(--section-bg-color);border-radius:var(--border-radius-small);margin-bottom:1rem}.permissions-manager[_ngcontent-%COMP%]   .role-info[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{color:var(--primary-color)}.permissions-manager[_ngcontent-%COMP%]   .role-info[_ngcontent-%COMP%]   .role-name[_ngcontent-%COMP%]{font-weight:600;color:var(--dark-color)}.permissions-manager[_ngcontent-%COMP%]   .role-info[_ngcontent-%COMP%]   .selected-count[_ngcontent-%COMP%]{color:var(--p-color);font-size:.875rem}.permissions-manager[_ngcontent-%COMP%]   .permission-groups[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:1rem;max-height:400px;overflow-y:auto;padding-right:.5rem}.permissions-manager[_ngcontent-%COMP%]   .permission-group[_ngcontent-%COMP%]{border:1px solid var(--bs-border-color);border-radius:var(--border-radius-small);overflow:hidden}.permissions-manager[_ngcontent-%COMP%]   .permission-group[_ngcontent-%COMP%]   .group-header[_ngcontent-%COMP%]{padding:.75rem 1rem;background:var(--section-bg-color);border-bottom:1px solid var(--bs-border-color)}.permissions-manager[_ngcontent-%COMP%]   .permission-group[_ngcontent-%COMP%]   .group-header[_ngcontent-%COMP%]   .group-name[_ngcontent-%COMP%]{font-weight:600;color:var(--secondary-color)}.permissions-manager[_ngcontent-%COMP%]   .permission-group[_ngcontent-%COMP%]   .group-permissions[_ngcontent-%COMP%]{padding:.75rem 1rem;display:flex;flex-direction:column;gap:.5rem}.permissions-manager[_ngcontent-%COMP%]   .permission-group[_ngcontent-%COMP%]   .group-permissions[_ngcontent-%COMP%]   .permission-item[_ngcontent-%COMP%]{display:block}.permissions-manager[_ngcontent-%COMP%]   .permission-group[_ngcontent-%COMP%]   .group-permissions[_ngcontent-%COMP%]   .permission-item[_ngcontent-%COMP%]   .permission-info[_ngcontent-%COMP%]{display:flex;flex-direction:column}.permissions-manager[_ngcontent-%COMP%]   .permission-group[_ngcontent-%COMP%]   .group-permissions[_ngcontent-%COMP%]   .permission-item[_ngcontent-%COMP%]   .permission-info[_ngcontent-%COMP%]   .permission-name[_ngcontent-%COMP%]{font-weight:500}.permissions-manager[_ngcontent-%COMP%]   .permission-group[_ngcontent-%COMP%]   .group-permissions[_ngcontent-%COMP%]   .permission-item[_ngcontent-%COMP%]   .permission-info[_ngcontent-%COMP%]   .permission-description[_ngcontent-%COMP%]{font-size:.75rem;color:var(--p-color)}"]})};var Hp=(t,e)=>e.module,Yp=(t,e)=>e.id;function Xp(t,e){t&1&&(r(0,"div",2),D(1,"mat-spinner",3),r(2,"span"),s(3),d(4,"translate"),a()()),t&2&&(l(3),f(m(4,1,"common.loading")))}function Wp(t,e){if(t&1&&(r(0,"span",14),s(1),a()),t&2){let i=C().$implicit;l(),f(i.description)}}function Qp(t,e){if(t&1&&(r(0,"mat-list-option",12)(1,"span",13),s(2),a(),b(3,Wp,2,1,"span",14),a()),t&2){let i=e.$implicit,n=C(3);v("value",i.id)("selected",n.selectedPermissionIds.has(i.id)),l(2),f(i.name),l(),y(i.description?3:-1)}}function Kp(t,e){if(t&1){let i=z();r(0,"mat-expansion-panel",8)(1,"mat-expansion-panel-header")(2,"mat-panel-title")(3,"mat-checkbox",10),P("click",function(o){return I(i),k(o.stopPropagation())})("change",function(){let o=I(i).$implicit,c=C(2);return k(c.toggleAllInGroup(o))}),s(4),a()(),r(5,"mat-panel-description"),s(6),a()(),r(7,"mat-selection-list",11),P("selectionChange",function(o){let c=I(i).$implicit,p=C(2);return k(p.onSelectionChange(o,c))}),Y(8,Qp,4,4,"mat-list-option",12,Yp),a()()}if(t&2){let i=e.$implicit,n=C(2);v("expanded",!0),l(3),v("checked",n.isAllSelectedInGroup(i))("indeterminate",n.isSomeSelectedInGroup(i)),l(),T(" ",i.module," "),l(2),de(" ",i.selectedIds.size,"/",i.permissions.length," "),l(2),X(i.permissions)}}function Zp(t,e){t&1&&(r(0,"div",9),s(1),d(2,"translate"),a()),t&2&&(l(),T(" ",m(2,1,"admin.roles.noPermissions")," "))}function Jp(t,e){if(t&1&&(r(0,"div",4)(1,"mat-icon"),s(2,"admin_panel_settings"),a(),r(3,"span",5),s(4),a(),r(5,"span",6),s(6),d(7,"translate"),a()(),r(8,"mat-accordion",7),Y(9,Kp,10,6,"mat-expansion-panel",8,Hp),a(),b(11,Zp,3,3,"div",9)),t&2){let i=C();l(4),f(i.data.role.name),l(2),de("(",i.selectedPermissionIds.size," ",m(7,4,"admin.roles.selected"),")"),l(3),X(i.permissionGroups),l(2),y(i.permissionGroups.length===0?11:-1)}}var cn=class t{constructor(e,i,n,o,c,p,g){this.dialogRef=e;this.rolesService=i;this.permissionsService=n;this.snackbar=o;this.translationService=c;this.cdr=p;this.data=g}loading=!1;loadingPermissions=!1;allPermissions=[];permissionGroups=[];selectedPermissionIds=new Set;ngOnInit(){this.loadPermissions()}translate(e){return this.translationService.translate(e)}loadPermissions(){this.data.role?.id&&(this.loadingPermissions=!0,this.permissionsService.getAll().subscribe({next:e=>{debugger;e.success&&e.data?(this.allPermissions=e.data,this.groupPermissionsByModule(),this.permissionsService.getByRoleId(this.data.role.id).subscribe({next:i=>{if(i.success&&i.data){let n=new Set(i.data.map(o=>o.id));n.forEach(o=>{this.selectedPermissionIds.add(o)}),this.permissionGroups.forEach(o=>{o.permissions.forEach(c=>{n.has(c.id)&&o.selectedIds.add(c.id)})})}this.loadingPermissions=!1,this.cdr.detectChanges()},error:i=>{this.snackbar.error(i.message||this.translate("admin.roles.errors.loadPermissionsFailed")),this.loadingPermissions=!1,this.cdr.detectChanges()}})):(this.loadingPermissions=!1,this.cdr.detectChanges())},error:e=>{this.snackbar.error(e.message||this.translate("admin.roles.errors.loadPermissionsFailed")),this.loadingPermissions=!1,this.cdr.detectChanges()}}))}groupPermissionsByModule(){let e=new Map;this.allPermissions.forEach(i=>{let n=i.module||"Other";e.has(n)||e.set(n,[]),e.get(n).push(i)}),this.permissionGroups=Array.from(e.entries()).map(([i,n])=>({module:i,permissions:n,selectedIds:new Set}))}togglePermission(e,i){this.selectedPermissionIds.has(e)?(this.selectedPermissionIds.delete(e),i.selectedIds.delete(e)):(this.selectedPermissionIds.add(e),i.selectedIds.add(e))}toggleAllInGroup(e){e.permissions.every(n=>e.selectedIds.has(n.id))?e.permissions.forEach(n=>{e.selectedIds.delete(n.id),this.selectedPermissionIds.delete(n.id)}):e.permissions.forEach(n=>{e.selectedIds.add(n.id),this.selectedPermissionIds.add(n.id)})}isAllSelectedInGroup(e){return e.permissions.length>0&&e.permissions.every(i=>e.selectedIds.has(i.id))}isSomeSelectedInGroup(e){return e.selectedIds.size>0&&!this.isAllSelectedInGroup(e)}onSelectionChange(e,i){e.options.forEach(n=>{let o=n.value;n.selected?(this.selectedPermissionIds.add(o),i.selectedIds.add(o)):(this.selectedPermissionIds.delete(o),i.selectedIds.delete(o))})}onSave(){this.loading=!0;let e={permissionIds:Array.from(this.selectedPermissionIds)};this.rolesService.assignPermissions(this.data.role.id,e).subscribe({next:()=>{this.snackbar.success(this.translate("admin.roles.permissionsUpdated")),this.dialogRef.close(!0)},error:i=>{this.loading=!1,this.cdr.markForCheck()}})}onCancel(){this.dialogRef.close()}static \u0275fac=function(i){return new(i||t)(h(G),h(mt),h(sn),h(L),h(N),h(W),h($))};static \u0275cmp=E({type:t,selectors:[["app-permissions-dialog"]],standalone:!1,decls:4,vars:5,consts:[[3,"save","cancel","title","saveLabel","saveDisabled","loading"],[1,"permissions-manager"],[1,"loading-container"],["diameter","40"],[1,"role-info"],[1,"role-name"],[1,"selected-count"],["multi","",1,"permissions-accordion"],[3,"expanded"],[1,"no-permissions"],[3,"click","change","checked","indeterminate"],[3,"selectionChange"],[3,"value","selected"],["matListItemTitle",""],["matListItemLine","",1,"permission-description"]],template:function(i,n){i&1&&(r(0,"app-base-dialog",0),P("save",function(){return n.onSave()})("cancel",function(){return n.onCancel()}),r(1,"div",1),b(2,Xp,5,3,"div",2)(3,Jp,12,6),a()()),i&2&&(v("title","admin.roles.managePermissions")("saveLabel","common.save")("saveDisabled",n.loadingPermissions)("loading",n.loading),l(2),y(n.loadingPermissions?2:3))},dependencies:[Ue,B,Ho,qo,jo,$o,Oe,aa,ta,ia,oa,na,j,A],styles:[".permissions-manager[_ngcontent-%COMP%]{min-height:300px}.permissions-manager[_ngcontent-%COMP%]   .loading-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;padding:48px;gap:16px;color:var(--p-color)}.permissions-manager[_ngcontent-%COMP%]   .role-info[_ngcontent-%COMP%]{display:flex;align-items:center;gap:12px;padding:16px;background:linear-gradient(135deg,var(--primary-color) 0%,#059669 100%);border-radius:12px;margin-bottom:20px;color:#fff}.permissions-manager[_ngcontent-%COMP%]   .role-info[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:28px;width:28px;height:28px}.permissions-manager[_ngcontent-%COMP%]   .role-info[_ngcontent-%COMP%]   .role-name[_ngcontent-%COMP%]{font-size:1.1rem;font-weight:600}.permissions-manager[_ngcontent-%COMP%]   .role-info[_ngcontent-%COMP%]   .selected-count[_ngcontent-%COMP%]{margin-left:auto;font-size:.9rem;opacity:.9}.permissions-manager[_ngcontent-%COMP%]   .permissions-accordion[_ngcontent-%COMP%]{display:block;max-height:400px;overflow-y:auto}.permissions-manager[_ngcontent-%COMP%]   .permissions-accordion[_ngcontent-%COMP%]::-webkit-scrollbar{width:6px}.permissions-manager[_ngcontent-%COMP%]   .permissions-accordion[_ngcontent-%COMP%]::-webkit-scrollbar-track{background:#f1f1f1;border-radius:3px}.permissions-manager[_ngcontent-%COMP%]   .permissions-accordion[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:#c1c1c1;border-radius:3px}.permissions-manager[_ngcontent-%COMP%]   .permissions-accordion[_ngcontent-%COMP%]::-webkit-scrollbar-thumb:hover{background:#a1a1a1}.permissions-manager[_ngcontent-%COMP%]   .permissions-accordion[_ngcontent-%COMP%]   mat-expansion-panel[_ngcontent-%COMP%]{margin-bottom:12px;border-radius:12px!important;box-shadow:0 2px 8px #00000014!important}.permissions-manager[_ngcontent-%COMP%]   .permissions-accordion[_ngcontent-%COMP%]   mat-expansion-panel[_ngcontent-%COMP%]:last-child{margin-bottom:0}.permissions-manager[_ngcontent-%COMP%]   .permissions-accordion[_ngcontent-%COMP%]   mat-expansion-panel[_ngcontent-%COMP%]   mat-expansion-panel-header[_ngcontent-%COMP%]{background:#f8f9fa;border-radius:12px}.permissions-manager[_ngcontent-%COMP%]   .permissions-accordion[_ngcontent-%COMP%]   mat-expansion-panel[_ngcontent-%COMP%]   mat-expansion-panel-header[_ngcontent-%COMP%]:hover{background:#f0f0f0!important}.permissions-manager[_ngcontent-%COMP%]   .permissions-accordion[_ngcontent-%COMP%]   mat-expansion-panel[_ngcontent-%COMP%]   mat-expansion-panel-header[_ngcontent-%COMP%]   mat-panel-title[_ngcontent-%COMP%]   mat-checkbox[_ngcontent-%COMP%]{font-weight:600;color:var(--secondary-color)}.permissions-manager[_ngcontent-%COMP%]   .permissions-accordion[_ngcontent-%COMP%]   mat-expansion-panel[_ngcontent-%COMP%]   mat-expansion-panel-header[_ngcontent-%COMP%]   mat-panel-description[_ngcontent-%COMP%]{color:var(--p-color);font-size:.85rem}.permissions-manager[_ngcontent-%COMP%]   .permissions-accordion[_ngcontent-%COMP%]   mat-expansion-panel[_ngcontent-%COMP%]   mat-selection-list[_ngcontent-%COMP%]{padding:0}.permissions-manager[_ngcontent-%COMP%]   .permissions-accordion[_ngcontent-%COMP%]   mat-expansion-panel[_ngcontent-%COMP%]   mat-selection-list[_ngcontent-%COMP%]   mat-list-option[_ngcontent-%COMP%]{border-radius:8px;margin:4px 8px}.permissions-manager[_ngcontent-%COMP%]   .permissions-accordion[_ngcontent-%COMP%]   mat-expansion-panel[_ngcontent-%COMP%]   mat-selection-list[_ngcontent-%COMP%]   mat-list-option[_ngcontent-%COMP%]:hover{background-color:#f8f9fa}.permissions-manager[_ngcontent-%COMP%]   .permissions-accordion[_ngcontent-%COMP%]   mat-expansion-panel[_ngcontent-%COMP%]   mat-selection-list[_ngcontent-%COMP%]   mat-list-option[_ngcontent-%COMP%]   .permission-description[_ngcontent-%COMP%]{color:var(--p-color);font-size:.8rem}.permissions-manager[_ngcontent-%COMP%]   .no-permissions[_ngcontent-%COMP%]{text-align:center;padding:48px;color:var(--p-color);font-style:italic}"]})};var dn=class t{constructor(e,i,n,o,c){this.rolesService=e;this.snackbar=i;this.dialog=n;this.translationService=o;this.cdr=c}roles=[];totalCount=0;loading=!1;pageNumber=1;pageSize=10;sortBy;sortDescending=!1;filterValues={};gridConfig;ngOnInit(){this.initGridConfig(),this.loadRoles()}initGridConfig(){this.gridConfig={title:"admin.roles.title",subtitle:"admin.roles.subtitle",addButton:{label:"admin.roles.addRole",icon:"add",color:"primary",permission:F.ROLES_MANAGE},showSearch:!0,searchPlaceholder:this.translate("admin.roles.searchPlaceholder"),filters:[{key:"type",label:"admin.roles.typeFilter",type:"select",defaultValue:"all",options:[{value:"all",label:"admin.roles.all"},{value:"system",label:"admin.roles.systemRoles"},{value:"custom",label:"admin.roles.customRoles"}]}],columns:[{key:"name",header:"admin.roles.name",sortable:!0},{key:"description",header:"admin.roles.description",cell:e=>e.description||"-"},{key:"isSystemRole",header:"admin.roles.type",cell:e=>e.isSystemRole?this.translate("admin.roles.system"):this.translate("admin.roles.custom")},{key:"permissions",header:"admin.roles.permissions",cell:e=>e.permissions?.length?.toString()||"0"},{key:"createdAt",header:"admin.roles.created",sortable:!0,cell:e=>new Date(e.createdAt).toLocaleDateString()}],actions:[{icon:"edit",tooltip:"admin.roles.edit",permission:F.ROLES_MANAGE,color:"info",onClick:e=>this.openEditDialog(e),visible:e=>!e.isSystemRole},{icon:"visibility",tooltip:"admin.roles.view",permission:F.ROLES_READ,color:"info",onClick:e=>this.openViewDialog(e),visible:e=>e.isSystemRole},{icon:"security",tooltip:"admin.roles.managePermissions",permission:F.ROLES_MANAGE,color:"primary",onClick:e=>this.openPermissionsDialog(e)},{icon:"delete",tooltip:"admin.roles.delete",permission:F.ROLES_MANAGE,color:"warn",onClick:e=>this.deleteRole(e),visible:e=>!e.isSystemRole}],serverSide:!0,pageSizeOptions:[5,10,25,50],defaultPageSize:10}}translate(e){return this.translationService.translate(e)}loadRoles(){this.loading=!0;let e={pageNumber:this.pageNumber,pageSize:this.pageSize,search:this.filterValues.search||void 0,sortBy:this.sortBy,sortDescending:this.sortDescending};this.rolesService.getPaged(e).subscribe({next:i=>{if(i.success&&i.data){let n=i.data.data,o=this.filterValues.type;o&&o!=="all"&&(n=n.filter(c=>o==="system"?c.isSystemRole:!c.isSystemRole)),this.roles=n,this.totalCount=i.data.totalCount}this.loading=!1,this.cdr.detectChanges()},error:i=>{this.snackbar.error(i.message||this.translate("admin.roles.errors.loadFailed")),this.loading=!1,this.cdr.detectChanges()}})}onPageChange(e){this.pageNumber=e.pageIndex+1,this.pageSize=e.pageSize,this.loadRoles()}onSortChange(e){this.sortBy=e.active,this.sortDescending=e.direction==="desc",this.loadRoles()}onFilterChange(e){this.filterValues=e,this.pageNumber=1,this.loadRoles()}openCreateDialog(){let e={mode:"create"};this.dialog.open(Ut,{width:"600px",data:e,disableClose:!0}).afterClosed().subscribe(n=>{n&&this.loadRoles()})}openEditDialog(e){let i={mode:"edit",role:e};this.dialog.open(Ut,{width:"600px",data:i,disableClose:!0}).afterClosed().subscribe(o=>{o&&this.loadRoles()})}openViewDialog(e){let i={mode:"view",role:e};this.dialog.open(Ut,{width:"600px",data:i})}openPermissionsDialog(e){let i={role:e};this.dialog.open(cn,{width:"800px",data:i,disableClose:!0}).afterClosed().subscribe(o=>{o&&this.loadRoles()})}deleteRole(e){let i={title:this.translate("admin.roles.deleteRole"),message:this.translate("admin.roles.confirmDelete"),confirmLabel:this.translate("common.delete"),cancelLabel:this.translate("common.cancel"),confirmColor:"warn",icon:"delete"};this.dialog.open(Ce,{width:"400px",data:i}).afterClosed().subscribe(o=>{o&&(this.loading=!0,this.rolesService.delete(e.id).subscribe({next:()=>{this.snackbar.success(this.translate("admin.roles.roleDeleted")),this.loadRoles()},error:c=>{this.snackbar.error(c.message||this.translate("admin.roles.errors.deleteFailed")),this.loading=!1}}))})}static \u0275fac=function(i){return new(i||t)(h(mt),h(L),h(Pe),h(N),h(W))};static \u0275cmp=E({type:t,selectors:[["app-roles-component"]],standalone:!1,decls:1,vars:6,consts:[[3,"pageChange","sortChange","filterChange","addClick","data","config","totalCount","loading","pageIndex","pageSize"]],template:function(i,n){i&1&&(r(0,"app-data-grid",0),P("pageChange",function(c){return n.onPageChange(c)})("sortChange",function(c){return n.onSortChange(c)})("filterChange",function(c){return n.onFilterChange(c)})("addClick",function(){return n.openCreateDialog()}),a()),i&2&&v("data",n.roles)("config",n.gridConfig)("totalCount",n.totalCount)("loading",n.loading)("pageIndex",n.pageNumber-1)("pageSize",n.pageSize)},dependencies:[Se],encapsulation:2})};var xe=class t extends Ke{constructor(e){super(e,"departments")}getByCode(e){return this.get(`/by-code/${e}`)}getByName(e){return this.get(`/by-name/${e}`)}getWithSubDepartments(e){return this.get(`/${e}/with-sub-departments`)}getSubDepartments(e){return this.get(`/${e}/sub-departments`)}getRootDepartments(){return this.get("/root")}getActiveDepartments(){return this.get("/active")}assignManager(e,i){return this.http.put(`${this.getApiUrl()}/${e}/manager`,JSON.stringify(i),{headers:{"Content-Type":"application/json"}})}static \u0275fac=function(i){return new(i||t)(We(Qe))};static \u0275prov=Xe({token:t,factory:t.\u0275fac,providedIn:"root"})};var qe=class t extends Ke{constructor(e){super(e,"positions")}getByCode(e){return this.get(`/by-code/${e}`)}getByName(e){return this.get(`/by-name/${e}`)}getByDepartmentId(e){return this.get(`/by-department/${e}`)}getActivePositions(){return this.get("/active")}getWithEmployeeCount(e){return this.get(`/${e}/with-employee-count`)}assignDepartment(e,i){return this.http.put(`${this.getApiUrl()}/${e}/department`,JSON.stringify(i),{headers:{"Content-Type":"application/json"}})}static \u0275fac=function(i){return new(i||t)(We(Qe))};static \u0275prov=Xe({token:t,factory:t.\u0275fac,providedIn:"root"})};var ed=(t,e)=>e.value;function td(t,e){if(t&1&&(r(0,"mat-icon",1),s(1),a()),t&2){let i=C();l(),f(i.icon)}}function id(t,e){if(t&1&&(r(0,"mat-option",3),s(1),d(2,"translate"),a()),t&2){let i=C();v("value",null),l(),f(m(2,2,i.nullOptionLabel))}}function nd(t,e){if(t&1&&(r(0,"mat-option",4),s(1),a()),t&2){let i=e.$implicit;v("value",i.value)("disabled",i.disabled),l(),f(i.label)}}function od(t,e){t&1&&D(0,"mat-spinner",5)}var ft=class t{constructor(e){this.cdr=e}label="";placeholder="";icon="";nullOptionLabel="";showNullOption=!0;loadingHint="common.loading";dataSource$;optionMapper;filterFn;resetOnDataSourceChange=!0;selectionChange=new Ee;options=[];loading=!1;value=null;disabled=!1;destroy$=new ui;onChange=()=>{};onTouched=()=>{};initialized=!1;ngOnInit(){this.loadData(),this.initialized=!0}ngOnChanges(e){e.dataSource$&&!e.dataSource$.firstChange&&this.initialized&&(this.resetOnDataSourceChange&&(this.value=null,this.onChange(null)),this.loadData())}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}loadData(){!this.dataSource$||!this.optionMapper||(this.loading=!0,this.dataSource$.pipe(co(this.destroy$)).subscribe({next:e=>{if(e.success&&e.data){let i=e.data;this.filterFn&&(i=i.filter(this.filterFn)),this.options=i.map(this.optionMapper)}this.loading=!1,this.cdr.markForCheck()},error:()=>{this.loading=!1,this.cdr.markForCheck()}}))}onSelectionChange(e){this.value=e,this.onChange(e),this.onTouched(),this.selectionChange.emit(e)}writeValue(e){this.value=e}registerOnChange(e){this.onChange=e}registerOnTouched(e){this.onTouched=e}setDisabledState(e){this.disabled=e}static \u0275fac=function(i){return new(i||t)(h(W))};static \u0275cmp=E({type:t,selectors:[["app-async-select"]],inputs:{label:"label",placeholder:"placeholder",icon:"icon",nullOptionLabel:"nullOptionLabel",showNullOption:"showNullOption",loadingHint:"loadingHint",dataSource$:"dataSource$",optionMapper:"optionMapper",filterFn:"filterFn",resetOnDataSourceChange:"resetOnDataSourceChange"},outputs:{selectionChange:"selectionChange"},standalone:!1,features:[_i([{provide:xi,useExisting:vi(()=>t),multi:!0}]),Ot],decls:10,vars:8,consts:[["appearance","outline"],["matPrefix",""],[3,"selectionChange","value","disabled"],[3,"value"],[3,"value","disabled"],["matSuffix","","diameter","20"]],template:function(i,n){i&1&&(r(0,"mat-form-field",0)(1,"mat-label"),s(2),d(3,"translate"),a(),b(4,td,2,1,"mat-icon",1),r(5,"mat-select",2),P("selectionChange",function(c){return n.onSelectionChange(c.value)}),b(6,id,3,4,"mat-option",3),Y(7,nd,2,3,"mat-option",4,ed),a(),b(9,od,1,0,"mat-spinner",5),a()),i&2&&(l(2),f(m(3,6,n.label)),l(2),y(n.icon?4:-1),l(),v("value",n.value)("disabled",n.disabled||n.loading),l(),y(n.showNullOption?6:-1),l(),X(n.options),l(2),y(n.loading?9:-1))},dependencies:[K,Q,oe,ot,B,Te,Ae,Oe,A],styles:["[_nghost-%COMP%]{display:block;width:100%}[_nghost-%COMP%]   mat-form-field[_ngcontent-%COMP%]{width:100%}"]})};function ad(t,e){if(t&1&&(r(0,"mat-icon",2),s(1),a()),t&2){let i=C();l(),f(i.icon)}}var Gt=class t{label="";icon="event";placeholder="";minDate=null;maxDate=null;startView="month";dateChange=new Ee;value=null;disabled=!1;onChange=()=>{};onTouched=()=>{};onDateChange(e){this.value=e,this.onChange(e),this.onTouched(),this.dateChange.emit(e)}writeValue(e){this.value=e}registerOnChange(e){this.onChange=e}registerOnTouched(e){this.onTouched=e}setDisabledState(e){this.disabled=e}static \u0275fac=function(i){return new(i||t)};static \u0275cmp=E({type:t,selectors:[["app-date-picker"]],inputs:{label:"label",icon:"icon",placeholder:"placeholder",minDate:"minDate",maxDate:"maxDate",startView:"startView"},outputs:{dateChange:"dateChange"},standalone:!1,features:[_i([{provide:xi,useExisting:vi(()=>t),multi:!0}])],decls:10,vars:14,consts:[["picker",""],["appearance","outline"],["matPrefix",""],["matInput","",3,"dateChange","matDatepicker","value","disabled","min","max","placeholder"],["matSuffix","",3,"for"],[3,"startView"]],template:function(i,n){if(i&1){let o=z();r(0,"mat-form-field",1)(1,"mat-label"),s(2),d(3,"translate"),a(),b(4,ad,2,1,"mat-icon",2),r(5,"input",3),d(6,"translate"),P("dateChange",function(p){return I(o),k(n.onDateChange(p.value))}),a(),D(7,"mat-datepicker-toggle",4)(8,"mat-datepicker",5,0),a()}if(i&2){let o=it(9);l(2),f(m(3,10,n.label)),l(2),y(n.icon?4:-1),l(),v("matDatepicker",o)("value",n.value)("disabled",n.disabled)("min",n.minDate)("max",n.maxDate)("placeholder",m(6,12,n.placeholder)),l(2),v("for",o),l(),v("startView",n.startView)}},dependencies:[_e,K,Q,oe,ot,B,Mi,Pi,Oi,A],styles:[`app-date-picker{display:block;width:100%;flex:1}app-date-picker mat-form-field{width:100%}app-date-picker mat-form-field .mat-mdc-text-field-wrapper{background-color:#fff!important}app-date-picker mat-form-field .mdc-text-field--outlined{background-color:#fff!important}app-date-picker mat-form-field .mat-mdc-form-field-flex{background-color:#fff!important}.mat-datepicker-content-container{background-color:#fff!important}
`],encapsulation:2})};function rd(t,e){t&1&&(r(0,"mat-error"),s(1),d(2,"translate"),a()),t&2&&(l(),f(m(2,1,"admin.employees.errors.codeRequired")))}function ld(t,e){t&1&&(r(0,"mat-error"),s(1),d(2,"translate"),a()),t&2&&(l(),f(m(2,1,"admin.employees.errors.firstNameEnRequired")))}function sd(t,e){t&1&&(r(0,"mat-error"),s(1),d(2,"translate"),a()),t&2&&(l(),f(m(2,1,"admin.employees.errors.lastNameEnRequired")))}function cd(t,e){t&1&&(r(0,"mat-error"),s(1),d(2,"translate"),a()),t&2&&(l(),f(m(2,1,"admin.employees.errors.firstNameArRequired")))}function pd(t,e){t&1&&(r(0,"mat-error"),s(1),d(2,"translate"),a()),t&2&&(l(),f(m(2,1,"admin.employees.errors.lastNameArRequired")))}function dd(t,e){t&1&&(r(0,"mat-error"),s(1),d(2,"translate"),a()),t&2&&(l(),f(m(2,1,"admin.employees.errors.emailInvalid")))}function md(t,e){t&1&&(r(0,"mat-error"),s(1),d(2,"translate"),a()),t&2&&(l(),f(m(2,1,"admin.employees.errors.salaryMin")))}var si=class t{constructor(e,i,n,o,c,p,g,_){this.fb=e;this.dialogRef=i;this.employeesService=n;this.departmentsService=o;this.positionsService=c;this.snackbar=p;this.translationService=g;this.data=_;this.mode=_.mode}form;mode;loading=!1;departmentsDataSource$;positionsDataSource$;managersDataSource$;destroy$=new ui;departmentMapper=e=>({value:e.id,label:`${this.isArabic?e.nameAr:e.nameEn} (${e.code})`});positionMapper=e=>({value:e.id,label:`${this.isArabic?e.nameAr:e.nameEn} (${e.code})`});positionFilter=e=>e.isActive;managerMapper=e=>({value:e.id,label:`${this.isArabic?e.fullNameAr:e.fullNameEn} (${e.employeeCode})`});managerFilter=e=>e.id!==this.data.employee?.id&&e.isActive;ngOnInit(){this.initForm(),this.initDataSources()}initDataSources(){this.departmentsDataSource$=this.departmentsService.getActiveDepartments(),this.managersDataSource$=this.employeesService.getAll(),this.onDepartmentChange(this.form.get("departmentId")?.value,!1)}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}get isArabic(){return this.translationService.language()==="ar"}get isCreateMode(){return this.mode==="create"}get isEditMode(){return this.mode==="edit"}get dialogTitle(){return this.isCreateMode?"admin.employees.createEmployee":"admin.employees.editEmployee"}get saveLabel(){return this.isCreateMode?"common.create":"common.update"}initForm(){if(this.isEditMode){let e=this.data.employee;this.form=this.fb.group({employeeCode:[e.employeeCode,[M.required,M.maxLength(50)]],firstNameEn:[e.firstNameEn,[M.required,M.maxLength(100)]],lastNameEn:[e.lastNameEn,[M.required,M.maxLength(100)]],firstNameAr:[e.firstNameAr,[M.required,M.maxLength(100)]],lastNameAr:[e.lastNameAr,[M.required,M.maxLength(100)]],email:[e.email,[M.email,M.maxLength(256)]],phone:[e.phone,[M.maxLength(20)]],departmentId:[e.departmentId],positionId:[e.positionId],hireDate:[e.hireDate?new Date(e.hireDate):null],salary:[e.salary,[M.min(0)]],isActive:[e.isActive],managerId:[e.managerId]})}else this.form=this.fb.group({employeeCode:["",[M.required,M.maxLength(50)]],firstNameEn:["",[M.required,M.maxLength(100)]],lastNameEn:["",[M.required,M.maxLength(100)]],firstNameAr:["",[M.required,M.maxLength(100)]],lastNameAr:["",[M.required,M.maxLength(100)]],email:["",[M.email,M.maxLength(256)]],phone:["",[M.maxLength(20)]],departmentId:[null],positionId:[null],hireDate:[null],salary:[null,[M.min(0)]],isActive:[!0],managerId:[null]})}onDepartmentChange(e,i=!0){i&&this.form.get("positionId")?.setValue(null),this.positionsDataSource$=e?this.positionsService.getByDepartmentId(e):this.positionsService.getAll()}translate(e){return this.translationService.translate(e)}onSubmit(){if(this.form.invalid){this.form.markAllAsTouched();return}this.loading=!0,this.isEditMode?this.updateEmployee():this.createEmployee()}createEmployee(){let e={employeeCode:this.form.value.employeeCode,firstNameEn:this.form.value.firstNameEn,lastNameEn:this.form.value.lastNameEn,firstNameAr:this.form.value.firstNameAr,lastNameAr:this.form.value.lastNameAr,email:this.form.value.email||void 0,phone:this.form.value.phone||void 0,departmentId:this.form.value.departmentId||void 0,positionId:this.form.value.positionId||void 0,hireDate:this.form.value.hireDate||void 0,salary:this.form.value.salary||void 0,isActive:this.form.value.isActive,managerId:this.form.value.managerId||void 0};this.employeesService.create(e).subscribe({next:()=>{this.snackbar.success(this.translate("admin.employees.employeeCreated")),this.dialogRef.close(!0)},error:i=>{this.snackbar.error(i.message||this.translate("admin.employees.errors.createFailed")),this.loading=!1}})}updateEmployee(){let e={employeeCode:this.form.value.employeeCode,firstNameEn:this.form.value.firstNameEn,lastNameEn:this.form.value.lastNameEn,firstNameAr:this.form.value.firstNameAr,lastNameAr:this.form.value.lastNameAr,email:this.form.value.email||void 0,phone:this.form.value.phone||void 0,departmentId:this.form.value.departmentId||void 0,positionId:this.form.value.positionId||void 0,hireDate:this.form.value.hireDate||void 0,salary:this.form.value.salary||void 0,isActive:this.form.value.isActive,managerId:this.form.value.managerId||void 0};this.employeesService.update(this.data.employee.id,e).subscribe({next:()=>{this.snackbar.success(this.translate("admin.employees.employeeUpdated")),this.dialogRef.close(!0)},error:i=>{this.snackbar.error(i.message||this.translate("admin.employees.errors.updateFailed")),this.loading=!1}})}onCancel(){this.dialogRef.close()}static \u0275fac=function(i){return new(i||t)(h(pe),h(G),h(De),h(xe),h(qe),h(L),h(N),h($))};static \u0275cmp=E({type:t,selectors:[["app-employee-dialog"]],standalone:!1,decls:112,vars:82,consts:[[3,"save","cancel","title","saveLabel","saveDisabled","loading"],[1,"dialog-form",3,"formGroup"],[1,"form-section","section-primary"],[1,"section-header"],[1,"section-icon"],[1,"section-title"],[1,"section-content"],["appearance","outline"],["matPrefix",""],["matInput","","formControlName","employeeCode",3,"placeholder"],[1,"form-row"],["matInput","","formControlName","firstNameEn",3,"placeholder"],["matInput","","formControlName","lastNameEn",3,"placeholder"],["matInput","","formControlName","firstNameAr","dir","rtl",3,"placeholder"],["matInput","","formControlName","lastNameAr","dir","rtl",3,"placeholder"],[1,"form-section","section-blue"],["matInput","","formControlName","email","type","email",3,"placeholder"],["matInput","","formControlName","phone",3,"placeholder"],[1,"form-section","section-orange"],["formControlName","departmentId","label","admin.employees.department","icon","business","nullOptionLabel","admin.employees.noDepartment",3,"selectionChange","dataSource$","optionMapper","resetOnDataSourceChange"],["formControlName","positionId","label","admin.employees.position","icon","work_outline","nullOptionLabel","admin.employees.noPosition",3,"dataSource$","optionMapper","filterFn"],[1,"form-row","row"],["formControlName","hireDate","label","admin.employees.hireDate","icon","event"],["matInput","","type","number","formControlName","salary",3,"placeholder"],["formControlName","managerId","label","admin.employees.manager","icon","supervisor_account","nullOptionLabel","admin.employees.noManager",3,"dataSource$","optionMapper","filterFn","resetOnDataSourceChange"],["formControlName","isActive","color","primary"]],template:function(i,n){if(i&1&&(r(0,"app-base-dialog",0),P("save",function(){return n.onSubmit()})("cancel",function(){return n.onCancel()}),r(1,"form",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"mat-icon"),s(6,"person"),a()(),r(7,"div",5),s(8),d(9,"translate"),a()(),r(10,"div",6)(11,"mat-form-field",7)(12,"mat-label"),s(13),d(14,"translate"),a(),r(15,"mat-icon",8),s(16,"badge"),a(),D(17,"input",9),d(18,"translate"),b(19,rd,3,3,"mat-error"),a(),r(20,"div",10)(21,"mat-form-field",7)(22,"mat-label"),s(23),d(24,"translate"),a(),r(25,"mat-icon",8),s(26,"person"),a(),D(27,"input",11),d(28,"translate"),b(29,ld,3,3,"mat-error"),a(),r(30,"mat-form-field",7)(31,"mat-label"),s(32),d(33,"translate"),a(),r(34,"mat-icon",8),s(35,"person"),a(),D(36,"input",12),d(37,"translate"),b(38,sd,3,3,"mat-error"),a()(),r(39,"div",10)(40,"mat-form-field",7)(41,"mat-label"),s(42),d(43,"translate"),a(),r(44,"mat-icon",8),s(45,"translate"),a(),D(46,"input",13),d(47,"translate"),b(48,cd,3,3,"mat-error"),a(),r(49,"mat-form-field",7)(50,"mat-label"),s(51),d(52,"translate"),a(),r(53,"mat-icon",8),s(54,"translate"),a(),D(55,"input",14),d(56,"translate"),b(57,pd,3,3,"mat-error"),a()()()(),r(58,"div",15)(59,"div",3)(60,"div",4)(61,"mat-icon"),s(62,"contact_mail"),a()(),r(63,"div",5),s(64),d(65,"translate"),a()(),r(66,"div",6)(67,"div",10)(68,"mat-form-field",7)(69,"mat-label"),s(70),d(71,"translate"),a(),r(72,"mat-icon",8),s(73,"email"),a(),D(74,"input",16),d(75,"translate"),b(76,dd,3,3,"mat-error"),a(),r(77,"mat-form-field",7)(78,"mat-label"),s(79),d(80,"translate"),a(),r(81,"mat-icon",8),s(82,"phone"),a(),D(83,"input",17),d(84,"translate"),a()()()(),r(85,"div",18)(86,"div",3)(87,"div",4)(88,"mat-icon"),s(89,"work"),a()(),r(90,"div",5),s(91),d(92,"translate"),a()(),r(93,"div",6)(94,"div",10)(95,"app-async-select",19),P("selectionChange",function(c){return n.onDepartmentChange(c)}),a(),D(96,"app-async-select",20),a(),r(97,"div",21),D(98,"app-date-picker",22),r(99,"mat-form-field",7)(100,"mat-label"),s(101),d(102,"translate"),a(),r(103,"mat-icon",8),s(104,"attach_money"),a(),D(105,"input",23),d(106,"translate"),b(107,md,3,3,"mat-error"),a()(),D(108,"app-async-select",24),r(109,"mat-checkbox",25),s(110),d(111,"translate"),a()()()()()),i&2){let o,c,p,g,_,u,x;v("title",n.dialogTitle)("saveLabel",n.saveLabel)("saveDisabled",n.form.invalid)("loading",n.loading),l(),v("formGroup",n.form),l(7),f(m(9,42,"admin.employees.basicInfo")),l(5),f(m(14,44,"admin.employees.code")),l(4),v("placeholder",m(18,46,"admin.employees.placeholders.code")),l(2),y((o=n.form.get("employeeCode"))!=null&&o.hasError("required")&&((o=n.form.get("employeeCode"))!=null&&o.touched)?19:-1),l(4),f(m(24,48,"admin.employees.firstNameEn")),l(4),v("placeholder",m(28,50,"admin.employees.placeholders.firstNameEn")),l(2),y((c=n.form.get("firstNameEn"))!=null&&c.hasError("required")&&((c=n.form.get("firstNameEn"))!=null&&c.touched)?29:-1),l(3),f(m(33,52,"admin.employees.lastNameEn")),l(4),v("placeholder",m(37,54,"admin.employees.placeholders.lastNameEn")),l(2),y((p=n.form.get("lastNameEn"))!=null&&p.hasError("required")&&((p=n.form.get("lastNameEn"))!=null&&p.touched)?38:-1),l(4),f(m(43,56,"admin.employees.firstNameAr")),l(4),v("placeholder",m(47,58,"admin.employees.placeholders.firstNameAr")),l(2),y((g=n.form.get("firstNameAr"))!=null&&g.hasError("required")&&((g=n.form.get("firstNameAr"))!=null&&g.touched)?48:-1),l(3),f(m(52,60,"admin.employees.lastNameAr")),l(4),v("placeholder",m(56,62,"admin.employees.placeholders.lastNameAr")),l(2),y((_=n.form.get("lastNameAr"))!=null&&_.hasError("required")&&((_=n.form.get("lastNameAr"))!=null&&_.touched)?57:-1),l(7),f(m(65,64,"admin.employees.contactInfo")),l(6),f(m(71,66,"admin.employees.email")),l(4),v("placeholder",m(75,68,"admin.employees.placeholders.email")),l(2),y((u=n.form.get("email"))!=null&&u.hasError("email")&&((u=n.form.get("email"))!=null&&u.touched)?76:-1),l(3),f(m(80,70,"admin.employees.phone")),l(4),v("placeholder",m(84,72,"admin.employees.placeholders.phone")),l(8),f(m(92,74,"admin.employees.workInfo")),l(4),v("dataSource$",n.departmentsDataSource$)("optionMapper",n.departmentMapper)("resetOnDataSourceChange",!1),l(),v("dataSource$",n.positionsDataSource$)("optionMapper",n.positionMapper)("filterFn",n.positionFilter),l(5),f(m(102,76,"admin.employees.salary")),l(4),v("placeholder",m(106,78,"admin.employees.placeholders.salary")),l(2),y((x=n.form.get("salary"))!=null&&x.hasError("min")&&((x=n.form.get("salary"))!=null&&x.touched)?107:-1),l(),v("dataSource$",n.managersDataSource$)("optionMapper",n.managerMapper)("filterFn",n.managerFilter)("resetOnDataSourceChange",!1),l(2),T(" ",m(111,80,"admin.employees.isActive")," ")}},dependencies:[le,Me,bi,ne,re,ce,se,_e,K,Q,ke,oe,ve,Ue,B,j,ft,Gt,A],styles:[".view-content[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:1.25rem}.view-fields[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:12px;padding:16px!important}.view-fields[_ngcontent-%COMP%]   .view-field[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:4px}.view-fields[_ngcontent-%COMP%]   .view-field[_ngcontent-%COMP%]   .field-label[_ngcontent-%COMP%]{font-size:.8rem;color:var(--p-color);font-weight:500;text-transform:uppercase;letter-spacing:.5px}.view-fields[_ngcontent-%COMP%]   .view-field[_ngcontent-%COMP%]   .field-value[_ngcontent-%COMP%]{font-size:1rem;color:var(--secondary-color);font-weight:500}.employee-info[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px;padding:12px 16px;background:#f0f4f8;border-radius:8px;margin-bottom:16px}.employee-info[_ngcontent-%COMP%]   .label[_ngcontent-%COMP%]{font-size:.9rem;color:var(--p-color)}.employee-info[_ngcontent-%COMP%]   .value[_ngcontent-%COMP%]{font-weight:600;color:var(--secondary-color)}"]})};function fd(t,e){t&1&&(r(0,"mat-chip",11),s(1),d(2,"translate"),a()),t&2&&(l(),f(m(2,1,"admin.employees.active")))}function gd(t,e){t&1&&(r(0,"mat-chip",12),s(1),d(2,"translate"),a()),t&2&&(l(),f(m(2,1,"admin.employees.inactive")))}function ud(t,e){if(t&1&&(r(0,"div",7)(1,"span",8),s(2),d(3,"translate"),a(),r(4,"span",9),s(5),a()()),t&2){let i=C();l(2),f(m(3,2,"admin.employees.linkedUser")),l(3),f(i.employee.username)}}var fn=class t{constructor(e,i,n){this.dialogRef=e;this.translationService=i;this.employee=n}get isArabic(){return this.translationService.language()==="ar"}getFullName(){return this.isArabic?this.employee.fullNameAr:this.employee.fullNameEn}getManagerName(){return this.employee.manager?this.isArabic?this.employee.manager.fullNameAr:this.employee.manager.fullNameEn:"-"}onClose(){this.dialogRef.close()}static \u0275fac=function(i){return new(i||t)(h(G),h(N),h($))};static \u0275cmp=E({type:t,selectors:[["app-employee-view-dialog"]],standalone:!1,decls:103,vars:63,consts:[["title","admin.employees.viewEmployee",3,"showActions"],[1,"view-content"],[1,"form-section","section-primary"],[1,"section-header"],[1,"section-icon"],[1,"section-title"],[1,"section-content","view-fields"],[1,"view-field"],[1,"field-label"],[1,"field-value"],["dir","rtl",1,"field-value"],["color","primary"],["color","warn"],[1,"form-section","section-blue"],[1,"form-section","section-orange"],[1,"dialog-actions"],["mat-raised-button","","color","primary",3,"click"]],template:function(i,n){i&1&&(r(0,"app-base-dialog",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"mat-icon"),s(6,"person"),a()(),r(7,"div",5),s(8),d(9,"translate"),a()(),r(10,"div",6)(11,"div",7)(12,"span",8),s(13),d(14,"translate"),a(),r(15,"span",9),s(16),a()(),r(17,"div",7)(18,"span",8),s(19),d(20,"translate"),a(),r(21,"span",9),s(22),a()(),r(23,"div",7)(24,"span",8),s(25),d(26,"translate"),a(),r(27,"span",10),s(28),a()(),r(29,"div",7)(30,"span",8),s(31),d(32,"translate"),a(),r(33,"span",9),b(34,fd,3,3,"mat-chip",11)(35,gd,3,3,"mat-chip",12),a()()()(),r(36,"div",13)(37,"div",3)(38,"div",4)(39,"mat-icon"),s(40,"contact_mail"),a()(),r(41,"div",5),s(42),d(43,"translate"),a()(),r(44,"div",6)(45,"div",7)(46,"span",8),s(47),d(48,"translate"),a(),r(49,"span",9),s(50),a()(),r(51,"div",7)(52,"span",8),s(53),d(54,"translate"),a(),r(55,"span",9),s(56),a()()()(),r(57,"div",14)(58,"div",3)(59,"div",4)(60,"mat-icon"),s(61,"work"),a()(),r(62,"div",5),s(63),d(64,"translate"),a()(),r(65,"div",6)(66,"div",7)(67,"span",8),s(68),d(69,"translate"),a(),r(70,"span",9),s(71),a()(),r(72,"div",7)(73,"span",8),s(74),d(75,"translate"),a(),r(76,"span",9),s(77),a()(),r(78,"div",7)(79,"span",8),s(80),d(81,"translate"),a(),r(82,"span",9),s(83),d(84,"date"),a()(),r(85,"div",7)(86,"span",8),s(87),d(88,"translate"),a(),r(89,"span",9),s(90),d(91,"currency"),a()(),r(92,"div",7)(93,"span",8),s(94),d(95,"translate"),a(),r(96,"span",9),s(97),a()(),b(98,ud,6,4,"div",7),a()(),r(99,"div",15)(100,"button",16),P("click",function(){return n.onClose()}),s(101),d(102,"translate"),a()()()()),i&2&&(v("showActions",!1),l(8),f(m(9,28,"admin.employees.basicInfo")),l(5),f(m(14,30,"admin.employees.code")),l(3),f(n.employee.employeeCode),l(3),f(m(20,32,"admin.employees.nameEn")),l(3),f(n.employee.fullNameEn),l(3),f(m(26,34,"admin.employees.nameAr")),l(3),f(n.employee.fullNameAr),l(3),f(m(32,36,"admin.employees.status")),l(3),y(n.employee.isActive?34:35),l(8),f(m(43,38,"admin.employees.contactInfo")),l(5),f(m(48,40,"admin.employees.email")),l(3),f(n.employee.email||"-"),l(3),f(m(54,42,"admin.employees.phone")),l(3),f(n.employee.phone||"-"),l(7),f(m(64,44,"admin.employees.workInfo")),l(5),f(m(69,46,"admin.employees.department")),l(3),f(n.employee.departmentName||"-"),l(3),f(m(75,48,"admin.employees.position")),l(3),f(n.employee.positionName||"-"),l(3),f(m(81,50,"admin.employees.hireDate")),l(3),f(n.employee.hireDate?It(84,52,n.employee.hireDate,"mediumDate"):"-"),l(4),f(m(88,55,"admin.employees.salary")),l(3),f(n.employee.salary?m(91,57,n.employee.salary):"-"),l(4),f(m(95,59,"admin.employees.manager")),l(3),f(n.getManagerName()),l(),y(n.employee.username?98:-1),l(3),T(" ",m(102,61,"common.close")," "))},dependencies:[ve,fe,B,rt,j,yo,kt,A],styles:[".view-content[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:1.25rem}.view-content[_ngcontent-%COMP%]   .dialog-actions[_ngcontent-%COMP%]{display:flex;justify-content:flex-end;padding-top:16px}.view-fields[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:12px;padding:16px!important}.view-fields[_ngcontent-%COMP%]   .view-field[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:4px}.view-fields[_ngcontent-%COMP%]   .view-field[_ngcontent-%COMP%]   .field-label[_ngcontent-%COMP%]{font-size:.8rem;color:var(--p-color);font-weight:500;text-transform:uppercase;letter-spacing:.5px}.view-fields[_ngcontent-%COMP%]   .view-field[_ngcontent-%COMP%]   .field-value[_ngcontent-%COMP%]{font-size:1rem;color:var(--secondary-color);font-weight:500}"]})};var hd=(t,e)=>e.id;function vd(t,e){if(t&1&&(r(0,"mat-option",13),s(1),a()),t&2){let i=e.$implicit,n=C();v("value",i.id),l(),de("",n.getEmployeeName(i)," (",i.employeeCode,")")}}function _d(t,e){t&1&&(r(0,"mat-hint"),s(1),d(2,"translate"),a()),t&2&&(l(),f(m(2,1,"common.loading")))}var gn=class t{constructor(e,i,n,o,c,p){this.fb=e;this.dialogRef=i;this.employeesService=n;this.snackbar=o;this.translationService=c;this.employee=p}form;loading=!1;loadingManagers=!1;managers=[];ngOnInit(){this.initForm(),this.loadManagers()}get isArabic(){return this.translationService.language()==="ar"}initForm(){this.form=this.fb.group({managerId:[this.employee.managerId||null]})}loadManagers(){this.loadingManagers=!0,this.employeesService.getAll().subscribe({next:e=>{e.success&&e.data&&(this.managers=e.data.filter(i=>i.id!==this.employee.id&&i.isActive)),this.loadingManagers=!1},error:()=>{this.loadingManagers=!1}})}translate(e){return this.translationService.translate(e)}getEmployeeName(e){return this.isArabic?e.fullNameAr:e.fullNameEn}onSubmit(){this.loading=!0;let e=this.form.value.managerId||null;this.employeesService.assignManager(this.employee.id,e).subscribe({next:()=>{this.snackbar.success(this.translate("admin.employees.managerAssigned")),this.dialogRef.close(!0)},error:i=>{this.snackbar.error(i.message||this.translate("admin.employees.errors.assignManagerFailed")),this.loading=!1}})}onCancel(){this.dialogRef.close()}static \u0275fac=function(i){return new(i||t)(h(pe),h(G),h(De),h(L),h(N),h($))};static \u0275cmp=E({type:t,selectors:[["app-employee-assign-manager-dialog"]],standalone:!1,decls:30,vars:17,consts:[["title","admin.employees.assignManager","saveLabel","common.assign",3,"save","cancel","loading"],[1,"dialog-form",3,"formGroup"],[1,"form-section","section-primary"],[1,"section-header"],[1,"section-icon"],[1,"section-title"],[1,"section-content"],[1,"employee-info"],[1,"label"],[1,"value"],["appearance","outline"],["matPrefix",""],["formControlName","managerId"],[3,"value"]],template:function(i,n){i&1&&(r(0,"app-base-dialog",0),P("save",function(){return n.onSubmit()})("cancel",function(){return n.onCancel()}),r(1,"form",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"mat-icon"),s(6,"supervisor_account"),a()(),r(7,"div",5),s(8),d(9,"translate"),a()(),r(10,"div",6)(11,"div",7)(12,"span",8),s(13),d(14,"translate"),a(),r(15,"span",9),s(16),a()(),r(17,"mat-form-field",10)(18,"mat-label"),s(19),d(20,"translate"),a(),r(21,"mat-icon",11),s(22,"supervisor_account"),a(),r(23,"mat-select",12)(24,"mat-option",13),s(25),d(26,"translate"),a(),Y(27,vd,2,3,"mat-option",13,hd),a(),b(29,_d,3,3,"mat-hint"),a()()()()()),i&2&&(v("loading",n.loading),l(),v("formGroup",n.form),l(7),f(m(9,9,"admin.employees.selectManager")),l(5),T("",m(14,11,"admin.employees.employee"),":"),l(3),f(n.isArabic?n.employee.fullNameAr:n.employee.fullNameEn),l(3),f(m(20,13,"admin.employees.manager")),l(5),v("value",null),l(),f(m(26,15,"admin.employees.noManager")),l(2),X(n.managers),l(2),y(n.loadingManagers?29:-1))},dependencies:[le,ne,re,ce,se,K,Q,nt,oe,B,Te,Ae,j,A],styles:[".employee-info[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px;padding:12px 16px;background:#f0f4f8;border-radius:8px;margin-bottom:16px}.employee-info[_ngcontent-%COMP%]   .label[_ngcontent-%COMP%]{font-size:.9rem;color:var(--p-color)}.employee-info[_ngcontent-%COMP%]   .value[_ngcontent-%COMP%]{font-weight:600;color:var(--secondary-color)}"]})};var Cd=(t,e)=>e.id;function xd(t,e){if(t&1&&(r(0,"mat-option",13),s(1),a()),t&2){let i=e.$implicit;v("value",i.id),l(),de("",i.username," (",i.email,")")}}function bd(t,e){t&1&&(r(0,"mat-hint"),s(1),d(2,"translate"),a()),t&2&&(l(),f(m(2,1,"common.loading")))}var un=class t{constructor(e,i,n,o,c,p,g){this.fb=e;this.dialogRef=i;this.employeesService=n;this.usersService=o;this.snackbar=c;this.translationService=p;this.employee=g}form;loading=!1;loadingUsers=!1;availableUsers=[];ngOnInit(){this.initForm(),this.loadAvailableUsers()}get isArabic(){return this.translationService.language()==="ar"}initForm(){this.form=this.fb.group({userId:[this.employee.userId||null]})}loadAvailableUsers(){this.loadingUsers=!0,this.usersService.getAll().subscribe({next:e=>{e.success&&e.data&&(this.availableUsers=e.data.filter(i=>i.isActive)),this.loadingUsers=!1},error:()=>{this.loadingUsers=!1}})}translate(e){return this.translationService.translate(e)}onSubmit(){this.loading=!0;let e=this.form.value.userId||null;this.employeesService.linkToUser(this.employee.id,e).subscribe({next:()=>{this.snackbar.success(this.translate("admin.employees.linkedToUser")),this.dialogRef.close(!0)},error:i=>{this.snackbar.error(i.message||this.translate("admin.employees.errors.linkToUserFailed")),this.loading=!1}})}onCancel(){this.dialogRef.close()}static \u0275fac=function(i){return new(i||t)(h(pe),h(G),h(De),h(dt),h(L),h(N),h($))};static \u0275cmp=E({type:t,selectors:[["app-employee-link-user-dialog"]],standalone:!1,decls:30,vars:17,consts:[["title","admin.employees.linkToUser","saveLabel","common.link",3,"save","cancel","loading"],[1,"dialog-form",3,"formGroup"],[1,"form-section","section-purple"],[1,"section-header"],[1,"section-icon"],[1,"section-title"],[1,"section-content"],[1,"employee-info"],[1,"label"],[1,"value"],["appearance","outline"],["matPrefix",""],["formControlName","userId"],[3,"value"]],template:function(i,n){i&1&&(r(0,"app-base-dialog",0),P("save",function(){return n.onSubmit()})("cancel",function(){return n.onCancel()}),r(1,"form",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"mat-icon"),s(6,"person_add"),a()(),r(7,"div",5),s(8),d(9,"translate"),a()(),r(10,"div",6)(11,"div",7)(12,"span",8),s(13),d(14,"translate"),a(),r(15,"span",9),s(16),a()(),r(17,"mat-form-field",10)(18,"mat-label"),s(19),d(20,"translate"),a(),r(21,"mat-icon",11),s(22,"person"),a(),r(23,"mat-select",12)(24,"mat-option",13),s(25),d(26,"translate"),a(),Y(27,xd,2,3,"mat-option",13,Cd),a(),b(29,bd,3,3,"mat-hint"),a()()()()()),i&2&&(v("loading",n.loading),l(),v("formGroup",n.form),l(7),f(m(9,9,"admin.employees.selectUser")),l(5),T("",m(14,11,"admin.employees.employee"),":"),l(3),f(n.isArabic?n.employee.fullNameAr:n.employee.fullNameEn),l(3),f(m(20,13,"admin.employees.user")),l(5),v("value",null),l(),f(m(26,15,"admin.employees.noUser")),l(2),X(n.availableUsers),l(2),y(n.loadingUsers?29:-1))},dependencies:[le,ne,re,ce,se,K,Q,nt,oe,B,Te,Ae,j,A],styles:[".employee-info[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px;padding:12px 16px;background:#f0f4f8;border-radius:8px;margin-bottom:16px}.employee-info[_ngcontent-%COMP%]   .label[_ngcontent-%COMP%]{font-size:.9rem;color:var(--p-color)}.employee-info[_ngcontent-%COMP%]   .value[_ngcontent-%COMP%]{font-weight:600;color:var(--secondary-color)}"]})};var cl={EMPLOYEE:"Employee"};var Md=["fileInput"],hn=class t{constructor(e,i,n,o,c,p){this.employeesService=e;this.filesService=i;this.snackbar=n;this.dialog=o;this.translationService=c;this.cdr=p}fileInput;employees=[];totalCount=0;loading=!1;pageNumber=1;pageSize=10;sortBy;sortDescending=!1;filterValues={};gridConfig;selectedEmployeeForUpload=null;ngOnInit(){this.initGridConfig(),this.loadEmployees()}get isArabic(){return this.translationService.language()==="ar"}initGridConfig(){this.gridConfig={title:"admin.employees.title",subtitle:"admin.employees.subtitle",addButton:{label:"admin.employees.addEmployee",icon:"add",color:"primary",permission:F.EMPLOYEES_CREATE},showSearch:!0,searchPlaceholder:this.translate("admin.employees.searchPlaceholder"),filters:[{key:"status",label:"admin.employees.statusFilter",type:"select",defaultValue:"all",options:[{value:"all",label:"admin.employees.all"},{value:"active",label:"admin.employees.active"},{value:"inactive",label:"admin.employees.inactive"}]}],columns:[{key:"employeeCode",header:"admin.employees.code",sortable:!0},{key:"fullName",header:"admin.employees.name",sortable:!0,cell:e=>this.isArabic?e.fullNameAr:e.fullNameEn},{key:"email",header:"admin.employees.email",cell:e=>e.email||"-"},{key:"department",header:"admin.employees.department",sortable:!0,cell:e=>e.departmentName||"-"},{key:"position",header:"admin.employees.position",cell:e=>e.positionName||"-"},{key:"manager",header:"admin.employees.manager",cell:e=>e.manager?this.isArabic?e.manager.fullNameAr:e.manager.fullNameEn:"-"},{key:"isActive",header:"admin.employees.status",type:"badge",badge:e=>({text:e.isActive?"admin.employees.active":"admin.employees.inactive",color:e.isActive?"success":"warn"})}],actions:[{icon:"visibility",tooltip:"admin.employees.view",color:"info",onClick:e=>this.openViewDialog(e)},{icon:"edit",tooltip:"admin.employees.edit",permission:F.EMPLOYEES_UPDATE,color:"info",onClick:e=>this.openEditDialog(e)},{icon:"supervisor_account",tooltip:"admin.employees.assignManager",permission:F.EMPLOYEES_ASSIGN_MANAGER,color:"primary",onClick:e=>this.openAssignManagerDialog(e)},{icon:"person_add",tooltip:"admin.employees.linkToUser",permission:F.EMPLOYEES_LINK_TO_USER,color:"primary",onClick:e=>this.openLinkToUserDialog(e),visible:e=>!e.userId},{icon:"photo_camera",tooltip:"admin.employees.uploadPhoto",permission:F.EMPLOYEES_UPDATE,color:"primary",onClick:e=>this.triggerFileUpload(e)},{icon:"delete",tooltip:"admin.employees.delete",permission:F.EMPLOYEES_DELETE,color:"warn",onClick:e=>this.deleteEmployee(e)}],serverSide:!0,pageSizeOptions:[5,10,25,50],defaultPageSize:10}}translate(e){return this.translationService.translate(e)}loadEmployees(){this.loading=!0;let e={pageNumber:this.pageNumber,pageSize:this.pageSize,search:this.filterValues.search||void 0,sortBy:this.sortBy,sortDescending:this.sortDescending};this.employeesService.getPaged(e).subscribe({next:i=>{if(i.success&&i.data){let n=i.data.data,o=this.filterValues.status;o&&o!=="all"&&(n=n.filter(c=>o==="active"?c.isActive:!c.isActive)),this.employees=n,this.totalCount=i.data.totalCount}this.loading=!1,this.cdr.markForCheck()},error:()=>{this.loading=!1,this.cdr.markForCheck()}})}onPageChange(e){this.pageNumber=e.pageIndex+1,this.pageSize=e.pageSize,this.loadEmployees()}onSortChange(e){this.sortBy=e.active,this.sortDescending=e.direction==="desc",this.loadEmployees()}onFilterChange(e){this.filterValues=e,this.pageNumber=1,this.loadEmployees()}openCreateDialog(){let e={mode:"create"};this.dialog.open(si,{data:e,disableClose:!0}).afterClosed().subscribe(n=>{n&&this.loadEmployees()})}openEditDialog(e){let i={mode:"edit",employee:e};this.dialog.open(si,{data:i,disableClose:!0}).afterClosed().subscribe(o=>{o&&this.loadEmployees()})}openViewDialog(e){this.dialog.open(fn,{data:e})}openAssignManagerDialog(e){this.dialog.open(gn,{data:e,disableClose:!0}).afterClosed().subscribe(n=>{n&&this.loadEmployees()})}openLinkToUserDialog(e){this.dialog.open(un,{data:e,disableClose:!0}).afterClosed().subscribe(n=>{n&&this.loadEmployees()})}triggerFileUpload(e){this.selectedEmployeeForUpload=e,this.fileInput.nativeElement.click()}onFileSelected(e){let i=e.target;if(!i.files?.length||!this.selectedEmployeeForUpload)return;let n=i.files[0];this.loading=!0,this.filesService.upload({file:n,entityId:this.selectedEmployeeForUpload.id,entityType:cl.EMPLOYEE,removeOldFiles:!0}).subscribe({next:()=>{this.snackbar.success(this.translate("admin.employees.photoUploaded")),this.loading=!1,this.selectedEmployeeForUpload=null,this.cdr.markForCheck(),i.value=""},error:o=>{this.cdr.markForCheck(),this.loading=!1,this.selectedEmployeeForUpload=null,i.value=""}})}deleteEmployee(e){let i={title:this.translate("admin.employees.deleteEmployee"),message:this.translate("admin.employees.confirmDelete"),confirmLabel:this.translate("common.delete"),cancelLabel:this.translate("common.cancel"),confirmColor:"warn",icon:"delete"};this.dialog.open(Ce,{width:"400px",data:i}).afterClosed().subscribe(o=>{o&&(this.loading=!0,this.employeesService.delete(e.id).subscribe({next:()=>{this.snackbar.success(this.translate("admin.employees.employeeDeleted")),this.loadEmployees()},error:c=>{this.snackbar.error(c.message||this.translate("admin.employees.errors.deleteFailed")),this.loading=!1}}))})}static \u0275fac=function(i){return new(i||t)(h(De),h(Si),h(L),h(Pe),h(N),h(W))};static \u0275cmp=E({type:t,selectors:[["app-employees-component"]],viewQuery:function(i,n){if(i&1&&Dt(Md,5),i&2){let o;ut(o=ht())&&(n.fileInput=o.first)}},standalone:!1,decls:3,vars:6,consts:[["fileInput",""],[3,"pageChange","sortChange","filterChange","addClick","data","config","totalCount","loading","pageIndex","pageSize"],["type","file","accept","image/*",2,"display","none",3,"change"]],template:function(i,n){if(i&1){let o=z();r(0,"app-data-grid",1),P("pageChange",function(p){return I(o),k(n.onPageChange(p))})("sortChange",function(p){return I(o),k(n.onSortChange(p))})("filterChange",function(p){return I(o),k(n.onFilterChange(p))})("addClick",function(){return I(o),k(n.openCreateDialog())}),a(),r(1,"input",2,0),P("change",function(p){return I(o),k(n.onFileSelected(p))}),a()}i&2&&v("data",n.employees)("config",n.gridConfig)("totalCount",n.totalCount)("loading",n.loading)("pageIndex",n.pageNumber-1)("pageSize",n.pageSize)},dependencies:[Se],styles:["[_nghost-%COMP%]{display:block}"]})};function Pd(t,e){t&1&&(r(0,"mat-error"),s(1),d(2,"translate"),a()),t&2&&(l(),f(m(2,1,"admin.positions.errors.codeRequired")))}function Od(t,e){t&1&&(r(0,"mat-error"),s(1),d(2,"translate"),a()),t&2&&(l(),f(m(2,1,"admin.positions.errors.nameEnRequired")))}function Dd(t,e){t&1&&(r(0,"mat-error"),s(1),d(2,"translate"),a()),t&2&&(l(),f(m(2,1,"admin.positions.errors.nameArRequired")))}function wd(t,e){t&1&&(r(0,"mat-error"),s(1),d(2,"translate"),a()),t&2&&(l(),f(m(2,1,"admin.positions.errors.salaryMin")))}function Sd(t,e){t&1&&(r(0,"mat-error"),s(1),d(2,"translate"),a()),t&2&&(l(),f(m(2,1,"admin.positions.errors.salaryMin")))}var ci=class t{constructor(e,i,n,o,c,p){this.fb=e;this.dialogRef=i;this.positionsService=n;this.snackbar=o;this.translationService=c;this.data=p;this.mode=p.mode}form;mode;loading=!1;ngOnInit(){this.initForm()}get isCreateMode(){return this.mode==="create"}get isEditMode(){return this.mode==="edit"}get dialogTitle(){return this.isCreateMode?"admin.positions.createPosition":"admin.positions.editPosition"}get saveLabel(){return this.isCreateMode?"common.create":"common.update"}initForm(){if(this.isEditMode){let e=this.data.position;this.form=this.fb.group({code:[e.code,[M.required,M.maxLength(50)]],nameEn:[e.nameEn,[M.required,M.maxLength(200)]],nameAr:[e.nameAr,[M.required,M.maxLength(200)]],descriptionEn:[e.descriptionEn,[M.maxLength(500)]],descriptionAr:[e.descriptionAr,[M.maxLength(500)]],minSalary:[e.minSalary,[M.min(0)]],maxSalary:[e.maxSalary,[M.min(0)]],isActive:[e.isActive]})}else this.form=this.fb.group({code:["",[M.required,M.maxLength(50)]],nameEn:["",[M.required,M.maxLength(200)]],nameAr:["",[M.required,M.maxLength(200)]],descriptionEn:["",[M.maxLength(500)]],descriptionAr:["",[M.maxLength(500)]],minSalary:[null,[M.min(0)]],maxSalary:[null,[M.min(0)]],isActive:[!0]})}translate(e){return this.translationService.translate(e)}onSubmit(){if(this.form.invalid){this.form.markAllAsTouched();return}this.loading=!0,this.isEditMode?this.updatePosition():this.createPosition()}createPosition(){let e={code:this.form.value.code,nameEn:this.form.value.nameEn,nameAr:this.form.value.nameAr,descriptionEn:this.form.value.descriptionEn||void 0,descriptionAr:this.form.value.descriptionAr||void 0,minSalary:this.form.value.minSalary||void 0,maxSalary:this.form.value.maxSalary||void 0,isActive:this.form.value.isActive};this.positionsService.create(e).subscribe({next:()=>{this.snackbar.success(this.translate("admin.positions.positionCreated")),this.dialogRef.close(!0)},error:i=>{this.snackbar.error(i.message||this.translate("admin.positions.errors.createFailed")),this.loading=!1}})}updatePosition(){let e={code:this.form.value.code,nameEn:this.form.value.nameEn,nameAr:this.form.value.nameAr,descriptionEn:this.form.value.descriptionEn||void 0,descriptionAr:this.form.value.descriptionAr||void 0,minSalary:this.form.value.minSalary||void 0,maxSalary:this.form.value.maxSalary||void 0,isActive:this.form.value.isActive};this.positionsService.update(this.data.position.id,e).subscribe({next:()=>{this.snackbar.success(this.translate("admin.positions.positionUpdated")),this.dialogRef.close(!0)},error:i=>{this.snackbar.error(i.message||this.translate("admin.positions.errors.updateFailed")),this.loading=!1}})}onCancel(){this.dialogRef.close()}static \u0275fac=function(i){return new(i||t)(h(pe),h(G),h(qe),h(L),h(N),h($))};static \u0275cmp=E({type:t,selectors:[["app-position-dialog"]],standalone:!1,decls:91,vars:64,consts:[[3,"save","cancel","title","saveLabel","saveDisabled","loading"],[1,"dialog-form",3,"formGroup"],[1,"form-section","section-primary"],[1,"section-header"],[1,"section-icon"],[1,"section-title"],[1,"section-content"],["appearance","outline"],["matPrefix",""],["matInput","","formControlName","code",3,"placeholder"],[1,"form-row"],["matInput","","formControlName","nameEn",3,"placeholder"],["matInput","","formControlName","nameAr","dir","rtl",3,"placeholder"],[1,"form-section","section-blue"],["matInput","","formControlName","descriptionEn","rows","3",3,"placeholder"],["matInput","","formControlName","descriptionAr","rows","3","dir","rtl",3,"placeholder"],[1,"form-section","section-orange"],["matInput","","type","number","formControlName","minSalary",3,"placeholder"],["matInput","","type","number","formControlName","maxSalary",3,"placeholder"],["formControlName","isActive","color","primary"]],template:function(i,n){if(i&1&&(r(0,"app-base-dialog",0),P("save",function(){return n.onSubmit()})("cancel",function(){return n.onCancel()}),r(1,"form",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"mat-icon"),s(6,"work_outline"),a()(),r(7,"div",5),s(8),d(9,"translate"),a()(),r(10,"div",6)(11,"mat-form-field",7)(12,"mat-label"),s(13),d(14,"translate"),a(),r(15,"mat-icon",8),s(16,"badge"),a(),D(17,"input",9),d(18,"translate"),b(19,Pd,3,3,"mat-error"),a(),r(20,"div",10)(21,"mat-form-field",7)(22,"mat-label"),s(23),d(24,"translate"),a(),r(25,"mat-icon",8),s(26,"translate"),a(),D(27,"input",11),d(28,"translate"),b(29,Od,3,3,"mat-error"),a(),r(30,"mat-form-field",7)(31,"mat-label"),s(32),d(33,"translate"),a(),r(34,"mat-icon",8),s(35,"translate"),a(),D(36,"input",12),d(37,"translate"),b(38,Dd,3,3,"mat-error"),a()()()(),r(39,"div",13)(40,"div",3)(41,"div",4)(42,"mat-icon"),s(43,"description"),a()(),r(44,"div",5),s(45),d(46,"translate"),a()(),r(47,"div",6)(48,"mat-form-field",7)(49,"mat-label"),s(50),d(51,"translate"),a(),D(52,"textarea",14),d(53,"translate"),a(),r(54,"mat-form-field",7)(55,"mat-label"),s(56),d(57,"translate"),a(),D(58,"textarea",15),d(59,"translate"),a()()(),r(60,"div",16)(61,"div",3)(62,"div",4)(63,"mat-icon"),s(64,"attach_money"),a()(),r(65,"div",5),s(66),d(67,"translate"),a()(),r(68,"div",6)(69,"div",10)(70,"mat-form-field",7)(71,"mat-label"),s(72),d(73,"translate"),a(),r(74,"mat-icon",8),s(75,"money"),a(),D(76,"input",17),d(77,"translate"),b(78,wd,3,3,"mat-error"),a(),r(79,"mat-form-field",7)(80,"mat-label"),s(81),d(82,"translate"),a(),r(83,"mat-icon",8),s(84,"money"),a(),D(85,"input",18),d(86,"translate"),b(87,Sd,3,3,"mat-error"),a()(),r(88,"mat-checkbox",19),s(89),d(90,"translate"),a()()()()()),i&2){let o,c,p,g,_;v("title",n.dialogTitle)("saveLabel",n.saveLabel)("saveDisabled",n.form.invalid)("loading",n.loading),l(),v("formGroup",n.form),l(7),f(m(9,28,"admin.positions.basicInfo")),l(5),f(m(14,30,"admin.positions.code")),l(4),v("placeholder",m(18,32,"admin.positions.placeholders.code")),l(2),y((o=n.form.get("code"))!=null&&o.hasError("required")&&((o=n.form.get("code"))!=null&&o.touched)?19:-1),l(4),f(m(24,34,"admin.positions.nameEn")),l(4),v("placeholder",m(28,36,"admin.positions.placeholders.nameEn")),l(2),y((c=n.form.get("nameEn"))!=null&&c.hasError("required")&&((c=n.form.get("nameEn"))!=null&&c.touched)?29:-1),l(3),f(m(33,38,"admin.positions.nameAr")),l(4),v("placeholder",m(37,40,"admin.positions.placeholders.nameAr")),l(2),y((p=n.form.get("nameAr"))!=null&&p.hasError("required")&&((p=n.form.get("nameAr"))!=null&&p.touched)?38:-1),l(7),f(m(46,42,"admin.positions.descriptionSection")),l(5),f(m(51,44,"admin.positions.descriptionEn")),l(2),v("placeholder",m(53,46,"admin.positions.placeholders.descriptionEn")),l(4),f(m(57,48,"admin.positions.descriptionAr")),l(2),v("placeholder",m(59,50,"admin.positions.placeholders.descriptionAr")),l(8),f(m(67,52,"admin.positions.salarySection")),l(6),f(m(73,54,"admin.positions.minSalary")),l(4),v("placeholder",m(77,56,"admin.positions.placeholders.minSalary")),l(2),y((g=n.form.get("minSalary"))!=null&&g.hasError("min")&&((g=n.form.get("minSalary"))!=null&&g.touched)?78:-1),l(3),f(m(82,58,"admin.positions.maxSalary")),l(4),v("placeholder",m(86,60,"admin.positions.placeholders.maxSalary")),l(2),y((_=n.form.get("maxSalary"))!=null&&_.hasError("min")&&((_=n.form.get("maxSalary"))!=null&&_.touched)?87:-1),l(2),T(" ",m(90,62,"admin.positions.isActive")," ")}},dependencies:[le,Me,bi,ne,re,ce,se,_e,K,Q,ke,oe,ve,Ue,B,j,A],styles:[".view-content[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:1.25rem}.view-fields[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:12px;padding:16px!important}.view-fields[_ngcontent-%COMP%]   .view-field[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:4px}.view-fields[_ngcontent-%COMP%]   .view-field[_ngcontent-%COMP%]   .field-label[_ngcontent-%COMP%]{font-size:.8rem;color:var(--p-color);font-weight:500;text-transform:uppercase;letter-spacing:.5px}.view-fields[_ngcontent-%COMP%]   .view-field[_ngcontent-%COMP%]   .field-value[_ngcontent-%COMP%]{font-size:1rem;color:var(--secondary-color);font-weight:500}.view-fields[_ngcontent-%COMP%]   .view-field[_ngcontent-%COMP%]   .field-value.description[_ngcontent-%COMP%]{white-space:pre-wrap;line-height:1.5}.position-info[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px;padding:12px 16px;background:#f0f4f8;border-radius:8px;margin-bottom:16px}.position-info[_ngcontent-%COMP%]   .label[_ngcontent-%COMP%]{font-size:.9rem;color:var(--p-color)}.position-info[_ngcontent-%COMP%]   .value[_ngcontent-%COMP%]{font-weight:600;color:var(--secondary-color)}"]})};function Ed(t,e){t&1&&(r(0,"mat-chip",11),s(1),d(2,"translate"),a()),t&2&&(l(),f(m(2,1,"admin.positions.active")))}function Id(t,e){t&1&&(r(0,"mat-chip",12),s(1),d(2,"translate"),a()),t&2&&(l(),f(m(2,1,"admin.positions.inactive")))}function kd(t,e){if(t&1&&(r(0,"div",7)(1,"span",8),s(2),d(3,"translate"),a(),r(4,"span",17),s(5),a()()),t&2){let i=C(2);l(2),f(m(3,2,"admin.positions.descriptionEn")),l(3),f(i.position.descriptionEn)}}function Ad(t,e){if(t&1&&(r(0,"div",7)(1,"span",8),s(2),d(3,"translate"),a(),r(4,"span",18),s(5),a()()),t&2){let i=C(2);l(2),f(m(3,2,"admin.positions.descriptionAr")),l(3),f(i.position.descriptionAr)}}function Td(t,e){if(t&1&&(r(0,"div",13)(1,"div",3)(2,"div",4)(3,"mat-icon"),s(4,"description"),a()(),r(5,"div",5),s(6),d(7,"translate"),a()(),r(8,"div",6),b(9,kd,6,4,"div",7),b(10,Ad,6,4,"div",7),a()()),t&2){let i=C();l(6),f(m(7,3,"admin.positions.descriptionSection")),l(3),y(i.position.descriptionEn?9:-1),l(),y(i.position.descriptionAr?10:-1)}}var vn=class t{constructor(e,i,n){this.dialogRef=e;this.translationService=i;this.position=n}get isArabic(){return this.translationService.language()==="ar"}getDepartmentName(){return this.position.departmentId?this.isArabic?this.position.departmentNameAr||"-":this.position.departmentNameEn||"-":"-"}getSalaryRange(){if(!this.position.minSalary&&!this.position.maxSalary)return"-";let e=this.position.minSalary?.toLocaleString()||"0",i=this.position.maxSalary?.toLocaleString()||"\u221E";return`${e} - ${i}`}onClose(){this.dialogRef.close()}static \u0275fac=function(i){return new(i||t)(h(G),h(N),h($))};static \u0275cmp=E({type:t,selectors:[["app-position-view-dialog"]],standalone:!1,decls:62,vars:35,consts:[["title","admin.positions.viewPosition",3,"showActions"],[1,"view-content"],[1,"form-section","section-primary"],[1,"section-header"],[1,"section-icon"],[1,"section-title"],[1,"section-content","view-fields"],[1,"view-field"],[1,"field-label"],[1,"field-value"],["dir","rtl",1,"field-value"],["color","primary"],["color","warn"],[1,"form-section","section-blue"],[1,"form-section","section-orange"],[1,"dialog-actions"],["mat-raised-button","","color","primary",3,"click"],[1,"field-value","description"],["dir","rtl",1,"field-value","description"]],template:function(i,n){i&1&&(r(0,"app-base-dialog",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"mat-icon"),s(6,"work_outline"),a()(),r(7,"div",5),s(8),d(9,"translate"),a()(),r(10,"div",6)(11,"div",7)(12,"span",8),s(13),d(14,"translate"),a(),r(15,"span",9),s(16),a()(),r(17,"div",7)(18,"span",8),s(19),d(20,"translate"),a(),r(21,"span",9),s(22),a()(),r(23,"div",7)(24,"span",8),s(25),d(26,"translate"),a(),r(27,"span",10),s(28),a()(),r(29,"div",7)(30,"span",8),s(31),d(32,"translate"),a(),r(33,"span",9),b(34,Ed,3,3,"mat-chip",11)(35,Id,3,3,"mat-chip",12),a()()()(),b(36,Td,11,5,"div",13),r(37,"div",14)(38,"div",3)(39,"div",4)(40,"mat-icon"),s(41,"attach_money"),a()(),r(42,"div",5),s(43),d(44,"translate"),a()(),r(45,"div",6)(46,"div",7)(47,"span",8),s(48),d(49,"translate"),a(),r(50,"span",9),s(51),a()(),r(52,"div",7)(53,"span",8),s(54),d(55,"translate"),a(),r(56,"span",9),s(57),a()()()(),r(58,"div",15)(59,"button",16),P("click",function(){return n.onClose()}),s(60),d(61,"translate"),a()()()()),i&2&&(v("showActions",!1),l(8),f(m(9,17,"admin.positions.basicInfo")),l(5),f(m(14,19,"admin.positions.code")),l(3),f(n.position.code),l(3),f(m(20,21,"admin.positions.nameEn")),l(3),f(n.position.nameEn),l(3),f(m(26,23,"admin.positions.nameAr")),l(3),f(n.position.nameAr),l(3),f(m(32,25,"admin.positions.status")),l(3),y(n.position.isActive?34:35),l(2),y(n.position.descriptionEn||n.position.descriptionAr?36:-1),l(7),f(m(44,27,"admin.positions.salarySection")),l(5),f(m(49,29,"admin.positions.salaryRange")),l(3),f(n.getSalaryRange()),l(3),f(m(55,31,"admin.positions.department")),l(3),f(n.getDepartmentName()),l(3),T(" ",m(61,33,"common.close")," "))},dependencies:[ve,fe,B,rt,j,A],styles:[".view-content[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:1.25rem}.view-content[_ngcontent-%COMP%]   .dialog-actions[_ngcontent-%COMP%]{display:flex;justify-content:flex-end;padding-top:16px}.view-fields[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:12px;padding:16px!important}.view-fields[_ngcontent-%COMP%]   .view-field[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:4px}.view-fields[_ngcontent-%COMP%]   .view-field[_ngcontent-%COMP%]   .field-label[_ngcontent-%COMP%]{font-size:.8rem;color:var(--p-color);font-weight:500;text-transform:uppercase;letter-spacing:.5px}.view-fields[_ngcontent-%COMP%]   .view-field[_ngcontent-%COMP%]   .field-value[_ngcontent-%COMP%]{font-size:1rem;color:var(--secondary-color);font-weight:500}.view-fields[_ngcontent-%COMP%]   .view-field[_ngcontent-%COMP%]   .field-value.description[_ngcontent-%COMP%]{white-space:pre-wrap;line-height:1.5}"]})};var _n=class t{constructor(e,i,n,o,c,p,g){this.fb=e;this.dialogRef=i;this.positionsService=n;this.departmentsService=o;this.snackbar=c;this.translationService=p;this.position=g}form;loading=!1;departmentsDataSource$;departmentMapper=e=>({value:e.id,label:`${this.isArabic?e.nameAr:e.nameEn} (${e.code})`});ngOnInit(){this.initForm(),this.departmentsDataSource$=this.departmentsService.getActiveDepartments()}get isArabic(){return this.translationService.language()==="ar"}initForm(){this.form=this.fb.group({departmentId:[this.position.departmentId||null]})}translate(e){return this.translationService.translate(e)}onSubmit(){this.loading=!0;let e=this.form.value.departmentId||null;this.positionsService.assignDepartment(this.position.id,e).subscribe({next:()=>{this.snackbar.success(this.translate("admin.positions.departmentAssigned")),this.dialogRef.close(!0)},error:i=>{this.snackbar.error(i.message||this.translate("admin.positions.errors.assignDepartmentFailed")),this.loading=!1}})}onCancel(){this.dialogRef.close()}static \u0275fac=function(i){return new(i||t)(h(pe),h(G),h(qe),h(xe),h(L),h(N),h($))};static \u0275cmp=E({type:t,selectors:[["app-position-assign-department-dialog"]],standalone:!1,decls:18,vars:12,consts:[["title","admin.positions.assignDepartment","saveLabel","common.assign",3,"save","cancel","loading"],[1,"dialog-form",3,"formGroup"],[1,"form-section","section-primary"],[1,"section-header"],[1,"section-icon"],[1,"section-title"],[1,"section-content"],[1,"position-info"],[1,"label"],[1,"value"],["formControlName","departmentId","label","admin.positions.department","icon","business","nullOptionLabel","admin.positions.noDepartment",3,"dataSource$","optionMapper","resetOnDataSourceChange"]],template:function(i,n){i&1&&(r(0,"app-base-dialog",0),P("save",function(){return n.onSubmit()})("cancel",function(){return n.onCancel()}),r(1,"form",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"mat-icon"),s(6,"business"),a()(),r(7,"div",5),s(8),d(9,"translate"),a()(),r(10,"div",6)(11,"div",7)(12,"span",8),s(13),d(14,"translate"),a(),r(15,"span",9),s(16),a()(),D(17,"app-async-select",10),a()()()()),i&2&&(v("loading",n.loading),l(),v("formGroup",n.form),l(7),f(m(9,8,"admin.positions.selectDepartment")),l(5),T("",m(14,10,"admin.positions.position"),":"),l(3),f(n.isArabic?n.position.nameAr:n.position.nameEn),l(),v("dataSource$",n.departmentsDataSource$)("optionMapper",n.departmentMapper)("resetOnDataSourceChange",!1))},dependencies:[le,ne,re,ce,se,B,j,ft,A],styles:[".position-info[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px;padding:12px 16px;background:#f0f4f8;border-radius:8px;margin-bottom:16px}.position-info[_ngcontent-%COMP%]   .label[_ngcontent-%COMP%]{font-size:.9rem;color:var(--p-color)}.position-info[_ngcontent-%COMP%]   .value[_ngcontent-%COMP%]{font-weight:600;color:var(--secondary-color)}"]})};var Cn=class t{constructor(e,i,n,o,c){this.positionsService=e;this.snackbar=i;this.dialog=n;this.translationService=o;this.cdr=c}positions=[];totalCount=0;loading=!1;pageNumber=1;pageSize=10;sortBy;sortDescending=!1;filterValues={};gridConfig;ngOnInit(){this.initGridConfig(),this.loadPositions()}get isArabic(){return this.translationService.language()==="ar"}initGridConfig(){this.gridConfig={title:"admin.positions.title",subtitle:"admin.positions.subtitle",addButton:{label:"admin.positions.addPosition",icon:"add",color:"primary",permission:F.POSITIONS_CREATE},showSearch:!0,searchPlaceholder:this.translate("admin.positions.searchPlaceholder"),filters:[{key:"status",label:"admin.positions.statusFilter",type:"select",defaultValue:"all",options:[{value:"all",label:"admin.positions.all"},{value:"active",label:"admin.positions.active"},{value:"inactive",label:"admin.positions.inactive"}]}],columns:[{key:"code",header:"admin.positions.code",sortable:!0},{key:"name",header:"admin.positions.name",sortable:!0,cell:e=>this.isArabic?e.nameAr:e.nameEn},{key:"department",header:"admin.positions.department",cell:e=>e.departmentId?this.isArabic?e.departmentNameAr||"-":e.departmentNameEn||"-":"-"},{key:"salaryRange",header:"admin.positions.salaryRange",cell:e=>{if(!e.minSalary&&!e.maxSalary)return"-";let i=e.minSalary?.toLocaleString()||"0",n=e.maxSalary?.toLocaleString()||"\u221E";return`${i} - ${n}`}},{key:"isActive",header:"admin.positions.status",type:"badge",badge:e=>({text:e.isActive?"admin.positions.active":"admin.positions.inactive",color:e.isActive?"success":"warn"})}],actions:[{icon:"visibility",tooltip:"admin.positions.view",color:"info",onClick:e=>this.openViewDialog(e)},{icon:"edit",tooltip:"admin.positions.edit",permission:F.POSITIONS_UPDATE,color:"info",onClick:e=>this.openEditDialog(e)},{icon:"business",tooltip:"admin.positions.assignDepartment",permission:F.POSITIONS_UPDATE,color:"primary",onClick:e=>this.openAssignDepartmentDialog(e)},{icon:"delete",tooltip:"admin.positions.delete",permission:F.POSITIONS_DELETE,color:"warn",onClick:e=>this.deletePosition(e)}],serverSide:!0,pageSizeOptions:[5,10,25,50],defaultPageSize:10}}translate(e){return this.translationService.translate(e)}loadPositions(){this.loading=!0;let e={pageNumber:this.pageNumber,pageSize:this.pageSize,search:this.filterValues.search||void 0,sortBy:this.sortBy,sortDescending:this.sortDescending};this.positionsService.getPaged(e).subscribe({next:i=>{if(i.success&&i.data){let n=i.data.data,o=this.filterValues.status;o&&o!=="all"&&(n=n.filter(c=>o==="active"?c.isActive:!c.isActive)),this.positions=n,this.totalCount=i.data.totalCount}this.loading=!1,this.cdr.detectChanges()},error:i=>{this.loading=!1,this.cdr.detectChanges()}})}onPageChange(e){this.pageNumber=e.pageIndex+1,this.pageSize=e.pageSize,this.loadPositions()}onSortChange(e){this.sortBy=e.active,this.sortDescending=e.direction==="desc",this.loadPositions()}onFilterChange(e){this.filterValues=e,this.pageNumber=1,this.loadPositions()}openCreateDialog(){let e={mode:"create"};this.dialog.open(ci,{data:e,disableClose:!0}).afterClosed().subscribe(n=>{n&&this.loadPositions()})}openEditDialog(e){let i={mode:"edit",position:e};this.dialog.open(ci,{data:i,disableClose:!0}).afterClosed().subscribe(o=>{o&&this.loadPositions()})}openViewDialog(e){this.dialog.open(vn,{width:"700px",data:e})}openAssignDepartmentDialog(e){this.dialog.open(_n,{data:e,disableClose:!0}).afterClosed().subscribe(n=>{n&&this.loadPositions()})}deletePosition(e){let i={title:this.translate("admin.positions.deletePosition"),message:this.translate("admin.positions.confirmDelete"),confirmLabel:this.translate("common.delete"),cancelLabel:this.translate("common.cancel"),confirmColor:"warn",icon:"delete"};this.dialog.open(Ce,{data:i}).afterClosed().subscribe(o=>{o&&(this.loading=!0,this.positionsService.delete(e.id).subscribe({next:()=>{this.snackbar.success(this.translate("admin.positions.positionDeleted")),this.loadPositions()},error:c=>{this.snackbar.error(c.message||this.translate("admin.positions.errors.deleteFailed")),this.loading=!1}}))})}static \u0275fac=function(i){return new(i||t)(h(qe),h(L),h(Pe),h(N),h(W))};static \u0275cmp=E({type:t,selectors:[["app-positions-component"]],standalone:!1,decls:1,vars:6,consts:[[3,"pageChange","sortChange","filterChange","addClick","data","config","totalCount","loading","pageIndex","pageSize"]],template:function(i,n){i&1&&(r(0,"app-data-grid",0),P("pageChange",function(c){return n.onPageChange(c)})("sortChange",function(c){return n.onSortChange(c)})("filterChange",function(c){return n.onFilterChange(c)})("addClick",function(){return n.openCreateDialog()}),a()),i&2&&v("data",n.positions)("config",n.gridConfig)("totalCount",n.totalCount)("loading",n.loading)("pageIndex",n.pageNumber-1)("pageSize",n.pageSize)},dependencies:[Se],styles:["[_nghost-%COMP%]{display:block}"]})};var pl=(t,e)=>e.id;function Bd(t,e){t&1&&(r(0,"mat-error"),s(1),d(2,"translate"),a()),t&2&&(l(),f(m(2,1,"admin.departments.errors.codeRequired")))}function Nd(t,e){t&1&&(r(0,"mat-error"),s(1),d(2,"translate"),a()),t&2&&(l(),f(m(2,1,"admin.departments.errors.nameEnRequired")))}function Rd(t,e){t&1&&(r(0,"mat-error"),s(1),d(2,"translate"),a()),t&2&&(l(),f(m(2,1,"admin.departments.errors.nameArRequired")))}function Fd(t,e){if(t&1&&(r(0,"mat-option",18),s(1),a()),t&2){let i=e.$implicit,n=C();v("value",i.id),l(),de("",n.getDepartmentName(i)," (",i.code,")")}}function Vd(t,e){t&1&&(r(0,"mat-hint"),s(1),d(2,"translate"),a()),t&2&&(l(),f(m(2,1,"common.loading")))}function zd(t,e){if(t&1&&(r(0,"mat-option",18),s(1),a()),t&2){let i=e.$implicit,n=C();v("value",i.id),l(),de("",n.getEmployeeName(i)," (",i.employeeCode,")")}}function Ld(t,e){t&1&&(r(0,"mat-hint"),s(1),d(2,"translate"),a()),t&2&&(l(),f(m(2,1,"common.loading")))}var pi=class t{constructor(e,i,n,o,c,p,g){this.fb=e;this.dialogRef=i;this.departmentsService=n;this.employeesService=o;this.snackbar=c;this.translationService=p;this.data=g;this.mode=g.mode}form;mode;loading=!1;loadingDepartments=!1;loadingEmployees=!1;departments=[];employees=[];ngOnInit(){this.initForm(),this.loadDependencies()}get isArabic(){return this.translationService.language()==="ar"}get isCreateMode(){return this.mode==="create"}get isEditMode(){return this.mode==="edit"}get dialogTitle(){return this.isCreateMode?"admin.departments.createDepartment":"admin.departments.editDepartment"}get saveLabel(){return this.isCreateMode?"common.create":"common.update"}initForm(){if(this.isEditMode){let e=this.data.department;this.form=this.fb.group({code:[e.code,[M.required,M.maxLength(50)]],nameEn:[e.nameEn,[M.required,M.maxLength(200)]],nameAr:[e.nameAr,[M.required,M.maxLength(200)]],descriptionEn:[e.descriptionEn,[M.maxLength(500)]],descriptionAr:[e.descriptionAr,[M.maxLength(500)]],isActive:[e.isActive],parentDepartmentId:[e.parentDepartmentId],managerId:[e.managerId]})}else this.form=this.fb.group({code:["",[M.required,M.maxLength(50)]],nameEn:["",[M.required,M.maxLength(200)]],nameAr:["",[M.required,M.maxLength(200)]],descriptionEn:["",[M.maxLength(500)]],descriptionAr:["",[M.maxLength(500)]],isActive:[!0],parentDepartmentId:[null],managerId:[null]})}loadDependencies(){this.loadDepartments(),this.loadEmployees()}loadDepartments(){this.loadingDepartments=!0,this.departmentsService.getActiveDepartments().subscribe({next:e=>{e.success&&e.data&&(this.departments=e.data.filter(i=>i.id!==this.data.department?.id)),this.loadingDepartments=!1},error:()=>{this.loadingDepartments=!1}})}loadEmployees(){this.loadingEmployees=!0,this.employeesService.getAll().subscribe({next:e=>{e.success&&e.data&&(this.employees=e.data.filter(i=>i.isActive)),this.loadingEmployees=!1},error:()=>{this.loadingEmployees=!1}})}translate(e){return this.translationService.translate(e)}getDepartmentName(e){return this.isArabic?e.nameAr:e.nameEn}getEmployeeName(e){return this.isArabic?e.fullNameAr:e.fullNameEn}onSubmit(){if(this.form.invalid){this.form.markAllAsTouched();return}this.loading=!0,this.isEditMode?this.updateDepartment():this.createDepartment()}createDepartment(){let e={code:this.form.value.code,nameEn:this.form.value.nameEn,nameAr:this.form.value.nameAr,descriptionEn:this.form.value.descriptionEn||void 0,descriptionAr:this.form.value.descriptionAr||void 0,isActive:this.form.value.isActive,parentDepartmentId:this.form.value.parentDepartmentId||void 0,managerId:this.form.value.managerId||void 0};this.departmentsService.create(e).subscribe({next:()=>{this.snackbar.success(this.translate("admin.departments.departmentCreated")),this.dialogRef.close(!0)},error:i=>{this.snackbar.error(i.message||this.translate("admin.departments.errors.createFailed")),this.loading=!1}})}updateDepartment(){let e={code:this.form.value.code,nameEn:this.form.value.nameEn,nameAr:this.form.value.nameAr,descriptionEn:this.form.value.descriptionEn||void 0,descriptionAr:this.form.value.descriptionAr||void 0,isActive:this.form.value.isActive,parentDepartmentId:this.form.value.parentDepartmentId||void 0,managerId:this.form.value.managerId||void 0};this.departmentsService.update(this.data.department.id,e).subscribe({next:()=>{this.snackbar.success(this.translate("admin.departments.departmentUpdated")),this.dialogRef.close(!0)},error:i=>{this.snackbar.error(i.message||this.translate("admin.departments.errors.updateFailed")),this.loading=!1}})}onCancel(){this.dialogRef.close()}static \u0275fac=function(i){return new(i||t)(h(pe),h(G),h(xe),h(De),h(L),h(N),h($))};static \u0275cmp=E({type:t,selectors:[["app-department-dialog"]],standalone:!1,decls:98,vars:66,consts:[[3,"save","cancel","title","saveLabel","saveDisabled","loading"],[1,"dialog-form",3,"formGroup"],[1,"form-section","section-primary"],[1,"section-header"],[1,"section-icon"],[1,"section-title"],[1,"section-content"],["appearance","outline"],["matPrefix",""],["matInput","","formControlName","code",3,"placeholder"],[1,"form-row"],["matInput","","formControlName","nameEn",3,"placeholder"],["matInput","","formControlName","nameAr","dir","rtl",3,"placeholder"],[1,"form-section","section-blue"],["matInput","","formControlName","descriptionEn","rows","3",3,"placeholder"],["matInput","","formControlName","descriptionAr","rows","3","dir","rtl",3,"placeholder"],[1,"form-section","section-orange"],["formControlName","parentDepartmentId"],[3,"value"],["formControlName","managerId"],["formControlName","isActive","color","primary"]],template:function(i,n){if(i&1&&(r(0,"app-base-dialog",0),P("save",function(){return n.onSubmit()})("cancel",function(){return n.onCancel()}),r(1,"form",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"mat-icon"),s(6,"business"),a()(),r(7,"div",5),s(8),d(9,"translate"),a()(),r(10,"div",6)(11,"mat-form-field",7)(12,"mat-label"),s(13),d(14,"translate"),a(),r(15,"mat-icon",8),s(16,"badge"),a(),D(17,"input",9),d(18,"translate"),b(19,Bd,3,3,"mat-error"),a(),r(20,"div",10)(21,"mat-form-field",7)(22,"mat-label"),s(23),d(24,"translate"),a(),r(25,"mat-icon",8),s(26,"translate"),a(),D(27,"input",11),d(28,"translate"),b(29,Nd,3,3,"mat-error"),a(),r(30,"mat-form-field",7)(31,"mat-label"),s(32),d(33,"translate"),a(),r(34,"mat-icon",8),s(35,"translate"),a(),D(36,"input",12),d(37,"translate"),b(38,Rd,3,3,"mat-error"),a()()()(),r(39,"div",13)(40,"div",3)(41,"div",4)(42,"mat-icon"),s(43,"description"),a()(),r(44,"div",5),s(45),d(46,"translate"),a()(),r(47,"div",6)(48,"mat-form-field",7)(49,"mat-label"),s(50),d(51,"translate"),a(),D(52,"textarea",14),d(53,"translate"),a(),r(54,"mat-form-field",7)(55,"mat-label"),s(56),d(57,"translate"),a(),D(58,"textarea",15),d(59,"translate"),a()()(),r(60,"div",16)(61,"div",3)(62,"div",4)(63,"mat-icon"),s(64,"account_tree"),a()(),r(65,"div",5),s(66),d(67,"translate"),a()(),r(68,"div",6)(69,"mat-form-field",7)(70,"mat-label"),s(71),d(72,"translate"),a(),r(73,"mat-icon",8),s(74,"subdirectory_arrow_right"),a(),r(75,"mat-select",17)(76,"mat-option",18),s(77),d(78,"translate"),a(),Y(79,Fd,2,3,"mat-option",18,pl),a(),b(81,Vd,3,3,"mat-hint"),a(),r(82,"mat-form-field",7)(83,"mat-label"),s(84),d(85,"translate"),a(),r(86,"mat-icon",8),s(87,"supervisor_account"),a(),r(88,"mat-select",19)(89,"mat-option",18),s(90),d(91,"translate"),a(),Y(92,zd,2,3,"mat-option",18,pl),a(),b(94,Ld,3,3,"mat-hint"),a(),r(95,"mat-checkbox",20),s(96),d(97,"translate"),a()()()()()),i&2){let o,c,p;v("title",n.dialogTitle)("saveLabel",n.saveLabel)("saveDisabled",n.form.invalid)("loading",n.loading),l(),v("formGroup",n.form),l(7),f(m(9,30,"admin.departments.basicInfo")),l(5),f(m(14,32,"admin.departments.code")),l(4),v("placeholder",m(18,34,"admin.departments.placeholders.code")),l(2),y((o=n.form.get("code"))!=null&&o.hasError("required")&&((o=n.form.get("code"))!=null&&o.touched)?19:-1),l(4),f(m(24,36,"admin.departments.nameEn")),l(4),v("placeholder",m(28,38,"admin.departments.placeholders.nameEn")),l(2),y((c=n.form.get("nameEn"))!=null&&c.hasError("required")&&((c=n.form.get("nameEn"))!=null&&c.touched)?29:-1),l(3),f(m(33,40,"admin.departments.nameAr")),l(4),v("placeholder",m(37,42,"admin.departments.placeholders.nameAr")),l(2),y((p=n.form.get("nameAr"))!=null&&p.hasError("required")&&((p=n.form.get("nameAr"))!=null&&p.touched)?38:-1),l(7),f(m(46,44,"admin.departments.descriptionSection")),l(5),f(m(51,46,"admin.departments.descriptionEn")),l(2),v("placeholder",m(53,48,"admin.departments.placeholders.descriptionEn")),l(4),f(m(57,50,"admin.departments.descriptionAr")),l(2),v("placeholder",m(59,52,"admin.departments.placeholders.descriptionAr")),l(8),f(m(67,54,"admin.departments.hierarchySection")),l(5),f(m(72,56,"admin.departments.parentDepartment")),l(5),v("value",null),l(),f(m(78,58,"admin.departments.noParent")),l(2),X(n.departments),l(2),y(n.loadingDepartments?81:-1),l(3),f(m(85,60,"admin.departments.manager")),l(5),v("value",null),l(),f(m(91,62,"admin.departments.noManager")),l(2),X(n.employees),l(2),y(n.loadingEmployees?94:-1),l(2),T(" ",m(97,64,"admin.departments.isActive")," ")}},dependencies:[le,Me,ne,re,ce,se,_e,K,Q,nt,ke,oe,ve,Ue,B,Te,Ae,j,A],styles:[".view-content[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:1.25rem}.view-fields[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:12px;padding:16px!important}.view-fields[_ngcontent-%COMP%]   .view-field[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:4px}.view-fields[_ngcontent-%COMP%]   .view-field[_ngcontent-%COMP%]   .field-label[_ngcontent-%COMP%]{font-size:.8rem;color:var(--p-color);font-weight:500;text-transform:uppercase;letter-spacing:.5px}.view-fields[_ngcontent-%COMP%]   .view-field[_ngcontent-%COMP%]   .field-value[_ngcontent-%COMP%]{font-size:1rem;color:var(--secondary-color);font-weight:500}.view-fields[_ngcontent-%COMP%]   .view-field[_ngcontent-%COMP%]   .field-value.description[_ngcontent-%COMP%]{white-space:pre-wrap;line-height:1.5}.department-info[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px;padding:12px 16px;background:#f0f4f8;border-radius:8px;margin-bottom:16px}.department-info[_ngcontent-%COMP%]   .label[_ngcontent-%COMP%]{font-size:.9rem;color:var(--p-color)}.department-info[_ngcontent-%COMP%]   .value[_ngcontent-%COMP%]{font-weight:600;color:var(--secondary-color)}"]})};function Ud(t,e){t&1&&(r(0,"mat-chip",11),s(1),d(2,"translate"),a()),t&2&&(l(),f(m(2,1,"admin.departments.active")))}function Gd(t,e){t&1&&(r(0,"mat-chip",12),s(1),d(2,"translate"),a()),t&2&&(l(),f(m(2,1,"admin.departments.inactive")))}function $d(t,e){if(t&1&&(r(0,"div",7)(1,"span",8),s(2),d(3,"translate"),a(),r(4,"span",17),s(5),a()()),t&2){let i=C(2);l(2),f(m(3,2,"admin.departments.descriptionEn")),l(3),f(i.department.descriptionEn)}}function jd(t,e){if(t&1&&(r(0,"div",7)(1,"span",8),s(2),d(3,"translate"),a(),r(4,"span",18),s(5),a()()),t&2){let i=C(2);l(2),f(m(3,2,"admin.departments.descriptionAr")),l(3),f(i.department.descriptionAr)}}function qd(t,e){if(t&1&&(r(0,"div",13)(1,"div",3)(2,"div",4)(3,"mat-icon"),s(4,"description"),a()(),r(5,"div",5),s(6),d(7,"translate"),a()(),r(8,"div",6),b(9,$d,6,4,"div",7),b(10,jd,6,4,"div",7),a()()),t&2){let i=C();l(6),f(m(7,3,"admin.departments.descriptionSection")),l(3),y(i.department.descriptionEn?9:-1),l(),y(i.department.descriptionAr?10:-1)}}var xn=class t{constructor(e,i,n){this.dialogRef=e;this.translationService=i;this.department=n}get isArabic(){return this.translationService.language()==="ar"}getParentDepartmentName(){return this.department.parentDepartment?this.isArabic?this.department.parentDepartment.nameAr:this.department.parentDepartment.nameEn:"-"}onClose(){this.dialogRef.close()}static \u0275fac=function(i){return new(i||t)(h(G),h(N),h($))};static \u0275cmp=E({type:t,selectors:[["app-department-view-dialog"]],standalone:!1,decls:62,vars:35,consts:[["title","admin.departments.viewDepartment",3,"showActions"],[1,"view-content"],[1,"form-section","section-primary"],[1,"section-header"],[1,"section-icon"],[1,"section-title"],[1,"section-content","view-fields"],[1,"view-field"],[1,"field-label"],[1,"field-value"],["dir","rtl",1,"field-value"],["color","primary"],["color","warn"],[1,"form-section","section-blue"],[1,"form-section","section-orange"],[1,"dialog-actions"],["mat-raised-button","","color","primary",3,"click"],[1,"field-value","description"],["dir","rtl",1,"field-value","description"]],template:function(i,n){i&1&&(r(0,"app-base-dialog",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"mat-icon"),s(6,"business"),a()(),r(7,"div",5),s(8),d(9,"translate"),a()(),r(10,"div",6)(11,"div",7)(12,"span",8),s(13),d(14,"translate"),a(),r(15,"span",9),s(16),a()(),r(17,"div",7)(18,"span",8),s(19),d(20,"translate"),a(),r(21,"span",9),s(22),a()(),r(23,"div",7)(24,"span",8),s(25),d(26,"translate"),a(),r(27,"span",10),s(28),a()(),r(29,"div",7)(30,"span",8),s(31),d(32,"translate"),a(),r(33,"span",9),b(34,Ud,3,3,"mat-chip",11)(35,Gd,3,3,"mat-chip",12),a()()()(),b(36,qd,11,5,"div",13),r(37,"div",14)(38,"div",3)(39,"div",4)(40,"mat-icon"),s(41,"account_tree"),a()(),r(42,"div",5),s(43),d(44,"translate"),a()(),r(45,"div",6)(46,"div",7)(47,"span",8),s(48),d(49,"translate"),a(),r(50,"span",9),s(51),a()(),r(52,"div",7)(53,"span",8),s(54),d(55,"translate"),a(),r(56,"span",9),s(57),a()()()(),r(58,"div",15)(59,"button",16),P("click",function(){return n.onClose()}),s(60),d(61,"translate"),a()()()()),i&2&&(v("showActions",!1),l(8),f(m(9,17,"admin.departments.basicInfo")),l(5),f(m(14,19,"admin.departments.code")),l(3),f(n.department.code),l(3),f(m(20,21,"admin.departments.nameEn")),l(3),f(n.department.nameEn),l(3),f(m(26,23,"admin.departments.nameAr")),l(3),f(n.department.nameAr),l(3),f(m(32,25,"admin.departments.status")),l(3),y(n.department.isActive?34:35),l(2),y(n.department.descriptionEn||n.department.descriptionAr?36:-1),l(7),f(m(44,27,"admin.departments.hierarchySection")),l(5),f(m(49,29,"admin.departments.parentDepartment")),l(3),f(n.getParentDepartmentName()),l(3),f(m(55,31,"admin.departments.manager")),l(3),f(n.department.managerName||"-"),l(3),T(" ",m(61,33,"common.close")," "))},dependencies:[ve,fe,B,rt,j,A],styles:[".view-content[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:1.25rem}.view-content[_ngcontent-%COMP%]   .dialog-actions[_ngcontent-%COMP%]{display:flex;justify-content:flex-end;padding-top:16px}.view-fields[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:12px;padding:16px!important}.view-fields[_ngcontent-%COMP%]   .view-field[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:4px}.view-fields[_ngcontent-%COMP%]   .view-field[_ngcontent-%COMP%]   .field-label[_ngcontent-%COMP%]{font-size:.8rem;color:var(--p-color);font-weight:500;text-transform:uppercase;letter-spacing:.5px}.view-fields[_ngcontent-%COMP%]   .view-field[_ngcontent-%COMP%]   .field-value[_ngcontent-%COMP%]{font-size:1rem;color:var(--secondary-color);font-weight:500}.view-fields[_ngcontent-%COMP%]   .view-field[_ngcontent-%COMP%]   .field-value.description[_ngcontent-%COMP%]{white-space:pre-wrap;line-height:1.5}"]})};var Hd=(t,e)=>e.id;function Yd(t,e){if(t&1&&(r(0,"mat-option",13),s(1),a()),t&2){let i=e.$implicit,n=C();v("value",i.id),l(),de("",n.getEmployeeName(i)," (",i.employeeCode,")")}}function Xd(t,e){t&1&&(r(0,"mat-hint"),s(1),d(2,"translate"),a()),t&2&&(l(),f(m(2,1,"common.loading")))}var bn=class t{constructor(e,i,n,o,c,p,g){this.fb=e;this.dialogRef=i;this.departmentsService=n;this.employeesService=o;this.snackbar=c;this.translationService=p;this.department=g}form;loading=!1;loadingEmployees=!1;employees=[];ngOnInit(){this.initForm(),this.loadEmployees()}get isArabic(){return this.translationService.language()==="ar"}initForm(){this.form=this.fb.group({managerId:[this.department.managerId||null]})}loadEmployees(){this.loadingEmployees=!0,this.employeesService.getAll().subscribe({next:e=>{e.success&&e.data&&(this.employees=e.data.filter(i=>i.isActive)),this.loadingEmployees=!1},error:()=>{this.loadingEmployees=!1}})}translate(e){return this.translationService.translate(e)}getEmployeeName(e){return this.isArabic?e.fullNameAr:e.fullNameEn}onSubmit(){this.loading=!0;let e=this.form.value.managerId||null;this.departmentsService.assignManager(this.department.id,e).subscribe({next:()=>{this.snackbar.success(this.translate("admin.departments.managerAssigned")),this.dialogRef.close(!0)},error:i=>{this.snackbar.error(i.message||this.translate("admin.departments.errors.assignManagerFailed")),this.loading=!1}})}onCancel(){this.dialogRef.close()}static \u0275fac=function(i){return new(i||t)(h(pe),h(G),h(xe),h(De),h(L),h(N),h($))};static \u0275cmp=E({type:t,selectors:[["app-department-assign-manager-dialog"]],standalone:!1,decls:30,vars:17,consts:[["title","admin.departments.assignManager","saveLabel","common.assign",3,"save","cancel","loading"],[1,"dialog-form",3,"formGroup"],[1,"form-section","section-primary"],[1,"section-header"],[1,"section-icon"],[1,"section-title"],[1,"section-content"],[1,"department-info"],[1,"label"],[1,"value"],["appearance","outline"],["matPrefix",""],["formControlName","managerId"],[3,"value"]],template:function(i,n){i&1&&(r(0,"app-base-dialog",0),P("save",function(){return n.onSubmit()})("cancel",function(){return n.onCancel()}),r(1,"form",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"mat-icon"),s(6,"supervisor_account"),a()(),r(7,"div",5),s(8),d(9,"translate"),a()(),r(10,"div",6)(11,"div",7)(12,"span",8),s(13),d(14,"translate"),a(),r(15,"span",9),s(16),a()(),r(17,"mat-form-field",10)(18,"mat-label"),s(19),d(20,"translate"),a(),r(21,"mat-icon",11),s(22,"supervisor_account"),a(),r(23,"mat-select",12)(24,"mat-option",13),s(25),d(26,"translate"),a(),Y(27,Yd,2,3,"mat-option",13,Hd),a(),b(29,Xd,3,3,"mat-hint"),a()()()()()),i&2&&(v("loading",n.loading),l(),v("formGroup",n.form),l(7),f(m(9,9,"admin.departments.selectManager")),l(5),T("",m(14,11,"admin.departments.department"),":"),l(3),f(n.isArabic?n.department.nameAr:n.department.nameEn),l(3),f(m(20,13,"admin.departments.manager")),l(5),v("value",null),l(),f(m(26,15,"admin.departments.noManager")),l(2),X(n.employees),l(2),y(n.loadingEmployees?29:-1))},dependencies:[le,ne,re,ce,se,K,Q,nt,oe,B,Te,Ae,j,A],styles:[".department-info[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px;padding:12px 16px;background:#f0f4f8;border-radius:8px;margin-bottom:16px}.department-info[_ngcontent-%COMP%]   .label[_ngcontent-%COMP%]{font-size:.9rem;color:var(--p-color)}.department-info[_ngcontent-%COMP%]   .value[_ngcontent-%COMP%]{font-weight:600;color:var(--secondary-color)}"]})};var yn=class t{constructor(e,i,n,o,c){this.departmentsService=e;this.snackbar=i;this.dialog=n;this.translationService=o;this.cdr=c}departments=[];totalCount=0;loading=!1;pageNumber=1;pageSize=10;sortBy;sortDescending=!1;filterValues={};gridConfig;ngOnInit(){this.initGridConfig(),this.loadDepartments()}get isArabic(){return this.translationService.language()==="ar"}initGridConfig(){this.gridConfig={title:"admin.departments.title",subtitle:"admin.departments.subtitle",addButton:{label:"admin.departments.addDepartment",icon:"add",color:"primary",permission:F.DEPARTMENTS_CREATE},showSearch:!0,searchPlaceholder:this.translate("admin.departments.searchPlaceholder"),filters:[{key:"status",label:"admin.departments.statusFilter",type:"select",defaultValue:"all",options:[{value:"all",label:"admin.departments.all"},{value:"active",label:"admin.departments.active"},{value:"inactive",label:"admin.departments.inactive"}]}],columns:[{key:"code",header:"admin.departments.code",sortable:!0},{key:"name",header:"admin.departments.name",sortable:!0,cell:e=>this.isArabic?e.nameAr:e.nameEn},{key:"parentDepartment",header:"admin.departments.parentDepartment",cell:e=>e.parentDepartment?this.isArabic?e.parentDepartment.nameAr:e.parentDepartment.nameEn:"-"},{key:"manager",header:"admin.departments.manager",cell:e=>e.managerName||"-"},{key:"isActive",header:"admin.departments.status",type:"badge",badge:e=>({text:e.isActive?"admin.departments.active":"admin.departments.inactive",color:e.isActive?"success":"warn"})}],actions:[{icon:"visibility",tooltip:"admin.departments.view",color:"info",onClick:e=>this.openViewDialog(e)},{icon:"account_tree",tooltip:"admin.departments.organizationChart",color:"success",onClick:e=>this.openOrgChart(e)},{icon:"edit",tooltip:"admin.departments.edit",permission:F.DEPARTMENTS_UPDATE,color:"info",onClick:e=>this.openEditDialog(e)},{icon:"supervisor_account",tooltip:"admin.departments.assignManager",permission:F.DEPARTMENTS_ASSIGN_MANAGER,color:"primary",onClick:e=>this.openAssignManagerDialog(e)},{icon:"delete",tooltip:"admin.departments.delete",permission:F.DEPARTMENTS_DELETE,color:"warn",onClick:e=>this.deleteDepartment(e)}],serverSide:!0,pageSizeOptions:[5,10,25,50],defaultPageSize:10}}translate(e){return this.translationService.translate(e)}loadDepartments(){this.loading=!0;let e={pageNumber:this.pageNumber,pageSize:this.pageSize,search:this.filterValues.search||void 0,sortBy:this.sortBy,sortDescending:this.sortDescending};this.departmentsService.getPaged(e).subscribe({next:i=>{if(i.success&&i.data){let n=i.data.data,o=this.filterValues.status;o&&o!=="all"&&(n=n.filter(c=>o==="active"?c.isActive:!c.isActive)),this.departments=n,this.totalCount=i.data.totalCount}this.loading=!1,this.cdr.detectChanges()},error:()=>{this.loading=!1,this.cdr.detectChanges()}})}onPageChange(e){this.pageNumber=e.pageIndex+1,this.pageSize=e.pageSize,this.loadDepartments()}onSortChange(e){this.sortBy=e.active,this.sortDescending=e.direction==="desc",this.loadDepartments()}onFilterChange(e){this.filterValues=e,this.pageNumber=1,this.loadDepartments()}openCreateDialog(){let e={mode:"create"};this.dialog.open(pi,{width:"700px",data:e,disableClose:!0}).afterClosed().subscribe(n=>{n&&this.loadDepartments()})}openEditDialog(e){let i={mode:"edit",department:e};this.dialog.open(pi,{width:"700px",data:i,disableClose:!0}).afterClosed().subscribe(o=>{o&&this.loadDepartments()})}openViewDialog(e){this.dialog.open(xn,{width:"700px",data:e})}openOrgChart(e){let i=`/admin/departments/${e.id}/org-chart`;window.open(i,"_blank")}openAssignManagerDialog(e){this.dialog.open(bn,{width:"500px",data:e,disableClose:!0}).afterClosed().subscribe(n=>{n&&this.loadDepartments()})}deleteDepartment(e){let i={title:this.translate("admin.departments.deleteDepartment"),message:this.translate("admin.departments.confirmDelete"),confirmLabel:this.translate("common.delete"),cancelLabel:this.translate("common.cancel"),confirmColor:"warn",icon:"delete"};this.dialog.open(Ce,{width:"400px",data:i}).afterClosed().subscribe(o=>{o&&(this.loading=!0,this.departmentsService.delete(e.id).subscribe({next:()=>{this.snackbar.success(this.translate("admin.departments.departmentDeleted")),this.loadDepartments()},error:c=>{this.snackbar.error(c.message||this.translate("admin.departments.errors.deleteFailed")),this.loading=!1}}))})}static \u0275fac=function(i){return new(i||t)(h(xe),h(L),h(Pe),h(N),h(W))};static \u0275cmp=E({type:t,selectors:[["app-departments-component"]],standalone:!1,decls:1,vars:6,consts:[[3,"pageChange","sortChange","filterChange","addClick","data","config","totalCount","loading","pageIndex","pageSize"]],template:function(i,n){i&1&&(r(0,"app-data-grid",0),P("pageChange",function(c){return n.onPageChange(c)})("sortChange",function(c){return n.onSortChange(c)})("filterChange",function(c){return n.onFilterChange(c)})("addClick",function(){return n.openCreateDialog()}),a()),i&2&&v("data",n.departments)("config",n.gridConfig)("totalCount",n.totalCount)("loading",n.loading)("pageIndex",n.pageNumber-1)("pageSize",n.pageSize)},dependencies:[Se],styles:["[_nghost-%COMP%]{display:block}"]})};function Wd(t,e){if(t&1&&(r(0,"p",9),s(1),a()),t&2){let i=C();l(),f(i.departmentName)}}function Qd(t,e){t&1&&(r(0,"div",10),D(1,"mat-spinner",11),a())}function Kd(t,e){if(t&1&&D(0,"app-org-chart",12),t&2){let i=C();v("departmentId",i.departmentId)}}var Mn=class t{constructor(e,i,n,o){this.route=e;this.translationService=i;this.departmentsService=n;this.cdr=o}departmentId=null;department=null;loading=!0;ngOnInit(){this.departmentId=this.route.snapshot.paramMap.get("id"),this.departmentId?this.loadDepartment():this.loading=!1}get isArabic(){return this.translationService.language()==="ar"}get departmentName(){return this.department?this.isArabic?this.department.nameAr:this.department.nameEn:""}loadDepartment(){this.departmentsService.getById(this.departmentId).subscribe({next:e=>{e.success&&e.data&&(this.department=e.data),this.loading=!1,this.cdr.detectChanges()},error:()=>{this.loading=!1,this.cdr.detectChanges()}})}static \u0275fac=function(i){return new(i||t)(h(Mo),h(N),h(xe),h(W))};static \u0275cmp=E({type:t,selectors:[["app-department-org-chart-page"]],standalone:!1,decls:13,vars:6,consts:[[1,"org-chart-page"],[1,"page-header"],[1,"header-content"],[1,"header-icon"],[1,"header-text"],["class","department-name",4,"ngIf"],[1,"page-content"],["class","loading-container",4,"ngIf"],[3,"departmentId",4,"ngIf"],[1,"department-name"],[1,"loading-container"],["diameter","40"],[3,"departmentId"]],template:function(i,n){i&1&&(r(0,"div",0)(1,"div",1)(2,"div",2)(3,"mat-icon",3),s(4,"account_tree"),a(),r(5,"div",4)(6,"h1"),s(7),d(8,"translate"),a(),gt(9,Wd,2,1,"p",5),a()()(),r(10,"div",6),gt(11,Qd,2,0,"div",7)(12,Kd,1,1,"app-org-chart",8),a()()),i&2&&(l(7),f(m(8,4,"admin.departments.organizationChart")),l(2),v("ngIf",n.department),l(2),v("ngIf",n.loading),l(),v("ngIf",!n.loading&&n.departmentId))},dependencies:[bo,B,Oe,Ft,A],styles:[".org-chart-page[_ngcontent-%COMP%]{height:100%;display:flex;flex-direction:column;background:#f8fafc}.org-chart-page[_ngcontent-%COMP%]   .page-header[_ngcontent-%COMP%]{padding:24px 32px;background:linear-gradient(135deg,#fff,#f8fafc);border-bottom:1px solid #e2e8f0}.org-chart-page[_ngcontent-%COMP%]   .page-header[_ngcontent-%COMP%]   .header-content[_ngcontent-%COMP%]{display:flex;align-items:center;gap:16px}.org-chart-page[_ngcontent-%COMP%]   .page-header[_ngcontent-%COMP%]   .header-icon[_ngcontent-%COMP%]{font-size:40px;width:40px;height:40px;color:#10b981}.org-chart-page[_ngcontent-%COMP%]   .page-header[_ngcontent-%COMP%]   .header-text[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{margin:0;font-size:1.5rem;font-weight:600;color:#1e293b}.org-chart-page[_ngcontent-%COMP%]   .page-header[_ngcontent-%COMP%]   .header-text[_ngcontent-%COMP%]   .department-name[_ngcontent-%COMP%]{margin:4px 0 0;font-size:1rem;color:#64748b}.org-chart-page[_ngcontent-%COMP%]   .page-content[_ngcontent-%COMP%]{flex:1;padding:24px;overflow:auto;min-height:0}.org-chart-page[_ngcontent-%COMP%]   .page-content[_ngcontent-%COMP%]   .loading-container[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;height:200px}.org-chart-page[_ngcontent-%COMP%]   .page-content[_ngcontent-%COMP%]   app-org-chart[_ngcontent-%COMP%]{display:block;height:100%;min-height:500px}"]})};function Jd(t,e){t&1&&(r(0,"mat-error"),s(1),d(2,"translate"),a()),t&2&&(l(),f(m(2,1,"admin.eventsAdmin.errors.titleEnRequired")))}function em(t,e){t&1&&(r(0,"mat-error"),s(1),d(2,"translate"),a()),t&2&&(l(),f(m(2,1,"admin.eventsAdmin.errors.titleArRequired")))}var di=class t{constructor(e,i,n,o,c,p,g){this.fb=e;this.dialogRef=i;this.eventsService=n;this.departmentsService=o;this.snackbar=c;this.translationService=p;this.data=g;this.mode=g.mode}form;mode;loading=!1;departmentsDataSource$;departmentMapper=e=>({value:e.id,label:`${this.isArabic?e.nameAr:e.nameEn} (${e.code})`});ngOnInit(){this.initForm(),this.departmentsDataSource$=this.departmentsService.getActiveDepartments()}get isArabic(){return this.translationService.language()==="ar"}get isCreateMode(){return this.mode==="create"}get isEditMode(){return this.mode==="edit"}get dialogTitle(){return this.isCreateMode?"admin.eventsAdmin.createEvent":"admin.eventsAdmin.editEvent"}get saveLabel(){return this.isCreateMode?"common.create":"common.update"}initForm(){if(this.isEditMode){let e=this.data.event;this.form=this.fb.group({titleEn:[e.titleEn,[M.required,M.maxLength(200)]],titleAr:[e.titleAr,[M.required,M.maxLength(200)]],descriptionEn:[e.descriptionEn,[M.maxLength(2e3)]],descriptionAr:[e.descriptionAr,[M.maxLength(2e3)]],eventDate:[e.eventDate?new Date(e.eventDate):null],eventUrl:[e.eventUrl,[M.maxLength(500)]],departmentId:[e.departmentId]})}else this.form=this.fb.group({titleEn:["",[M.required,M.maxLength(200)]],titleAr:["",[M.required,M.maxLength(200)]],descriptionEn:["",[M.maxLength(2e3)]],descriptionAr:["",[M.maxLength(2e3)]],eventDate:[null],eventUrl:["",[M.maxLength(500)]],departmentId:[null]})}translate(e){return this.translationService.translate(e)}onSubmit(){if(this.form.invalid){this.form.markAllAsTouched();return}this.loading=!0,this.isEditMode?this.updateEvent():this.createEvent()}createEvent(){let e={titleEn:this.form.value.titleEn,titleAr:this.form.value.titleAr,descriptionEn:this.form.value.descriptionEn||void 0,descriptionAr:this.form.value.descriptionAr||void 0,eventDate:this.form.value.eventDate||void 0,eventUrl:this.form.value.eventUrl||void 0,departmentId:this.form.value.departmentId||void 0};this.eventsService.create(e).subscribe({next:()=>{this.snackbar.success(this.translate("admin.eventsAdmin.eventCreated")),this.dialogRef.close(!0)},error:i=>{this.snackbar.error(i.message||this.translate("admin.eventsAdmin.errors.createFailed")),this.loading=!1}})}updateEvent(){let e={titleEn:this.form.value.titleEn,titleAr:this.form.value.titleAr,descriptionEn:this.form.value.descriptionEn||void 0,descriptionAr:this.form.value.descriptionAr||void 0,eventDate:this.form.value.eventDate||void 0,eventUrl:this.form.value.eventUrl||void 0,departmentId:this.form.value.departmentId||void 0};this.eventsService.update(this.data.event.id,e).subscribe({next:()=>{this.snackbar.success(this.translate("admin.eventsAdmin.eventUpdated")),this.dialogRef.close(!0)},error:i=>{this.snackbar.error(i.message||this.translate("admin.eventsAdmin.errors.updateFailed")),this.loading=!1}})}onCancel(){this.dialogRef.close()}static \u0275fac=function(i){return new(i||t)(h(pe),h(G),h(Ei),h(xe),h(L),h(N),h($))};static \u0275cmp=E({type:t,selectors:[["app-event-dialog"]],standalone:!1,decls:74,vars:57,consts:[[3,"save","cancel","title","saveLabel","saveDisabled","loading"],[1,"dialog-form",3,"formGroup"],[1,"form-section","section-primary"],[1,"section-header"],[1,"section-icon"],[1,"section-title"],[1,"section-content"],[1,"form-row"],["appearance","outline"],["matPrefix",""],["matInput","","formControlName","titleEn",3,"placeholder"],["matInput","","formControlName","titleAr","dir","rtl",3,"placeholder"],[1,"form-section","section-blue"],["matInput","","formControlName","descriptionEn","rows","3",3,"placeholder"],["matInput","","formControlName","descriptionAr","rows","3","dir","rtl",3,"placeholder"],[1,"form-section","section-orange"],["formControlName","eventDate","icon","calendar_today",3,"label"],["matInput","","formControlName","eventUrl",3,"placeholder"],["formControlName","departmentId","icon","business",3,"label","nullOptionLabel","dataSource$","optionMapper"]],template:function(i,n){if(i&1&&(r(0,"app-base-dialog",0),P("save",function(){return n.onSubmit()})("cancel",function(){return n.onCancel()}),r(1,"form",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"mat-icon"),s(6,"event"),a()(),r(7,"div",5),s(8),d(9,"translate"),a()(),r(10,"div",6)(11,"div",7)(12,"mat-form-field",8)(13,"mat-label"),s(14),d(15,"translate"),a(),r(16,"mat-icon",9),s(17,"title"),a(),D(18,"input",10),d(19,"translate"),b(20,Jd,3,3,"mat-error"),a(),r(21,"mat-form-field",8)(22,"mat-label"),s(23),d(24,"translate"),a(),r(25,"mat-icon",9),s(26,"title"),a(),D(27,"input",11),d(28,"translate"),b(29,em,3,3,"mat-error"),a()()()(),r(30,"div",12)(31,"div",3)(32,"div",4)(33,"mat-icon"),s(34,"description"),a()(),r(35,"div",5),s(36),d(37,"translate"),a()(),r(38,"div",6)(39,"mat-form-field",8)(40,"mat-label"),s(41),d(42,"translate"),a(),D(43,"textarea",13),d(44,"translate"),a(),r(45,"mat-form-field",8)(46,"mat-label"),s(47),d(48,"translate"),a(),D(49,"textarea",14),d(50,"translate"),a()()(),r(51,"div",15)(52,"div",3)(53,"div",4)(54,"mat-icon"),s(55,"link"),a()(),r(56,"div",5),s(57),d(58,"translate"),a()(),r(59,"div",6)(60,"div",7),D(61,"app-date-picker",16),d(62,"translate"),r(63,"mat-form-field",8)(64,"mat-label"),s(65),d(66,"translate"),a(),r(67,"mat-icon",9),s(68,"link"),a(),D(69,"input",17),d(70,"translate"),a()(),D(71,"app-async-select",18),d(72,"translate"),d(73,"translate"),a()()()()),i&2){let o,c;v("title",n.dialogTitle)("saveLabel",n.saveLabel)("saveDisabled",n.form.invalid)("loading",n.loading),l(),v("formGroup",n.form),l(7),f(m(9,25,"admin.eventsAdmin.basicInfo")),l(6),f(m(15,27,"admin.eventsAdmin.titleEn")),l(4),v("placeholder",m(19,29,"admin.eventsAdmin.placeholders.titleEn")),l(2),y((o=n.form.get("titleEn"))!=null&&o.hasError("required")&&((o=n.form.get("titleEn"))!=null&&o.touched)?20:-1),l(3),f(m(24,31,"admin.eventsAdmin.titleAr")),l(4),v("placeholder",m(28,33,"admin.eventsAdmin.placeholders.titleAr")),l(2),y((c=n.form.get("titleAr"))!=null&&c.hasError("required")&&((c=n.form.get("titleAr"))!=null&&c.touched)?29:-1),l(7),f(m(37,35,"admin.eventsAdmin.descriptionSection")),l(5),f(m(42,37,"admin.eventsAdmin.descriptionEn")),l(2),v("placeholder",m(44,39,"admin.eventsAdmin.placeholders.descriptionEn")),l(4),f(m(48,41,"admin.eventsAdmin.descriptionAr")),l(2),v("placeholder",m(50,43,"admin.eventsAdmin.placeholders.descriptionAr")),l(8),f(m(58,45,"admin.eventsAdmin.detailsSection")),l(4),v("label",m(62,47,"admin.eventsAdmin.eventDate")),l(4),f(m(66,49,"admin.eventsAdmin.eventUrl")),l(4),v("placeholder",m(70,51,"admin.eventsAdmin.placeholders.eventUrl")),l(2),v("label",m(72,53,"admin.eventsAdmin.department"))("nullOptionLabel",m(73,55,"admin.eventsAdmin.noDepartment"))("dataSource$",n.departmentsDataSource$)("optionMapper",n.departmentMapper)}},dependencies:[le,Me,ne,re,ce,se,_e,K,Q,ke,oe,ve,B,j,ft,Gt,A],styles:[".view-content[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:1.25rem}.view-fields[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:12px;padding:16px!important}.view-fields[_ngcontent-%COMP%]   .view-field[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:4px}.view-fields[_ngcontent-%COMP%]   .view-field[_ngcontent-%COMP%]   .field-label[_ngcontent-%COMP%]{font-size:.8rem;color:var(--p-color);font-weight:500;text-transform:uppercase;letter-spacing:.5px}.view-fields[_ngcontent-%COMP%]   .view-field[_ngcontent-%COMP%]   .field-value[_ngcontent-%COMP%]{font-size:1rem;color:var(--secondary-color);font-weight:500}.view-fields[_ngcontent-%COMP%]   .view-field[_ngcontent-%COMP%]   .field-value.description[_ngcontent-%COMP%]{white-space:pre-wrap;line-height:1.5}"]})};function tm(t,e){if(t&1&&(r(0,"div",7)(1,"span",8),s(2),d(3,"translate"),a(),r(4,"span",16),s(5),a()()),t&2){let i=C(2);l(2),f(m(3,2,"admin.eventsAdmin.descriptionEn")),l(3),f(i.event.descriptionEn)}}function im(t,e){if(t&1&&(r(0,"div",7)(1,"span",8),s(2),d(3,"translate"),a(),r(4,"span",17),s(5),a()()),t&2){let i=C(2);l(2),f(m(3,2,"admin.eventsAdmin.descriptionAr")),l(3),f(i.event.descriptionAr)}}function nm(t,e){if(t&1&&(r(0,"div",11)(1,"div",3)(2,"div",4)(3,"mat-icon"),s(4,"description"),a()(),r(5,"div",5),s(6),d(7,"translate"),a()(),r(8,"div",6),b(9,tm,6,4,"div",7),b(10,im,6,4,"div",7),a()()),t&2){let i=C();l(6),f(m(7,3,"admin.eventsAdmin.descriptionSection")),l(3),y(i.event.descriptionEn?9:-1),l(),y(i.event.descriptionAr?10:-1)}}function om(t,e){if(t&1&&(r(0,"a",13),s(1),a()),t&2){let i=C();v("href",i.event.eventUrl,fo),l(),f(i.event.eventUrl)}}function am(t,e){t&1&&s(0," - ")}var Pn=class t{constructor(e,i,n){this.dialogRef=e;this.translationService=i;this.event=n}get isArabic(){return this.translationService.language()==="ar"}getDepartmentName(){return this.event.departmentId?this.isArabic?this.event.departmentNameAr||"-":this.event.departmentNameEn||"-":"-"}onClose(){this.dialogRef.close()}static \u0275fac=function(i){return new(i||t)(h(G),h(N),h($))};static \u0275cmp=E({type:t,selectors:[["app-event-view-dialog"]],standalone:!1,decls:50,vars:27,consts:[["title","admin.eventsAdmin.viewEvent",3,"showActions"],[1,"view-content"],[1,"form-section","section-primary"],[1,"section-header"],[1,"section-icon"],[1,"section-title"],[1,"section-content","view-fields"],[1,"view-field"],[1,"field-label"],[1,"field-value"],["dir","rtl",1,"field-value"],[1,"form-section","section-blue"],[1,"form-section","section-orange"],["target","_blank","rel","noopener noreferrer",3,"href"],[1,"dialog-actions"],["mat-raised-button","","color","primary",3,"click"],[1,"field-value","description"],["dir","rtl",1,"field-value","description"]],template:function(i,n){i&1&&(r(0,"app-base-dialog",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"mat-icon"),s(6,"event"),a()(),r(7,"div",5),s(8),d(9,"translate"),a()(),r(10,"div",6)(11,"div",7)(12,"span",8),s(13),d(14,"translate"),a(),r(15,"span",9),s(16),a()(),r(17,"div",7)(18,"span",8),s(19),d(20,"translate"),a(),r(21,"span",10),s(22),a()()()(),b(23,nm,11,5,"div",11),r(24,"div",12)(25,"div",3)(26,"div",4)(27,"mat-icon"),s(28,"link"),a()(),r(29,"div",5),s(30),d(31,"translate"),a()(),r(32,"div",6)(33,"div",7)(34,"span",8),s(35),d(36,"translate"),a(),r(37,"span",9),b(38,om,2,2,"a",13)(39,am,1,0),a()(),r(40,"div",7)(41,"span",8),s(42),d(43,"translate"),a(),r(44,"span",9),s(45),a()()()(),r(46,"div",14)(47,"button",15),P("click",function(){return n.onClose()}),s(48),d(49,"translate"),a()()()()),i&2&&(v("showActions",!1),l(8),f(m(9,13,"admin.eventsAdmin.basicInfo")),l(5),f(m(14,15,"admin.eventsAdmin.titleEn")),l(3),f(n.event.titleEn),l(3),f(m(20,17,"admin.eventsAdmin.titleAr")),l(3),f(n.event.titleAr),l(),y(n.event.descriptionEn||n.event.descriptionAr?23:-1),l(7),f(m(31,19,"admin.eventsAdmin.detailsSection")),l(5),f(m(36,21,"admin.eventsAdmin.eventUrl")),l(3),y(n.event.eventUrl?38:39),l(4),f(m(43,23,"admin.eventsAdmin.department")),l(3),f(n.getDepartmentName()),l(3),T(" ",m(49,25,"common.close")," "))},dependencies:[ve,fe,B,j,A],styles:[".view-content[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:1.25rem}.view-content[_ngcontent-%COMP%]   .dialog-actions[_ngcontent-%COMP%]{display:flex;justify-content:flex-end;padding-top:16px}.view-fields[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:12px;padding:16px!important}.view-fields[_ngcontent-%COMP%]   .view-field[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:4px}.view-fields[_ngcontent-%COMP%]   .view-field[_ngcontent-%COMP%]   .field-label[_ngcontent-%COMP%]{font-size:.8rem;color:var(--p-color);font-weight:500;text-transform:uppercase;letter-spacing:.5px}.view-fields[_ngcontent-%COMP%]   .view-field[_ngcontent-%COMP%]   .field-value[_ngcontent-%COMP%]{font-size:1rem;color:var(--secondary-color);font-weight:500}.view-fields[_ngcontent-%COMP%]   .view-field[_ngcontent-%COMP%]   .field-value.description[_ngcontent-%COMP%]{white-space:pre-wrap;line-height:1.5}.view-fields[_ngcontent-%COMP%]   .view-field[_ngcontent-%COMP%]   .field-value[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:var(--primary-color);text-decoration:none}.view-fields[_ngcontent-%COMP%]   .view-field[_ngcontent-%COMP%]   .field-value[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{text-decoration:underline}"]})};var rm=(t,e)=>e.id,dl=(t,e)=>e.file.name;function lm(t,e){t&1&&(r(0,"div",4),D(1,"mat-spinner",8),r(2,"span"),s(3),d(4,"translate"),a()()),t&2&&(l(3),f(m(4,1,"common.loadingFiles")))}function sm(t,e){t&1&&D(0,"mat-spinner",16)}function cm(t,e){if(t&1){let i=z();r(0,"mat-checkbox",23),P("change",function(){I(i);let o=C().$implicit,c=C(2);return k(c.setExistingAsPrimary(o))}),s(1),d(2,"translate"),a()}if(t&2){let i=C().$implicit,n=C(2);v("checked",i.isPrimary)("disabled",!!n.updatingPrimaryId),l(),T(" ",m(2,3,"common.primary")," ")}}function pm(t,e){t&1&&D(0,"mat-spinner",21)}function dm(t,e){t&1&&(r(0,"mat-icon",22),s(1,"delete"),a())}function mm(t,e){if(t&1){let i=z();r(0,"div",11)(1,"mat-icon",12),s(2,"insert_drive_file"),a(),r(3,"div",13),P("click",function(){let o=I(i).$implicit,c=C(2);return k(c.viewOrDownloadFile(o))}),r(4,"span",14),s(5),a(),r(6,"span",15),s(7),a()(),b(8,sm,1,0,"mat-spinner",16)(9,cm,3,5,"mat-checkbox",17),r(10,"button",18),d(11,"translate"),d(12,"translate"),P("click",function(){let o=I(i).$implicit,c=C(2);return k(c.viewOrDownloadFile(o))}),r(13,"mat-icon",19),s(14),a()(),r(15,"button",20),d(16,"translate"),P("click",function(){let o=I(i).$implicit,c=C(2);return k(c.deleteExistingFile(o))}),b(17,pm,1,0,"mat-spinner",21)(18,dm,2,0,"mat-icon",22),a()()}if(t&2){let i=e.$implicit,n=C(2);l(5),f(i.fileName),l(2),f(n.formatFileSize(i.size)),l(),y(i.id===n.updatingPrimaryId?8:9),l(2),v("matTooltip",n.isViewable(i)?m(11,8,"common.view"):m(12,10,"common.download")),l(4),f(n.isViewable(i)?"visibility":"download"),l(),v("disabled",i.id===n.deletingFileId)("matTooltip",m(16,12,"common.delete")),l(2),y(i.id===n.deletingFileId?17:18)}}function fm(t,e){if(t&1&&(r(0,"div",5)(1,"div",9)(2,"mat-icon"),s(3,"folder"),a(),r(4,"span"),s(5),d(6,"translate"),a()(),r(7,"div",10),Y(8,mm,19,14,"div",11,rm),a()()),t&2){let i=C();l(5),de("",m(6,2,"common.existingFiles")," (",i.existingFiles.length,")"),l(3),X(i.existingFiles)}}function gm(t,e){t&1&&D(0,"mat-spinner",16)}function um(t,e){if(t&1){let i=z();r(0,"button",37),P("click",function(){I(i);let o=C().$index,c=C(3);return k(c.removeFile(o))}),r(1,"mat-icon"),s(2,"close"),a()()}if(t&2){let i=C(4);v("disabled",i.uploading)}}function hm(t,e){if(t&1){let i=z();r(0,"div",32)(1,"div",33)(2,"mat-icon",12),s(3,"insert_drive_file"),a(),r(4,"div",34)(5,"span",14),s(6),a(),r(7,"span",15),s(8),a()()(),r(9,"div",35)(10,"mat-checkbox",23),P("change",function(){let o=I(i).$index,c=C(3);return k(c.setAsPrimary(o))}),s(11),d(12,"translate"),a(),b(13,gm,1,0,"mat-spinner",16)(14,um,3,1,"button",36),a()()}if(t&2){let i=e.$implicit,n=C(3);Ve("uploading",i.status==="uploading"),l(6),f(i.file.name),l(2),f(n.formatFileSize(i.file.size)),l(2),v("checked",i.isPrimary)("disabled",n.uploading||i.status==="uploading"),l(),T(" ",m(12,8,"common.primary")," "),l(2),y(i.status==="uploading"?13:14)}}function vm(t,e){if(t&1){let i=z();r(0,"div",27)(1,"div",28)(2,"span"),s(3),d(4,"translate"),a(),r(5,"button",29),P("click",function(){I(i);let o=C(2);return k(o.clearAll())}),r(6,"mat-icon"),s(7,"delete_sweep"),a(),s(8),d(9,"translate"),a()(),r(10,"div",30),Y(11,hm,15,10,"div",31,dl),a()()}if(t&2){let i=C(2);l(3),de("",m(4,4,"common.selectedFiles")," (",i.files.length,")"),l(2),v("disabled",i.uploading),l(3),T(" ",m(9,6,"common.clearAll")," "),l(3),X(i.files)}}function _m(t,e){if(t&1){let i=z();r(0,"div",24),P("click",function(){I(i);let o=it(2);return k(o.click())}),r(1,"input",25,0),P("change",function(o){I(i);let c=C();return k(c.onFilesSelected(o))}),a(),r(3,"mat-icon"),s(4,"add_circle_outline"),a(),r(5,"p"),s(6),d(7,"translate"),a(),r(8,"span",26),s(9),d(10,"translate"),a()(),b(11,vm,13,8,"div",27)}if(t&2){let i=C();l(),v("accept",i.acceptedTypes),l(5),f(m(7,4,"common.clickToSelectFiles")),l(3),f(m(10,6,"common.multipleFilesAllowed")),l(2),y(i.files.length>0?11:-1)}}function Cm(t,e){if(t&1&&(r(0,"div",40)(1,"mat-icon"),s(2,"error"),a(),r(3,"span"),s(4),d(5,"translate"),a()()),t&2){let i=C(2);l(4),de("",i.errorCount," ",m(5,2,"common.failed"))}}function xm(t,e){t&1&&(r(0,"mat-icon",43),s(1,"check_circle"),a())}function bm(t,e){t&1&&(r(0,"mat-icon",44),s(1,"error"),a())}function ym(t,e){if(t&1&&(r(0,"span",46),s(1),a()),t&2){let i=C().$implicit;Ve("error",i.status==="error"),l(),f(i.message)}}function Mm(t,e){if(t&1&&(r(0,"div",32)(1,"div",33),b(2,xm,2,0,"mat-icon",43)(3,bm,2,0,"mat-icon",44),r(4,"div",34)(5,"span",14),s(6),a(),b(7,ym,2,3,"span",45),a()()()),t&2){let i=e.$implicit;Ve("success",i.status==="success")("error",i.status==="error"),l(2),y(i.status==="success"?2:3),l(4),f(i.file.name),l(),y(i.message?7:-1)}}function Pm(t,e){if(t&1&&(r(0,"div",6)(1,"div",38)(2,"div",39)(3,"mat-icon"),s(4,"check_circle"),a(),r(5,"span"),s(6),d(7,"translate"),a()(),b(8,Cm,6,4,"div",40),a(),r(9,"div",41),Y(10,Mm,8,7,"div",42,dl),a()()),t&2){let i=C();l(6),de("",i.successCount," ",m(7,3,"common.successful")),l(2),y(i.errorCount>0?8:-1),l(2),X(i.files)}}function Om(t,e){t&1&&D(0,"mat-spinner",16)}function Dm(t,e){t&1&&(r(0,"mat-icon"),s(1,"cloud_upload"),a())}function wm(t,e){if(t&1){let i=z();r(0,"button",49),P("click",function(){I(i);let o=C(2);return k(o.upload())}),b(1,Om,1,0,"mat-spinner",16)(2,Dm,2,0,"mat-icon"),s(3),d(4,"translate"),a()}if(t&2){let i=C(2);v("disabled",i.uploading),l(),y(i.uploading?1:2),l(2),T(" ",m(4,3,"common.upload")," ")}}function Sm(t,e){if(t&1){let i=z();r(0,"button",47),P("click",function(){I(i);let o=C();return k(o.onClose())}),s(1),d(2,"translate"),a(),b(3,wm,5,5,"button",48)}if(t&2){let i=C();v("disabled",i.uploading),l(),T(" ",m(2,3,"common.cancel")," "),l(2),y(i.files.length>0?3:-1)}}function Em(t,e){t&1&&D(0,"mat-spinner",16)}function Im(t,e){t&1&&(r(0,"mat-icon"),s(1,"refresh"),a())}function km(t,e){if(t&1){let i=z();r(0,"button",51),P("click",function(){I(i);let o=C(2);return k(o.retryFailed())}),b(1,Em,1,0,"mat-spinner",16)(2,Im,2,0,"mat-icon"),s(3),d(4,"translate"),a()}if(t&2){let i=C(2);v("disabled",i.uploading),l(),y(i.uploading?1:2),l(2),T(" ",m(4,3,"common.retryFailed")," ")}}function Am(t,e){if(t&1){let i=z();b(0,km,5,5,"button",50),r(1,"button",49),P("click",function(){I(i);let o=C();return k(o.onClose())}),s(2),d(3,"translate"),a()}if(t&2){let i=C();y(i.errorCount>0?0:-1),l(),v("disabled",i.uploading),l(),T(" ",m(3,3,"common.close")," ")}}var On=class t{constructor(e,i,n,o,c,p){this.dialogRef=e;this.filesService=i;this.cdr=o;this.snackbar=c;this.dialog=p;this.title=n.title||"common.bulkUpload",this.entityId=n.entityId,this.entityType=n.entityType,this.acceptedTypes=n.acceptedTypes||"*/*"}title;entityId;entityType;acceptedTypes;files=[];existingFiles=[];loadingExisting=!1;deletingFileId;updatingPrimaryId;uploading=!1;uploadComplete=!1;results=[];ngOnInit(){this.loadExistingFiles()}loadExistingFiles(){!this.entityId||!this.entityType||(this.loadingExisting=!0,this.filesService.getByEntity(this.entityId,this.entityType).subscribe({next:e=>{this.existingFiles=e.data||[],this.loadingExisting=!1,this.cdr.markForCheck()},error:()=>{this.loadingExisting=!1,this.cdr.markForCheck()}}))}deleteExistingFile(e){this.dialog.open(Ce,{width:"400px",data:{title:"common.confirmDelete",message:"common.confirmDeleteFile",confirmLabel:"common.delete",cancelLabel:"common.cancel",confirmColor:"warn",icon:"delete"}}).afterClosed().subscribe(n=>{n&&(this.deletingFileId=e.id,this.filesService.delete(e.id).subscribe({next:()=>{this.existingFiles=this.existingFiles.filter(o=>o.id!==e.id),this.deletingFileId=void 0,this.snackbar.success("File deleted successfully"),this.cdr.markForCheck()},error:()=>{this.deletingFileId=void 0,this.snackbar.error("Failed to delete file"),this.cdr.markForCheck()}}))})}isViewable(e){return["image/","application/pdf"].some(n=>e.contentType?.startsWith(n))}viewOrDownloadFile(e){if(this.isViewable(e))window.open(e.fileUrl,"_blank");else{let i=document.createElement("a");i.href=e.fileUrl,i.download=e.fileName,i.click()}}onFilesSelected(e){let i=e.target;if(i.files?.length){for(let n=0;n<i.files.length;n++){let o=i.files[n];this.files.some(c=>c.file.name===o.name&&c.file.size===o.size)||this.files.push({file:o,status:"pending"})}i.value=""}}removeFile(e){this.files.splice(e,1)}clearAll(){this.files=[]}setAsPrimary(e){let i=this.files[e].isPrimary;this.files.forEach(n=>n.isPrimary=!1),this.existingFiles.forEach(n=>n.isPrimary=!1),i||(this.files[e].isPrimary=!0)}setExistingAsPrimary(e){let i=e.isPrimary,n=!i;this.files.forEach(o=>o.isPrimary=!1),this.existingFiles.forEach(o=>o.isPrimary=!1),n&&(e.isPrimary=!0),this.updatingPrimaryId=e.id,this.filesService.update(e.id,{isPrimary:n}).subscribe({next:()=>{this.updatingPrimaryId=void 0,this.snackbar.success("Primary file updated successfully"),this.cdr.markForCheck()},error:()=>{e.isPrimary=i,this.updatingPrimaryId=void 0,this.snackbar.error("Failed to update primary file"),this.cdr.markForCheck()}})}formatFileSize(e){if(e===0)return"0 B";let i=1024,n=["B","KB","MB","GB"],o=Math.floor(Math.log(e)/Math.log(i));return parseFloat((e/Math.pow(i,o)).toFixed(1))+" "+n[o]}upload(){this.files.length!==0&&this.uploadFiles(this.files)}retryFailed(){let e=this.failedFiles;e.length!==0&&this.uploadFiles(e)}uploadFiles(e){this.uploading=!0,this.uploadComplete=!1,e.forEach(n=>{n.status="uploading",n.message=void 0});let i=e.map(n=>({file:n.file,entityId:this.entityId,entityType:this.entityType,isPrimary:n.isPrimary}));this.filesService.bulkUpload(i).subscribe({next:n=>{this.uploading=!1,this.uploadComplete=!0,this.results=n.data||[],this.results.forEach((o,c)=>{let p=e[c];p&&(p.status=o.operation==="uploaded"?"success":"error",p.message=o.errorMessage)}),this.cdr.markForCheck()},error:n=>{this.uploading=!1,this.uploadComplete=!0,e.forEach(o=>{o.status="error",o.message=n.message||"Upload failed"}),this.cdr.markForCheck()}})}get successCount(){return this.files.filter(e=>e.status==="success").length}get errorCount(){return this.files.filter(e=>e.status==="error").length}get failedFiles(){return this.files.filter(e=>e.status==="error")}onClose(){this.dialogRef.close()}static \u0275fac=function(i){return new(i||t)(h(G),h(Si),h($),h(W),h(L),h(Pe))};static \u0275cmp=E({type:t,selectors:[["app-bulk-upload-dialog"]],standalone:!1,decls:14,vars:6,consts:[["fileInput",""],[1,"bulk-upload-dialog"],[1,"dialog-header"],[1,"header-icon"],[1,"loading-existing"],[1,"existing-files-section"],[1,"results-section"],[1,"dialog-actions"],["diameter","24"],[1,"section-header"],[1,"existing-files-list"],[1,"existing-file-item"],[1,"file-icon"],[1,"file-details",3,"click"],[1,"file-name"],[1,"file-size"],["diameter","20"],["color","primary",3,"checked","disabled"],["mat-icon-button","","matTooltipClass","action-tooltip",3,"click","matTooltip"],[1,"view-icon"],["mat-icon-button","","color","warn","matTooltipClass","action-tooltip",3,"click","disabled","matTooltip"],["diameter","18"],[1,"delete-icon"],["color","primary",3,"change","checked","disabled"],[1,"drop-zone",3,"click"],["type","file","multiple","",2,"display","none",3,"change","accept"],[1,"hint"],[1,"files-section"],[1,"files-header"],["mat-button","","color","warn",3,"click","disabled"],[1,"files-list"],[1,"file-item",3,"uploading"],[1,"file-item"],[1,"file-info"],[1,"file-details"],[1,"file-actions"],["mat-icon-button","","color","warn",3,"disabled"],["mat-icon-button","","color","warn",3,"click","disabled"],[1,"results-summary"],[1,"summary-item","success"],[1,"summary-item","error"],[1,"files-list","results"],[1,"file-item",3,"success","error"],[1,"status-icon","success"],[1,"status-icon","error"],[1,"file-message",3,"error"],[1,"file-message"],["mat-button","",3,"click","disabled"],["mat-raised-button","","color","primary",3,"disabled"],["mat-raised-button","","color","primary",3,"click","disabled"],["mat-stroked-button","","color","warn",3,"disabled"],["mat-stroked-button","","color","warn",3,"click","disabled"]],template:function(i,n){i&1&&(r(0,"div",1)(1,"div",2)(2,"mat-icon",3),s(3,"cloud_upload"),a(),r(4,"h2"),s(5),d(6,"translate"),a()(),b(7,lm,5,3,"div",4)(8,fm,10,4,"div",5),b(9,_m,12,8)(10,Pm,12,5,"div",6),r(11,"div",7),b(12,Sm,4,5)(13,Am,4,5),a()()),i&2&&(l(5),f(m(6,4,n.title)),l(2),y(n.loadingExisting?7:n.existingFiles.length>0?8:-1),l(2),y(n.uploadComplete?10:9),l(3),y(n.uploadComplete?13:12))},dependencies:[fe,at,Ue,B,yi,Oe,A],styles:[".bulk-upload-dialog[_ngcontent-%COMP%]{padding:24px;min-width:450px;max-width:550px;max-height:80vh;overflow-y:auto}.bulk-upload-dialog[_ngcontent-%COMP%]   .dialog-header[_ngcontent-%COMP%]{display:flex;align-items:center;gap:12px;margin-bottom:24px}.bulk-upload-dialog[_ngcontent-%COMP%]   .dialog-header[_ngcontent-%COMP%]   .header-icon[_ngcontent-%COMP%]{font-size:32px;width:32px;height:32px;color:var(--primary-color)}.bulk-upload-dialog[_ngcontent-%COMP%]   .dialog-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin:0;font-size:1.25rem;font-weight:600;color:var(--secondary-color)}.bulk-upload-dialog[_ngcontent-%COMP%]   .loading-existing[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;gap:12px;padding:16px;color:var(--p-color)}.bulk-upload-dialog[_ngcontent-%COMP%]   .existing-files-section[_ngcontent-%COMP%]{margin-bottom:20px;border:1px solid #e0e0e0;border-radius:8px;overflow:hidden}.bulk-upload-dialog[_ngcontent-%COMP%]   .existing-files-section[_ngcontent-%COMP%]   .section-header[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px;padding:12px 16px;background:#f5f5f5;border-bottom:1px solid #e0e0e0;font-weight:500;color:var(--secondary-color)}.bulk-upload-dialog[_ngcontent-%COMP%]   .existing-files-section[_ngcontent-%COMP%]   .section-header[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{color:var(--primary-color)}.bulk-upload-dialog[_ngcontent-%COMP%]   .existing-files-section[_ngcontent-%COMP%]   .existing-files-list[_ngcontent-%COMP%]{max-height:150px;overflow-y:auto}.bulk-upload-dialog[_ngcontent-%COMP%]   .existing-files-section[_ngcontent-%COMP%]   .existing-file-item[_ngcontent-%COMP%]{display:flex;align-items:center;gap:12px;padding:10px 16px;border-bottom:1px solid #f0f0f0}.bulk-upload-dialog[_ngcontent-%COMP%]   .existing-files-section[_ngcontent-%COMP%]   .existing-file-item[_ngcontent-%COMP%]:last-child{border-bottom:none}.bulk-upload-dialog[_ngcontent-%COMP%]   .existing-files-section[_ngcontent-%COMP%]   .existing-file-item[_ngcontent-%COMP%]   .file-icon[_ngcontent-%COMP%]{color:var(--p-color)}.bulk-upload-dialog[_ngcontent-%COMP%]   .existing-files-section[_ngcontent-%COMP%]   .existing-file-item[_ngcontent-%COMP%]   .file-details[_ngcontent-%COMP%]{display:flex;flex-direction:column;min-width:0;flex:1;cursor:pointer}.bulk-upload-dialog[_ngcontent-%COMP%]   .existing-files-section[_ngcontent-%COMP%]   .existing-file-item[_ngcontent-%COMP%]   .file-details[_ngcontent-%COMP%]:hover   .file-name[_ngcontent-%COMP%]{color:var(--primary-color);text-decoration:underline}.bulk-upload-dialog[_ngcontent-%COMP%]   .existing-files-section[_ngcontent-%COMP%]   .existing-file-item[_ngcontent-%COMP%]   .file-details[_ngcontent-%COMP%]   .file-name[_ngcontent-%COMP%]{font-size:.9rem;color:var(--secondary-color);white-space:nowrap;overflow:hidden;text-overflow:ellipsis;transition:color .2s ease}.bulk-upload-dialog[_ngcontent-%COMP%]   .existing-files-section[_ngcontent-%COMP%]   .existing-file-item[_ngcontent-%COMP%]   .file-details[_ngcontent-%COMP%]   .file-size[_ngcontent-%COMP%]{font-size:.8rem;color:var(--p-color)}.bulk-upload-dialog[_ngcontent-%COMP%]   .existing-files-section[_ngcontent-%COMP%]   .existing-file-item[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{flex-shrink:0}.bulk-upload-dialog[_ngcontent-%COMP%]   .existing-files-section[_ngcontent-%COMP%]   .existing-file-item[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]   .view-icon[_ngcontent-%COMP%]{color:var(--primary-color)}.bulk-upload-dialog[_ngcontent-%COMP%]   .existing-files-section[_ngcontent-%COMP%]   .existing-file-item[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]   .delete-icon[_ngcontent-%COMP%]{color:#ef4444}.bulk-upload-dialog[_ngcontent-%COMP%]   .drop-zone[_ngcontent-%COMP%]{border:2px dashed #e0e0e0;border-radius:12px;padding:32px;text-align:center;cursor:pointer;transition:all .2s ease;background:#fafafa}.bulk-upload-dialog[_ngcontent-%COMP%]   .drop-zone[_ngcontent-%COMP%]:hover{border-color:var(--primary-color);background:#81b29a0d}.bulk-upload-dialog[_ngcontent-%COMP%]   .drop-zone[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:48px;width:48px;height:48px;color:var(--primary-color);margin-bottom:8px}.bulk-upload-dialog[_ngcontent-%COMP%]   .drop-zone[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0 0 4px;font-size:1rem;color:var(--secondary-color);font-weight:500}.bulk-upload-dialog[_ngcontent-%COMP%]   .drop-zone[_ngcontent-%COMP%]   .hint[_ngcontent-%COMP%]{font-size:.85rem;color:var(--p-color)}.bulk-upload-dialog[_ngcontent-%COMP%]   .is-primary[_ngcontent-%COMP%]{color:#f59e0b!important}.bulk-upload-dialog[_ngcontent-%COMP%]   .files-section[_ngcontent-%COMP%]{margin-top:20px}.bulk-upload-dialog[_ngcontent-%COMP%]   .files-section[_ngcontent-%COMP%]   .files-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:12px}.bulk-upload-dialog[_ngcontent-%COMP%]   .files-section[_ngcontent-%COMP%]   .files-header[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-weight:500;color:var(--secondary-color)}.bulk-upload-dialog[_ngcontent-%COMP%]   .files-section[_ngcontent-%COMP%]   .files-header[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{margin-right:4px}.bulk-upload-dialog[_ngcontent-%COMP%]   .files-list[_ngcontent-%COMP%]{max-height:250px;overflow-y:auto;border:1px solid #e0e0e0;border-radius:8px}.bulk-upload-dialog[_ngcontent-%COMP%]   .files-list.results[_ngcontent-%COMP%]{max-height:300px}.bulk-upload-dialog[_ngcontent-%COMP%]   .file-item[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:12px 16px;border-bottom:1px solid #f0f0f0;transition:background .2s ease}.bulk-upload-dialog[_ngcontent-%COMP%]   .file-item[_ngcontent-%COMP%]:last-child{border-bottom:none}.bulk-upload-dialog[_ngcontent-%COMP%]   .file-item[_ngcontent-%COMP%]:hover{background:#fafafa}.bulk-upload-dialog[_ngcontent-%COMP%]   .file-item.uploading[_ngcontent-%COMP%]{background:#81b29a0d}.bulk-upload-dialog[_ngcontent-%COMP%]   .file-item.success[_ngcontent-%COMP%]{background:#10b9810d}.bulk-upload-dialog[_ngcontent-%COMP%]   .file-item.error[_ngcontent-%COMP%]{background:#ef44440d}.bulk-upload-dialog[_ngcontent-%COMP%]   .file-item[_ngcontent-%COMP%]   .file-info[_ngcontent-%COMP%]{display:flex;align-items:center;gap:12px;flex:1;min-width:0}.bulk-upload-dialog[_ngcontent-%COMP%]   .file-item[_ngcontent-%COMP%]   .file-info[_ngcontent-%COMP%]   .file-icon[_ngcontent-%COMP%]{color:var(--p-color)}.bulk-upload-dialog[_ngcontent-%COMP%]   .file-item[_ngcontent-%COMP%]   .file-info[_ngcontent-%COMP%]   .status-icon.success[_ngcontent-%COMP%]{color:#10b981}.bulk-upload-dialog[_ngcontent-%COMP%]   .file-item[_ngcontent-%COMP%]   .file-info[_ngcontent-%COMP%]   .status-icon.error[_ngcontent-%COMP%]{color:#ef4444}.bulk-upload-dialog[_ngcontent-%COMP%]   .file-item[_ngcontent-%COMP%]   .file-info[_ngcontent-%COMP%]   .file-details[_ngcontent-%COMP%]{display:flex;flex-direction:column;min-width:0}.bulk-upload-dialog[_ngcontent-%COMP%]   .file-item[_ngcontent-%COMP%]   .file-info[_ngcontent-%COMP%]   .file-details[_ngcontent-%COMP%]   .file-name[_ngcontent-%COMP%]{font-size:.9rem;color:var(--secondary-color);white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.bulk-upload-dialog[_ngcontent-%COMP%]   .file-item[_ngcontent-%COMP%]   .file-info[_ngcontent-%COMP%]   .file-details[_ngcontent-%COMP%]   .file-size[_ngcontent-%COMP%], .bulk-upload-dialog[_ngcontent-%COMP%]   .file-item[_ngcontent-%COMP%]   .file-info[_ngcontent-%COMP%]   .file-details[_ngcontent-%COMP%]   .file-message[_ngcontent-%COMP%]{font-size:.8rem;color:var(--p-color)}.bulk-upload-dialog[_ngcontent-%COMP%]   .file-item[_ngcontent-%COMP%]   .file-info[_ngcontent-%COMP%]   .file-details[_ngcontent-%COMP%]   .file-message.error[_ngcontent-%COMP%]{color:#ef4444}.bulk-upload-dialog[_ngcontent-%COMP%]   .file-item[_ngcontent-%COMP%]   .file-actions[_ngcontent-%COMP%]{display:flex;align-items:center}.bulk-upload-dialog[_ngcontent-%COMP%]   .results-section[_ngcontent-%COMP%]   .results-summary[_ngcontent-%COMP%]{display:flex;gap:16px;margin-bottom:16px}.bulk-upload-dialog[_ngcontent-%COMP%]   .results-section[_ngcontent-%COMP%]   .results-summary[_ngcontent-%COMP%]   .summary-item[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px;padding:8px 16px;border-radius:8px;font-weight:500}.bulk-upload-dialog[_ngcontent-%COMP%]   .results-section[_ngcontent-%COMP%]   .results-summary[_ngcontent-%COMP%]   .summary-item.success[_ngcontent-%COMP%]{background:#10b9811a;color:#10b981}.bulk-upload-dialog[_ngcontent-%COMP%]   .results-section[_ngcontent-%COMP%]   .results-summary[_ngcontent-%COMP%]   .summary-item.error[_ngcontent-%COMP%]{background:#ef44441a;color:#ef4444}.bulk-upload-dialog[_ngcontent-%COMP%]   .results-section[_ngcontent-%COMP%]   .results-summary[_ngcontent-%COMP%]   .summary-item[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:20px;width:20px;height:20px}.bulk-upload-dialog[_ngcontent-%COMP%]   .dialog-actions[_ngcontent-%COMP%]{display:flex;justify-content:flex-end;gap:12px;margin-top:24px;padding-top:16px;border-top:1px solid #e0e0e0}.bulk-upload-dialog[_ngcontent-%COMP%]   .dialog-actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{min-width:100px;border-radius:8px}.bulk-upload-dialog[_ngcontent-%COMP%]   .dialog-actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{margin-right:4px}.bulk-upload-dialog[_ngcontent-%COMP%]   .dialog-actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]   mat-spinner[_ngcontent-%COMP%]{display:inline-block;margin-right:8px}  .action-tooltip{background:#3d5a80!important;color:#fff!important;font-size:.75rem;padding:.5rem .75rem;border-radius:4px}"]})};var Dn=class t{constructor(e,i,n,o,c){this.eventsService=e;this.snackbar=i;this.dialog=n;this.translationService=o;this.cdr=c}events=[];totalCount=0;loading=!1;pageNumber=1;pageSize=10;sortBy;sortDescending=!1;filterValues={};gridConfig;ngOnInit(){this.initGridConfig(),this.loadEvents()}get isArabic(){return this.translationService.language()==="ar"}initGridConfig(){this.gridConfig={title:"admin.eventsAdmin.title",subtitle:"admin.eventsAdmin.subtitle",addButton:{label:"admin.eventsAdmin.addEvent",icon:"add",color:"primary",permission:F.EVENTS_CREATE},showSearch:!0,searchPlaceholder:this.translate("admin.eventsAdmin.searchPlaceholder"),columns:[{key:"title",header:"admin.eventsAdmin.title",sortable:!0,cell:e=>this.isArabic?e.titleAr:e.titleEn},{key:"department",header:"admin.eventsAdmin.department",cell:e=>e.departmentId&&(this.isArabic?e.departmentNameAr:e.departmentNameEn)||"-"},{key:"eventUrl",header:"admin.eventsAdmin.eventUrl",cell:e=>e.eventUrl||"-"},{key:"eventDate",header:"admin.eventsAdmin.eventDate",type:"date",dateFormat:"dd/MM/yyyy",sortable:!0}],actions:[{icon:"visibility",tooltip:"admin.eventsAdmin.view",color:"info",onClick:e=>this.openViewDialog(e)},{icon:"edit",tooltip:"admin.eventsAdmin.edit",permission:F.EVENTS_UPDATE,color:"info",onClick:e=>this.openEditDialog(e)},{icon:"delete",tooltip:"admin.eventsAdmin.delete",permission:F.EVENTS_DELETE,color:"warn",onClick:e=>this.deleteEvent(e)},{icon:"cloud_upload",tooltip:"common.bulkUpload",permission:F.EVENTS_UPDATE,color:"primary",onClick:e=>this.openBulkUploadDialog(e)}],serverSide:!0,pageSizeOptions:[5,10,25,50],defaultPageSize:10}}translate(e){return this.translationService.translate(e)}loadEvents(){this.loading=!0;let e={pageNumber:this.pageNumber,pageSize:this.pageSize,search:this.filterValues.search||void 0,sortBy:this.sortBy,sortDescending:this.sortDescending};this.eventsService.getPaged(e).subscribe({next:i=>{i.success&&i.data&&(this.events=i.data.data,this.totalCount=i.data.totalCount),this.loading=!1,this.cdr.detectChanges()},error:()=>{this.loading=!1,this.cdr.detectChanges()}})}onPageChange(e){this.pageNumber=e.pageIndex+1,this.pageSize=e.pageSize,this.loadEvents()}onSortChange(e){this.sortBy=e.active,this.sortDescending=e.direction==="desc",this.loadEvents()}onFilterChange(e){this.filterValues=e,this.pageNumber=1,this.loadEvents()}openCreateDialog(){let e={mode:"create"};this.dialog.open(di,{width:"700px",data:e,disableClose:!0}).afterClosed().subscribe(n=>{n&&this.loadEvents()})}openEditDialog(e){let i={mode:"edit",event:e};this.dialog.open(di,{width:"700px",data:i,disableClose:!0}).afterClosed().subscribe(o=>{o&&this.loadEvents()})}openViewDialog(e){this.dialog.open(Pn,{width:"700px",data:e})}openBulkUploadDialog(e){let i={title:"common.bulkUpload",entityId:e.id,entityType:"Event",acceptedTypes:"image/*"};this.dialog.open(On,{width:"550px",data:i})}deleteEvent(e){let n=this.translationService.language()==="ar"?e.titleAr:e.titleEn,o={title:this.translate("admin.eventsAdmin.deleteEvent"),message:this.translate("admin.eventsAdmin.confirmDelete"),confirmLabel:this.translate("common.delete"),cancelLabel:this.translate("common.cancel"),confirmColor:"warn",icon:"delete"};this.dialog.open(Ce,{width:"400px",data:o}).afterClosed().subscribe(p=>{p&&(this.loading=!0,this.eventsService.delete(e.id).subscribe({next:()=>{this.snackbar.success(this.translate("admin.eventsAdmin.eventDeleted")),this.loadEvents()},error:g=>{this.snackbar.error(g.message||this.translate("admin.eventsAdmin.errors.deleteFailed")),this.loading=!1}}))})}static \u0275fac=function(i){return new(i||t)(h(Ei),h(L),h(Pe),h(N),h(W))};static \u0275cmp=E({type:t,selectors:[["app-events-component"]],standalone:!1,decls:1,vars:6,consts:[[3,"pageChange","sortChange","filterChange","addClick","data","config","totalCount","loading","pageIndex","pageSize"]],template:function(i,n){i&1&&(r(0,"app-data-grid",0),P("pageChange",function(c){return n.onPageChange(c)})("sortChange",function(c){return n.onSortChange(c)})("filterChange",function(c){return n.onFilterChange(c)})("addClick",function(){return n.openCreateDialog()}),a()),i&2&&v("data",n.events)("config",n.gridConfig)("totalCount",n.totalCount)("loading",n.loading)("pageIndex",n.pageNumber-1)("pageSize",n.pageSize)},dependencies:[Se],styles:["[_nghost-%COMP%]{display:block}"]})};var ml=[{path:"",component:Ii,children:[{path:"",component:ai},{path:"users",component:ln},{path:"roles",component:dn},{path:"employees",component:hn},{path:"positions",component:Cn},{path:"departments",component:yn},{path:"departments/:id/org-chart",component:Mn},{path:"events",component:Dn},{path:"settings",component:ai}]}];var fl=class t{static \u0275fac=function(i){return new(i||t)};static \u0275mod=go({type:t});static \u0275inj=po({imports:[la,wo.forChild(ml)]})};export{fl as AdminModule};
